app:
  description: Á§æÂÜÖAI„ÉÅ„É£„ÉÉ„Éà„Éú„ÉÉ„ÉàÈñãÁô∫ (Phase 1) „ÄÇ
  icon: ü§ñ
  icon_background: '#FFEAD5'
  mode: advanced-chat
  name: HybridQA
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/gemini:0.7.5@13e7f1c10c3844d943714bd74bfc4fe26a21fae32efbe678858d6ac5079b2b3e
    version: null
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/openai:0.2.6@e2665624a156f52160927bceac9e169bd7e5ae6b936ae82575e14c90af390e6e
    version: null
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: r3-yamauchi/gemini_file_search:0.0.1@a9cf50b020b00b20f3b3f462d697f797517551d5d8bb8bf7ef078847080cabeb
    version: null
kind: app
version: 0.5.0
workflow:
  conversation_variables:
  - description: ''
    id: 31a3c801-9584-4a27-aa93-1dc403f61e94
    name: DevRoute
    selector:
    - conversation
    - DevRoute
    value: true
    value_type: boolean
  - description: ''
    id: 6a708509-1da6-4c64-9f59-3667ae436705
    name: context_file_name
    selector:
    - conversation
    - context_file_name
    value: ''
    value_type: string
  - description: ÊúÄÈÅ©Âåñ„Åï„Çå„ÅüÊ§úÁ¥¢„ÇØ„Ç®„É™
    id: f7d8ed98-9085-43e4-adda-9558b3de8f52
    name: optimized_search_query
    selector:
    - conversation
    - optimized_search_query
    value: ''
    value_type: string
  - description: WebÊ§úÁ¥¢ÁµêÊûú
    id: 38630ad2-9d96-475b-8daa-fca4012bf7e3
    name: context_web
    selector:
    - conversation
    - context_web
    value: ''
    value_type: string
  - description: RAGÊ§úÁ¥¢ÁµêÊûú
    id: ee471556-3e5c-4c12-8e2f-a89b3aab8423
    name: context_rag
    selector:
    - conversation
    - context_rag
    value: ''
    value_type: string
  - description: „Éï„Ç°„Ç§„É´ÊäΩÂá∫„ÉÜ„Ç≠„Çπ„Éà
    id: b72b2f7b-8ca9-478d-9e1e-13e88c074c9e
    name: context_file
    selector:
    - conversation
    - context_file
    value: []
    value_type: array[string]
  - description: ''
    id: f21ecbed-b927-4f77-b16d-edc5d6b50621
    name: input_perplexity
    selector:
    - conversation
    - input_perplexity
    value: ''
    value_type: string
  - description: ''
    id: dc709b28-a14d-4585-960c-64cb3857a97a
    name: extracted_text
    selector:
    - conversation
    - extracted_text
    value: ''
    value_type: string
  - description: ''
    id: d3a4c143-2880-43da-9954-dc5984ff034a
    name: temp_result
    selector:
    - conversation
    - temp_result
    value: ''
    value_type: string
  environment_variables:
  - description: ''
    id: 9a180917-ddba-4289-9291-ffd14c16a683
    name: PerplexityApiKey
    selector:
    - env
    - PerplexityApiKey
    value: ''
    value_type: secret
  - description: ''
    id: 506b86a8-bb2d-41c4-b718-7f8d898105cb
    name: GeminiApiKey
    selector:
    - env
    - GeminiApiKey
    value: ''
    value_type: secret
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - document
      allowed_file_upload_methods:
      - remote_url
      - local_file
      enabled: true
      fileUploadConfig:
        attachment_image_file_size_limit: 2
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        file_upload_limit: 50
        image_file_batch_limit: 10
        image_file_size_limit: 10
        single_chunk_attachment_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 5
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: true
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: document-extractor
      id: 1764913411735-true-1764913700839-target
      selected: false
      source: '1764913411735'
      sourceHandle: 'true'
      target: '1764913700839'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: document-extractor
        targetType: code
      id: 1764913700839-source-1764924171081-target
      selected: false
      source: '1764913700839'
      sourceHandle: source
      target: '1764924171081'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: assigner
      id: 1764924171081-source-1764913830165-target
      selected: false
      source: '1764924171081'
      sourceHandle: source
      target: '1764913830165'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: if-else
      id: 1765514869301-source-1765515071449-target
      selected: false
      source: '1765514869301'
      sourceHandle: source
      target: '1765515071449'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: if-else
      id: 1762490237953-false-1765854025663-target
      selected: false
      source: '1762490237953'
      sourceHandle: 'false'
      target: '1765854025663'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: if-else
      id: 1765854025663-false-1764913411735-target
      selected: false
      source: '1765854025663'
      sourceHandle: 'false'
      target: '1764913411735'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: if-else
      id: 1765854025663-true-17658598785120-target
      selected: false
      source: '1765854025663'
      sourceHandle: 'true'
      target: '17658598785120'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: document-extractor
      id: 17658598785120-true-17658598785131-target
      selected: false
      source: '17658598785120'
      sourceHandle: 'true'
      target: '17658598785131'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: document-extractor
        targetType: code
      id: 17658598785131-source-17658598785133-target
      selected: false
      source: '17658598785131'
      sourceHandle: source
      target: '17658598785133'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: assigner
      id: 17658598785133-source-17658598785132-target
      selected: false
      source: '17658598785133'
      sourceHandle: source
      target: '17658598785132'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: assigner
        targetType: if-else
      id: 17658598785132-source-1766549782668-target
      selected: false
      source: '17658598785132'
      sourceHandle: source
      target: '1766549782668'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: if-else
      id: 17658598785120-0703a046-f8f7-4b0e-b07b-3794eaee8f40-1766549782668-target
      selected: false
      source: '17658598785120'
      sourceHandle: 0703a046-f8f7-4b0e-b07b-3794eaee8f40
      target: '1766549782668'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 1766549782668-false-17665499392760-target
      selected: false
      source: '1766549782668'
      sourceHandle: 'false'
      target: '17665499392760'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 17665499392760-source-1765854668107-target
      selected: false
      source: '17665499392760'
      sourceHandle: source
      target: '1765854668107'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 17665500976990-source-1765859958399-target
      selected: false
      source: '17665500976990'
      sourceHandle: source
      target: '1765859958399'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 17665511958080-source-1765345440190-target
      selected: false
      source: '17665511958080'
      sourceHandle: source
      target: '1765345440190'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 17665512107830-source-17655153615920-target
      selected: false
      source: '17665512107830'
      sourceHandle: source
      target: '17655153615920'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 17665512248470-source-17655153626170-target
      selected: false
      source: '17665512248470'
      sourceHandle: source
      target: '17655153626170'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 17665512406710-source-17655153635450-target
      selected: false
      source: '17665512406710'
      sourceHandle: source
      target: '17655153635450'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 17665517422840-source-1765345427966-target
      selected: false
      source: '17665517422840'
      sourceHandle: source
      target: '1765345427966'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: code
      id: 1764914157100-false-1765514869301-target
      selected: false
      source: '1764914157100'
      sourceHandle: 'false'
      target: '1765514869301'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: if-else
      id: 1765343666910-false-1764914026588-target
      selected: false
      source: '1765343666910'
      sourceHandle: 'false'
      target: '1764914026588'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: if-else
      id: 1764914026588-false-1764914157100-target
      selected: false
      source: '1764914026588'
      sourceHandle: 'false'
      target: '1764914157100'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: assigner
        targetType: if-else
      id: 1764914113059-source-1764914157100-target
      selected: false
      source: '1764914113059'
      sourceHandle: source
      target: '1764914157100'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: assigner
        targetType: code
      id: 17696657120690-source-1765514869301-target
      selected: false
      source: '17696657120690'
      sourceHandle: source
      target: '1765514869301'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: iteration
      id: 1769666802121-source-1769668260271-target
      selected: false
      source: '1769666802121'
      sourceHandle: source
      target: '1769668260271'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: true
        isInLoop: false
        iteration_id: '1769668260271'
        sourceType: iteration-start
        targetType: http-request
      id: 1769668260271start-source-1769668322968-target
      selected: false
      source: 1769668260271start
      sourceHandle: source
      target: '1769668322968'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: iteration
        targetType: llm
      id: 1769668260271-source-1769668477538-target
      selected: false
      source: '1769668260271'
      sourceHandle: source
      target: '1769668477538'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: assigner
      id: 1769668477538-source-17696657120690-target
      selected: false
      source: '1769668477538'
      sourceHandle: source
      target: '17696657120690'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: if-else
      id: 1769666720110-source-1769754087217-target
      selected: false
      source: '1769666720110'
      sourceHandle: source
      target: '1769754087217'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: code
      id: 1769754087217-false-1769666802121-target
      selected: false
      source: '1769754087217'
      sourceHandle: 'false'
      target: '1769666802121'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: code
      id: 1769754087217-true-17697542686310-target
      selected: false
      source: '1769754087217'
      sourceHandle: 'true'
      target: '17697542686310'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: assigner
        targetType: code
      id: 17697542971160-source-1765514869301-target
      selected: false
      source: '17697542971160'
      sourceHandle: source
      target: '1765514869301'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: http-request
        targetType: assigner
      id: 17697558915520-source-17697542971160-target
      selected: false
      source: '17697558915520'
      sourceHandle: source
      target: '17697542971160'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: http-request
      id: 17697542686310-source-17697558915520-target
      selected: false
      source: '17697542686310'
      sourceHandle: source
      target: '17697558915520'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 17658598785120-false-17665500976990-target
      selected: false
      source: '17658598785120'
      sourceHandle: 'false'
      target: '17665500976990'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 1765343666910-true-17665517422840-target
      selected: false
      source: '1765343666910'
      sourceHandle: 'true'
      target: '17665517422840'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 1765515071449-true-17665511958080-target
      selected: false
      source: '1765515071449'
      sourceHandle: 'true'
      target: '17665511958080'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 1765515071449-908d672e-4c25-44ac-9ee9-4f7fb1b32144-17665512107830-target
      selected: false
      source: '1765515071449'
      sourceHandle: 908d672e-4c25-44ac-9ee9-4f7fb1b32144
      target: '17665512107830'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 1765515071449-false-17665512406710-target
      selected: false
      source: '1765515071449'
      sourceHandle: 'false'
      target: '17665512406710'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 1765515071449-f10e65ad-bb00-4cdf-aabf-78811af1ba70-17665512248470-target
      selected: false
      source: '1765515071449'
      sourceHandle: f10e65ad-bb00-4cdf-aabf-78811af1ba70
      target: '17665512248470'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: if-else
      id: 1764914026588-true-1770356163928-target
      selected: false
      source: '1764914026588'
      sourceHandle: 'true'
      target: '1770356163928'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: if-else
      id: 1764914026588-0f1ddafa-eb0e-4878-870d-6c20a943bb1b-1770356163928-target
      selected: false
      source: '1764914026588'
      sourceHandle: 0f1ddafa-eb0e-4878-870d-6c20a943bb1b
      target: '1770356163928'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: assigner
      id: 1770356163928-false-1764914113059-target
      selected: false
      source: '1770356163928'
      sourceHandle: 'false'
      target: '1764914113059'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: tool
        targetType: assigner
      id: 1770356105216-source-1770356226003-target
      selected: false
      source: '1770356105216'
      sourceHandle: source
      target: '1770356226003'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: assigner
        targetType: if-else
      id: 1770356226003-source-1764914157100-target
      selected: false
      source: '1770356226003'
      sourceHandle: source
      target: '1764914157100'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: answer
      id: 1762490237953-true-answer-target
      selected: false
      source: '1762490237953'
      sourceHandle: 'true'
      target: answer
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: code
      id: 1761291739140-source-1770869430347-target
      selected: false
      source: '1761291739140'
      sourceHandle: source
      target: '1770869430347'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: if-else
      id: 1770869430347-source-1762490237953-target
      selected: false
      source: '1770869430347'
      sourceHandle: source
      target: '1762490237953'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 1764914157100-true-1769666720110-target
      selected: false
      source: '1764914157100'
      sourceHandle: 'true'
      target: '1769666720110'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 1764914157100-1db66d52-c4bb-4b05-a087-6a73781c2d5b-1769666720110-target
      selected: false
      source: '1764914157100'
      sourceHandle: 1db66d52-c4bb-4b05-a087-6a73781c2d5b
      target: '1769666720110'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: assigner
        targetType: if-else
      id: 1764913830165-source-1770871562386-target
      selected: false
      source: '1764913830165'
      sourceHandle: source
      target: '1770871562386'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: if-else
      id: 1764913411735-false-1770871562386-target
      selected: false
      source: '1764913411735'
      sourceHandle: 'false'
      target: '1770871562386'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 1770871562386-false-17683770269110-target
      selected: false
      source: '1770871562386'
      sourceHandle: 'false'
      target: '17683770269110'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: variable-aggregator
      id: 17708716964770-source-1770871743875-target
      selected: false
      source: '17708716964770'
      sourceHandle: source
      target: '1770871743875'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: variable-aggregator
      id: 17683770269110-source-1770871743875-target
      selected: false
      source: '17683770269110'
      sourceHandle: source
      target: '1770871743875'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: variable-aggregator
        targetType: if-else
      id: 1770871743875-source-1765343666910-target
      selected: false
      source: '1770871743875'
      sourceHandle: source
      target: '1765343666910'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: code
      id: 1770356163928-true-1770962567547-target
      selected: false
      source: '1770356163928'
      sourceHandle: 'true'
      target: '1770962567547'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: tool
      id: 1770962567547-source-1770356105216-target
      selected: false
      source: '1770962567547'
      sourceHandle: source
      target: '1770356105216'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: tool
      id: 1770871562386-true-1771391749204-target
      source: '1770871562386'
      sourceHandle: 'true'
      target: '1771391749204'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: tool
        targetType: llm
      id: 1771391749204-source-17708716964770-target
      source: '1771391749204'
      sourceHandle: source
      target: '17708716964770'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        selected: false
        title: ÈñãÂßã
        type: start
        variables:
        - default: false
          hint: ''
          label: isDebugMode
          max_length: 48
          options:
          - ''
          placeholder: ''
          required: false
          type: checkbox
          variable: isDebugMode
        - default: ''
          hint: ''
          label: Search Domain Filter
          max_length: 256
          options: []
          placeholder: ''
          required: false
          type: text-input
          variable: domain_filter
        - default: auto
          hint: ''
          label: Web Search Mode
          max_length: 48
          options:
          - auto
          - force
          - 'off'
          placeholder: ''
          required: true
          type: select
          variable: web_search_mode
        - default: auto
          hint: ''
          label: RAG Enabled
          max_length: 48
          options:
          - 'true'
          - 'false'
          - auto
          placeholder: ''
          required: true
          type: select
          variable: rag_enabled
        - allowed_file_extensions: []
          allowed_file_types:
          - document
          allowed_file_upload_methods:
          - local_file
          - remote_url
          default: "[\n  {\n    \"source_name\": \"Á§æÂÜÖÁ®üË≠∞Ë¶èÂÆö_2025ÊîπÂÆöÁâà.pdf\",\n    \"content\"\
            : \"Á¨¨3Êù°ÔºàÊ±∫Ë£ÅÊ®©ÈôêÂü∫Ê∫ñÔºâ\\nÁâ©ÂìÅË≥ºÂÖ•„Åä„Çà„Å≥„Çµ„Éº„Éì„ÇπÂ•ëÁ¥Ñ„Å´„Åä„Åë„ÇãÊâøË™ç„Éï„É≠„Éº„ÅØ‰ª•‰∏ã„ÅÆÈÄö„ÇäÂÆö„ÇÅ„Çã„ÄÇ\\n1. 10‰∏áÂÜÜÊú™Ê∫ÄÔºöÁõ¥Â±û„ÅÆË™≤Èï∑ÊâøË™ç\\\
            n2. 10‰∏áÂÜÜ‰ª•‰∏ä50‰∏áÂÜÜÊú™Ê∫ÄÔºöÈÉ®Èï∑ÊâøË™ç\\n3. 50‰∏áÂÜÜ‰ª•‰∏ä100‰∏áÂÜÜÊú™Ê∫ÄÔºöÊú¨ÈÉ®Èï∑Ê±∫Ë£Å\\n4. 100‰∏áÂÜÜ‰ª•‰∏äÔºöÂΩπÂì°‰ºöÊ±∫Ë£Å\\n\\\
            nÁ¨¨5Êù°ÔºàSaaSÂà©Áî®„ÅÆÁâπ‰æãÔºâ\\nÈáëÈ°ç„Å´Èñ¢„Çè„Çâ„Åö„ÄÅ„ÇØ„É©„Ç¶„Éâ„Çµ„Éº„Éì„ÇπÔºàSaaSÔºâ„ÅÆÊñ∞Ë¶èÂ•ëÁ¥Ñ„Å´„Åä„ÅÑ„Å¶„ÅØ„ÄÅÊÉÖÂ†±„Ç∑„Çπ„ÉÜ„É†ÈÉ®„Å´„Çà„Çã„Äå„Çª„Ç≠„É•„É™„ÉÜ„Ç£„ÉÅ„Çß„ÉÉ„ÇØ„Ç∑„Éº„Éà„Äç„ÅÆÊèêÂá∫„Å®ÊâøË™çÔºàÊ±∫Ë£ÅËÄÖÔºöÊÉÖ„Ç∑„ÇπÈÉ®Èï∑Ôºâ„ÅåÂøÖÈ†à„Å®„Å™„Çã„ÄÇ„Åì„Çå„ÅØÁÑ°Êñô„Éó„É©„É≥„ÅÆÊ•≠ÂãôÂà©Áî®„ÇÇÂê´„ÇÄ„ÄÇ\\\
            n\\nÁ¨¨8Êù°ÔºàÁ∑äÊÄ•Ê±∫Ë£ÅÔºâ\\nÁÅΩÂÆ≥ÊôÇ„ÇÑ„Ç∑„Çπ„ÉÜ„É†ÈöúÂÆ≥ÊôÇ„Å™„Å©„ÄÅÁ∑äÊÄ•„ÇíË¶Å„Åô„ÇãÂ†¥Âêà„ÅØ‰∫ãÂæåÊâøË™ç„ÇíË™ç„ÇÅ„Çã„Åå„ÄÅÁô∫Áîü„Åã„Çâ3Âñ∂Ê•≠Êó•‰ª•ÂÜÖ„Å´Ê≠£Ë¶è„ÅÆ„Éï„É≠„Éº„ÅßÁî≥Ë´ã„ÇíË°å„ÅÜ„Åì„Å®„ÄÇ\"\
            \n  },\n  {\n    \"source_name\": \"IT„Çª„Ç≠„É•„É™„ÉÜ„Ç£„Ç¨„Ç§„Éâ„É©„Ç§„É≥_v3.2.docx\",\n    \"\
            content\": \"3-1. „Éë„Çπ„ÉØ„Éº„Éâ„Éù„É™„Ç∑„Éº\\nÁ§æÂÜÖ„Ç∑„Çπ„ÉÜ„É†„Åä„Çà„Å≥ÈÄ£Êê∫„Åô„ÇãÂ§ñÈÉ®„ÇØ„É©„Ç¶„Éâ„Çµ„Éº„Éì„ÇπÔºàSaaSÔºâ„ÅÆ„Éë„Çπ„ÉØ„Éº„Éâ„ÅØ‰ª•‰∏ã„ÅÆË¶Å‰ª∂„ÇíÊ∫Ä„Åü„ÅôÂøÖË¶Å„Åå„ÅÇ„Çã„ÄÇ\\\
            n- ÊñáÂ≠óÊï∞Ôºö12ÊñáÂ≠ó‰ª•‰∏ä\\n- ÊßãÊàêÔºöÂ§ßÊñáÂ≠ó„ÄÅÂ∞èÊñáÂ≠ó„ÄÅÊï∞Â≠ó„ÄÅË®òÂè∑„ÅÆ4Á®ÆÈ°û„Åô„Åπ„Å¶„ÇíÊ∑∑Âú®„Åï„Åõ„Çã„Åì„Å®\\n- Â§âÊõ¥È†ªÂ∫¶ÔºöÂÆöÊúüÁöÑÂ§âÊõ¥„ÅØÊ±Ç„ÇÅ„Å™„ÅÑ„Åå„ÄÅÊºèÊ¥©„ÅåÁñë„Çè„Çå„ÇãÂ†¥Âêà„ÅØÁõ¥„Å°„Å´Â§âÊõ¥„Åô„Çã„Åì„Å®\\\
            n- Á¶ÅÊ≠¢‰∫ãÈ†ÖÔºöÊ∞èÂêç„ÄÅÁ§æÂì°Áï™Âè∑„ÄÅË™ïÁîüÊó•„Å™„Å©Êé®Ê∏¨ÂÆπÊòì„Å™ÊñáÂ≠óÂàó„ÅÆ‰ΩøÁî®\\n\\n4-2. ÁîüÊàêAI„ÅÆÂà©Áî®Ë¶èÂÆö\\n- ÂΩìÁ§æ„ÅåÂ•ëÁ¥Ñ„Åó„Å¶„ÅÑ„Çã„ÄåChatGPT\
            \ Enterprise„Äç„Åä„Çà„Å≥Êú¨„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÅßÈñãÁô∫‰∏≠„ÅÆ„ÄåÁ§æÂÜÖAI„ÉÅ„É£„ÉÉ„Éà„Éú„ÉÉ„Éà„Äç‰ª•Â§ñ„ÅÆÁîüÊàêAI„Çµ„Éº„Éì„Çπ„Å∏„ÅÆÊ•≠Âãô„Éá„Éº„Çø„ÅÆÂÖ•Âäõ„ÅØÂéüÂâáÁ¶ÅÊ≠¢„Å®„Åô„Çã„ÄÇ\\\
            n- ÁøªË®≥DeepLÔºàÁÑ°ÊñôÁâàÔºâ„Å∏„ÅÆÊ©üÂØÜÊÉÖÂ†±ÂÖ•Âäõ„ÅØÂé≥Á¶Å„ÄÇÂøÖ„ÅöProÁâà„Ç¢„Ç´„Ç¶„É≥„Éà„Çí‰ΩøÁî®„Åô„Çã„Åì„Å®„ÄÇ\\n\\n5-1. „Éá„Éê„Ç§„ÇπÁÆ°ÁêÜ\\n- ÁßÅÁâ©PC„ÄÅÁßÅÁâ©„Çπ„Éû„Éº„Éà„Éï„Ç©„É≥„ÅÆÊ•≠Âãô„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØÊé•Á∂öÔºàBYODÔºâ„ÅØ„ÄÅ‰∫ãÂâç„Å´Áî≥Ë´ã„Åó„ÄåMDMÔºà„É¢„Éê„Ç§„É´„Éá„Éê„Ç§„ÇπÁÆ°ÁêÜ„ÉÑ„Éº„É´Ôºâ„Äç„ÇíÂ∞éÂÖ•„Åó„ÅüÁ´ØÊú´„Å´Èôê„ÇäË®±ÂèØ„Åô„Çã„ÄÇ\\\
            n- USB„É°„É¢„É™Á≠â„ÅÆÂ§ñÈÉ®Ë®òÊÜ∂Â™í‰Ωì„ÅÆ‰ΩøÁî®„ÅØÂéüÂâáÁ¶ÅÊ≠¢„Å®„Åô„Çã„ÄÇ\"\n  },\n  {\n    \"source_name\": \"ÊóÖË≤ª„ÉªÁµåË≤ªÁ≤æÁÆóË¶èÁ®ã_2024.pdf\"\
            ,\n    \"content\": \"Á¨¨2Á´† ‰∫§ÈÄöË≤ª\\n1. ÈÄöÂã§‰∫§ÈÄöË≤ªÔºöÊúÄ„ÇÇÁµåÊ∏àÁöÑ„Å™ÁµåË∑ØÔºàÊúÄÂÆâÁµåË∑ØÔºâ„ÇíÂéüÂâá„Å®„Åô„Çã„ÄÇ„Åü„Å†„Åó„ÄÅÊâÄË¶ÅÊôÇÈñì„ÅåÊúÄÂÆâÁµåË∑Ø„ÅÆ0.8ÂÄç‰ª•‰∏ã„Å®„Å™„ÇãÂ†¥Âêà„ÅØ„ÄÅÊúÄÈÄüÁµåË∑Ø„ÇíË™ç„ÇÅ„ÇãÂ†¥Âêà„Åå„ÅÇ„Çã„ÄÇ\\\
            n2. „Çø„ÇØ„Ç∑„ÉºÂà©Áî®ÔºöÂéüÂâáÁ¶ÅÊ≠¢„ÄÇ„Åü„Å†„Åó„ÄÅÁµÇÈõª„ÇíÈÄÉ„Åó„ÅüÂ†¥ÂêàÔºàÊ•≠ÂãôËµ∑Âõ†„Å´Èôê„ÇãÔºâ„ÄÅ„Åæ„Åü„ÅØÂÖ¨ÂÖ±‰∫§ÈÄöÊ©üÈñ¢„Åß„ÅÆÁßªÂãï„ÅåÂõ∞Èõ£„Å™ÈáçÈáèÁâ©„ÇíÈÅãÊê¨„Åô„ÇãÂ†¥Âêà„Å´Èôê„Çä„ÄÅÈÉ®Èï∑ÊâøË™ç„ÅÆ‰∏ä„ÅßË®±ÂèØ„Åô„Çã„ÄÇ\\\
            n3. Êñ∞ÂππÁ∑ö„ÉªÁâπÊÄ•ÔºöÁâáÈÅì100km‰ª•‰∏ä„ÅÆÁßªÂãï„Å´„Åä„ÅÑ„Å¶Âà©Áî®ÂèØ„ÄÇÊåáÂÆöÂ∏≠Âà©Áî®ÂèØ„ÄÇ„Ç∞„É™„Éº„É≥Ëªä„ÅØÂΩπÂì°„ÅÆ„ÅøÂèØ„ÄÇ\\n\\nÁ¨¨4Á´† Êé•ÂæÖ‰∫§ÈöõË≤ª\\n1.\
            \ ‰ºöÈ£üÂü∫Ê∫ñÔºö1‰∫∫„ÅÇ„Åü„Çä5,000ÂÜÜÔºàÁ®éËæºÔºâ„Åæ„Åß„ÅØ‰ºöË≠∞Ë≤ª„Å®„Åó„Å¶Âá¶ÁêÜÂèØ„ÄÇ\\n2. 5,000ÂÜÜ„ÇíË∂Ö„Åà„ÇãÂ†¥ÂêàÔºö‰∫ãÂâçÁî≥Ë´ãÂøÖÈ†àÔºàË™≤Èï∑ÊâøË™çÔºâ„ÄÇ\\\
            n3. 1‰∫∫„ÅÇ„Åü„Çä10,000ÂÜÜ„ÇíË∂Ö„Åà„ÇãÂ†¥ÂêàÔºö‰∫ãÂâçÁî≥Ë´ãÂøÖÈ†àÔºàÈÉ®Èï∑ÊâøË™çÔºâ„ÄÇ‰∫åÊ¨°‰ºöË≤ªÁî®„ÅÆ‰ºöÁ§æË≤†ÊãÖ„ÅØÂéüÂâáË™ç„ÇÅ„Å™„ÅÑ„ÄÇ\\n\\nÁ¨¨6Á´† Á≤æÁÆóÊúüÈôê\\\
            nÁµåË≤ªÁô∫ÁîüÊúà„ÅÆÁøåÊúà3Âñ∂Ê•≠Êó•„Åæ„Åß„Å´„ÄåConcur„Äç„Å´„Å¶Áî≥Ë´ã„ÇíÂÆå‰∫Ü„Åô„Çã„Åì„Å®„ÄÇÊúüÈôê„ÇíÈÅé„Åé„ÅüÂ†¥Âêà„ÄÅÁêÜÁî±Êõ∏„ÅÆÊèêÂá∫„ÅåÂøÖË¶Å„Å®„Å™„Çã„ÄÇ\"\n  },\n \
            \ {\n    \"source_name\": \"„ÉÜ„É¨„ÉØ„Éº„ÇØÂã§ÂãôË¶èÂÆö_v2.1.pdf\",\n    \"content\": \"\
            1. ÂØæË±°ËÄÖ\\nË©¶Áî®ÊúüÈñìÔºàÂÖ•Á§æ3„É∂ÊúàÔºâ„ÇíÁµÇ‰∫Ü„Åó„ÄÅÊ•≠Âãô„Å´ÊîØÈöú„Åå„Å™„ÅÑ„Å®ÊâÄÂ±ûÈï∑„ÅåË™ç„ÇÅ„ÅüÊ≠£Á§æÂì°„Åä„Çà„Å≥Â•ëÁ¥ÑÁ§æÂì°„ÄÇ\\n\\n2. ÂÆüÊñΩÈ†ªÂ∫¶\\nÂéüÂâá„Å®„Åó„Å¶ÈÄ±3ÂõûÔºàÊúà12ÂõûÔºâ„Åæ„Åß„Å®„Åô„Çã„ÄÇ„Åü„Å†„Åó„ÄÅËÇ≤ÂÖê„Éª‰ªãË≠∑‰∫ãÁî±„ÄÅ„Åæ„Åü„ÅØÊÑüÊüìÁóáÊã°Â§ßÈò≤Ê≠¢Á≠â„ÅÆ‰ºöÁ§æÊåáÁ§∫„Åå„ÅÇ„ÇãÂ†¥Âêà„ÅØ„Åì„ÅÆ‰∏äÈôê„ÇíËß£Èô§„Åô„Çã„ÄÇ\\\
            n\\n3. Â∞±Ê•≠Â†¥ÊâÄ\\nËá™ÂÆÖ„ÄÅÂÆüÂÆ∂„ÄÅ„Åæ„Åü„ÅØ‰ºöÁ§æ„ÅåÂ•ëÁ¥Ñ„Åó„Å¶„ÅÑ„Çã„Ç∑„Çß„Ç¢„Ç™„Éï„Ç£„ÇπÔºàWeWorkÁ≠âÔºâ„ÄÇ„Ç´„Éï„Çß„ÇÑÂÖ¨ÂÖ±ÊñΩË®≠„Å™„Å©„ÄÅ„Çª„Ç≠„É•„É™„ÉÜ„Ç£„ÅåÊãÖ‰øù„Åß„Åç„Å™„ÅÑÂ†¥ÊâÄÔºà„Éï„É™„ÉºWi-FiÁí∞Â¢É‰∏ã„Å™„Å©Ôºâ„Åß„ÅÆÊ•≠Âãô„ÅØÁ¶ÅÊ≠¢„Åô„Çã„ÄÇ\\\
            n\\n4. „ÉÜ„É¨„ÉØ„Éº„ÇØÊâãÂΩì\\nÂÆüÊñΩ1Êó•„Å´„Å§„Åç250ÂÜÜ„ÇíÊîØÁµ¶„Åô„Çã„ÄÇ„Åì„Çå„Å´„ÅØÂÖâÁÜ±Ë≤ª„ÉªÈÄö‰ø°Ë≤ª„ÅÆË£úÂä©„ÅåÂê´„Åæ„Çå„Çã„ÄÇ\\n\\n5. Âã§ÊÄ†ÁÆ°ÁêÜ\\\
            nÂßãÊ•≠ÊôÇ„Åä„Çà„Å≥ÁµÇÊ•≠ÊôÇ„Å´„ÄÅSlack„ÅÆ„Äå#Âã§ÊÄ†ÈÄ£Áµ°„Äç„ÉÅ„É£„É≥„Éç„É´„Å´„Å¶Â†±Âëä„ÇíË°å„ÅÜ„Åì„Å®„ÄÇ‰∏≠Êäú„ÅëÔºàÈÄöÈô¢Á≠âÔºâ„Åå„ÅÇ„ÇãÂ†¥Âêà„ÇÇÂêåÊßò„Å®„Åô„Çã„ÄÇ\"\n  },\n\
            \  {\n    \"source_name\": \"Â∞±Ê•≠Ë¶èÂâá_Á¨¨4Á´†_‰ºëÊöá.pdf\",\n    \"content\": \"Á¨¨12Êù°ÔºàÂπ¥Ê¨°ÊúâÁµ¶‰ºëÊöáÔºâ\\\
            nÂÖ•Á§æÊó•„Åã„Çâ6„É∂ÊúàÁ∂ôÁ∂öÂã§Âãô„Åó„ÄÅÂÖ®Âä¥ÂÉçÊó•„ÅÆ8Ââ≤‰ª•‰∏äÂá∫Âã§„Åó„ÅüÁ§æÂì°„Å´ÂØæ„Åó„ÄÅ10Êó•‰ªò‰∏é„Åô„Çã„ÄÇ‰ª•Èôç„ÄÅÂã§Á∂öÂπ¥Êï∞„Å´Âøú„Åò„Å¶ÊúÄÂ§ß20Êó•„Åæ„Åß‰ªò‰∏é„Åô„Çã„ÄÇÊúâÁµ¶‰ºëÊöá„ÅÆÂèñÂæóÂçò‰Ωç„ÅØ„Äå1Êó•„Äç„ÄåÂçäÊó•„Äç„Äå1ÊôÇÈñì„Äç„Å®„Åô„Çã„ÄÇ\\\
            n\\nÁ¨¨15Êù°ÔºàÂ§èÂ≠£‰ºëÊöáÔºâ\\n7Êúà1Êó•„Åã„Çâ9Êúà30Êó•„Åæ„Åß„ÅÆÊúüÈñì„Å´„Åä„ÅÑ„Å¶„ÄÅ‰ªªÊÑè„ÅÆ3Êó•Èñì„ÇíÁâπÂà•‰ºëÊöáÔºàÊúâÁµ¶Ôºâ„Å®„Åó„Å¶ÂèñÂæó„Åß„Åç„Çã„ÄÇÊ•≠Âãô„ÅÆÈÉΩÂêà„ÇíËÄÉÊÖÆ„Åó„ÄÅ„ÉÅ„Éº„É†ÂÜÖ„ÅßË™øÊï¥„ÅÆ‰∏äÂèñÂæó„Åô„Çã„Åì„Å®„ÄÇ\\\
            n\\nÁ¨¨18Êù°ÔºàÊÖ∂Âºî‰ºëÊöáÔºâ\\n‰ª•‰∏ã„ÅÆ‰∫ãÁî±„ÅåÁô∫Áîü„Åó„ÅüÈöõ„ÄÅÁî≥Ë´ã„Å´„Çà„ÇäÁâπÂà•‰ºëÊöá„Çí‰ªò‰∏é„Åô„Çã„ÄÇ\\n1. Êú¨‰∫∫„ÅåÁµêÂ©ö„Åô„Çã„Å®„ÅçÔºö5Êó•\\n2. ÈÖçÂÅ∂ËÄÖ„ÅåÂá∫Áî£„Åô„Çã„Å®„ÅçÔºö2Êó•\\\
            n3. ÈÖçÂÅ∂ËÄÖ„ÄÅÂ≠ê„ÄÅÁà∂ÊØç„ÅåÊ≠ª‰∫°„Åó„Åü„Å®„ÅçÔºö5Êó•\\n4. ÂÖÑÂºüÂßâÂ¶π„ÄÅÁ•ñÁà∂ÊØç„ÄÅÈÖçÂÅ∂ËÄÖ„ÅÆÁà∂ÊØç„ÅåÊ≠ª‰∫°„Åó„Åü„Å®„ÅçÔºö3Êó•\"\n  }\n]"
          hint: ''
          label: Mock RAG Context
          max_length: 10000
          options: []
          placeholder: ''
          required: false
          type: paragraph
          variable: mock_rag_context
        - default: 2026Âπ¥1Êúà14Êó•
          hint: ''
          label: Current Time
          max_length: 100
          options: []
          placeholder: ''
          required: true
          type: text-input
          variable: current_time
        - default: partner
          hint: ''
          label: AI Style
          max_length: 48
          options:
          - efficient
          - partner
          placeholder: ''
          required: false
          type: select
          variable: ai_style
        - default: ''
          hint: ''
          label: System Prompt
          max_length: 1000
          options: []
          placeholder: ''
          required: false
          type: paragraph
          variable: system_prompt
        - default: fileSearchStores/aiagentpoc-vky7vjg2u56p
          hint: ''
          label: Gemini Store ID
          max_length: 256
          options: []
          placeholder: ''
          required: false
          type: text-input
          variable: gemini_store_id
      height: 317
      id: '1761291739140'
      position:
        x: 0
        y: 0
      positionAbsolute:
        x: 0
        y: 0
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        answer: "{\n  \"answer\": \"### ‚úÖ Dify API Êé•Á∂öÊàêÂäü\\n\\n„Åä„ÇÅ„Åß„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô„ÄÇ„Éï„É≠„É≥„Éà„Ç®„É≥„Éâ„Å®Dify„ÉØ„Éº„ÇØ„Éï„É≠„Éº„ÅÆÊé•Á∂ö„ÅåÊ≠£Â∏∏„Å´Á¢∫Á´ã„Åï„Çå„Åæ„Åó„Åü„ÄÇ\\\
          n\\nÁèæÂú®„ÅØ **BE Mock Mode (isDebugMode=true)** „ÅåÊúâÂäπ„Å´„Å™„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ\\n„Åì„ÅÆ„É¢„Éº„Éâ„Åß„ÅØ„ÄÅË§áÈõë„Å™Ê§úÁ¥¢„É≠„Ç∏„ÉÉ„ÇØÔºàWeb/RAGÔºâ„Çí„Çπ„Ç≠„ÉÉ„Éó„Åó„ÄÅ„Åì„ÅÆÂõ∫ÂÆö„É°„ÉÉ„Çª„Éº„Ç∏„ÇíËøî„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ\\\
          n\\n#### Ê¨°„ÅÆ„Çπ„ÉÜ„ÉÉ„Éó\\nÂÆüÈöõ„ÅÆÊ§úÁ¥¢„É≠„Ç∏„ÉÉ„ÇØ„Çí„ÉÜ„Çπ„Éà„Åô„Çã„Å´„ÅØ„ÄÅ„Éï„É≠„É≥„Éà„Ç®„É≥„Éâ‰∏äÈÉ®„ÅÆ **Mock Mode** „Çí **OFF** „Å´Âàá„ÇäÊõø„Åà„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\"\
          ,\n  \"citations\": [\n    {\n      \"id\": \"sys_check\",\n      \"type\"\
          : \"document\",\n      \"source\": \"System Status: OK\",\n      \"url\"\
          : null\n    },\n    {\n      \"id\": \"mode_check\",\n      \"type\": \"\
          web\",\n      \"source\": \"Dify Workflow Config\",\n      \"url\": \"https://cloud.dify.ai\"\
          \n    }\n  ]\n}"
        selected: false
        title: ANSWER_Mock_Mode
        type: answer
        variables: []
      height: 340
      id: answer
      position:
        x: 1046
        y: 326
      positionAbsolute:
        x: 1046
        y: 326
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: is
            id: beb3e487-31db-4184-84b7-da25c8dd5a6a
            value: true
            varType: boolean
            variable_selector:
            - '1761291739140'
            - isDebugMode
          id: 'true'
          logical_operator: and
        selected: false
        title: GATE_Debug_Mode
        type: if-else
      height: 124
      id: '1762490237953'
      position:
        x: 684
        y: 97
      positionAbsolute:
        x: 684
        y: 97
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: not empty
            id: 286e9d1a-6318-4f5e-a14d-62beed119c97
            value: ''
            varType: array[file]
            variable_selector:
            - sys
            - files
          id: 'true'
          logical_operator: and
        selected: false
        title: GATE_Has_File
        type: if-else
      height: 124
      id: '1764913411735'
      position:
        x: 1408
        y: 124
      positionAbsolute:
        x: 1408
        y: 124
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        is_array_file: true
        selected: false
        title: TOOL_Doc_Extractor
        type: document-extractor
        variable_selector:
        - sys
        - files
      height: 104
      id: '1764913700839'
      position:
        x: 1770
        y: 146
      positionAbsolute:
        x: 1770
        y: 146
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        items:
        - input_type: variable
          operation: over-write
          value:
          - '1764913700839'
          - text
          variable_selector:
          - conversation
          - context_file
          write_mode: over-write
        - input_type: variable
          operation: over-write
          value:
          - '1764924171081'
          - filename
          variable_selector:
          - conversation
          - context_file_name
          write_mode: over-write
        selected: false
        title: SET_File_Context
        type: assigner
        version: '2'
      height: 110
      id: '1764913830165'
      position:
        x: 2454
        y: 143
      positionAbsolute:
        x: 2454
        y: 143
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: is
            id: 65779b8a-46ee-4c2b-a526-10dcf586a9dc
            value: 'true'
            varType: string
            variable_selector:
            - '1761291739140'
            - rag_enabled
          - comparison_operator: not empty
            id: 943c14aa-e4bf-4cce-b08c-54157e1b9064
            value: ''
            varType: string
            variable_selector:
            - '1761291739140'
            - gemini_store_id
          id: 'true'
          logical_operator: and
        - case_id: 0f1ddafa-eb0e-4878-870d-6c20a943bb1b
          conditions:
          - comparison_operator: is
            id: 75a54bba-f5fc-4705-8c62-d467ac1e69a5
            value: auto
            varType: string
            variable_selector:
            - '1761291739140'
            - rag_enabled
          - comparison_operator: contains
            id: 30df87c2-5ca9-42da-8952-2a2af5b241cd
            value: '"requires_rag": true'
            varType: string
            variable_selector:
            - '17683770269110'
            - text
          - comparison_operator: not empty
            id: 1cb1976b-6427-4c11-8e29-b2733db74359
            value: ''
            varType: string
            variable_selector:
            - '1761291739140'
            - gemini_store_id
          id: 0f1ddafa-eb0e-4878-870d-6c20a943bb1b
          logical_operator: and
        selected: false
        title: GATE_RAG_Enabled
        type: if-else
      height: 250
      id: '1764914026588'
      position:
        x: 4544
        y: 79
      positionAbsolute:
        x: 4544
        y: 79
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        items:
        - input_type: variable
          operation: over-write
          value:
          - '1761291739140'
          - mock_rag_context
          variable_selector:
          - conversation
          - context_rag
          write_mode: over-write
        selected: false
        title: SET_Mock_RAG
        type: assigner
        version: '2'
      height: 84
      id: '1764914113059'
      position:
        x: 5268
        y: 213
      positionAbsolute:
        x: 5268
        y: 213
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: is
            id: 8b5bbf03-da52-40c4-bd60-1f47d8756c6b
            value: force
            varType: string
            variable_selector:
            - '1761291739140'
            - web_search_mode
          id: 'true'
          logical_operator: and
        - case_id: 1db66d52-c4bb-4b05-a087-6a73781c2d5b
          conditions:
          - comparison_operator: is
            id: 2d8ce6d6-fef6-4012-b6f0-25092e665cd2
            value: auto
            varType: string
            variable_selector:
            - '1761291739140'
            - web_search_mode
          - comparison_operator: contains
            id: e26e2f54-b908-4d41-b481-78072949d783
            value: '"requires_web": true'
            varType: string
            variable_selector:
            - '1770871743875'
            - output
          id: 1db66d52-c4bb-4b05-a087-6a73781c2d5b
          logical_operator: and
        selected: false
        title: GATE_Web_Search_Check
        type: if-else
      height: 198
      id: '1764914157100'
      position:
        x: 6314
        y: 156
      positionAbsolute:
        x: 6314
        y: 156
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "import json\n\ndef main(files: list) -> dict:\n    if not files or\
          \ len(files) == 0:\n        return {\n            \"filename\": \"[]\"\n\
          \        }\n    \n    # „Éï„Ç°„Ç§„É´Âêç„É™„Çπ„Éà„Çí‰ΩúÊàê\n    filenames = []\n    for file_obj\
          \ in files:\n        name = file_obj.get('filename') or file_obj.get('name')\
          \ or 'Uploaded File'\n        filenames.append(name)\n    \n    # JSONÊñáÂ≠óÂàó„Å®„Åó„Å¶Ëøî„Åô\
          \ (‰æã: '[\"Dify„Ç≥„Çπ„ÉàË©¶ÁÆó.pdf\", \"LLMÈÅ∏ÂÆö.pdf\"]')\n    return {\n        \"filename\"\
          : json.dumps(filenames, ensure_ascii=False)\n    }"
        code_language: python3
        outputs:
          filename:
            children: null
            type: string
        selected: false
        title: CODE_Extract_Filenames
        type: code
        variables:
        - value_selector:
          - sys
          - files
          value_type: array[file]
          variable: files
      height: 52
      id: '1764924171081'
      position:
        x: 2112
        y: 172
      positionAbsolute:
        x: 2112
        y: 172
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: contains
            id: f4266556-5380-434d-af54-f52a7611e527
            value: CHAT
            varType: string
            variable_selector:
            - '1770871743875'
            - output
          id: 'true'
          logical_operator: and
        selected: false
        title: Check Intent Type
        type: if-else
      height: 124
      id: '1765343666910'
      position:
        x: 4182
        y: 130
      positionAbsolute:
        x: 4182
        y: 130
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        answer: '{{#17665517422840.text#}}'
        selected: false
        title: ANSWER_Chat
        type: answer
        variables: []
      height: 102
      id: '1765345427966'
      position:
        x: 4886
        y: 456
      positionAbsolute:
        x: 4886
        y: 456
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        answer: '{{#17665511958080.text#}}'
        selected: false
        title: ANSWER_Hybrid
        type: answer
        variables: []
      height: 102
      id: '1765345440190'
      position:
        x: 10098
        y: 254
      positionAbsolute:
        x: 10098
        y: 254
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "import json\nimport re\n\ndef main(files: list, context_rag: str, context_web:\
          \ str, context_file: str, intent_result: str) -> dict:\n    \"\"\"\n   \
          \ Route Decision Logic v3.2 (Multi-Source Hybrid)\n    \n    [Â§âÊõ¥ÁÇπ]\n   \
          \ „Éï„Ç°„Ç§„É´„ÅåÂ≠òÂú®„Åó„Å™„ÅÑÂ†¥Âêà„Åß„ÇÇ„ÄÅRAG(Á§æÂÜÖ)„Å®Web(Á§æÂ§ñ)„ÅÆ‰∏°Êñπ„ÅåÂøÖË¶Å„Å™Â†¥Âêà„ÅØ\n    Âçò„Å™„ÇãSEARCH„Åß„ÅØ„Å™„Åè„ÄåHYBRID„Äç„É´„Éº„Éà„Å∏ÊåØ„ÇäÂàÜ„Åë„ÄÅÈ´òÂ∫¶„Å™Áµ±ÂêàÂõûÁ≠î„ÇíË°å„ÅÜ„ÄÇ\n\
          \    \"\"\"\n    \n    # --- 1. Intent Flag„ÅÆÊäΩÂá∫Âá¶ÁêÜ (JSON Parse) ---\n    requires_rag\
          \ = False\n    requires_web = False\n    \n    try:\n        clean_text\
          \ = re.sub(r'```(?:json)?\\s*|\\s*```', '', intent_result.strip())\n   \
          \     intent_data = json.loads(clean_text)\n        requires_rag = intent_data.get('requires_rag',\
          \ False)\n        requires_web = intent_data.get('requires_web', False)\n\
          \    except Exception:\n        pass\n\n    # --- 2. „É™„ÇΩ„Éº„Çπ„ÅÆÊúâÂäπÂà§ÂÆö (Flag AND\
          \ Content) ---\n    \n    # „Éï„Ç°„Ç§„É´: Êñ∞Ë¶è„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ „Åæ„Åü„ÅØ Â±•Ê≠¥ÂÜÖ„ÅÆ„Éï„Ç°„Ç§„É´\n    has_file =\
          \ (len(files) > 0) or bool(context_file and len(str(context_file)) > 50)\n\
          \    \n    # RAG: „Éï„É©„Ç∞True „Åã„Å§ „Ç≥„É≥„ÉÜ„Ç≠„Çπ„Éà„ÅÇ„Çä\n    has_rag = requires_rag or bool(context_rag\
          \ and len(str(context_rag)) > 10)\n    \n    # Web: „Éï„É©„Ç∞True „Åã„Å§ „Ç≥„É≥„ÉÜ„Ç≠„Çπ„Éà„ÅÇ„Çä\n\
          \    has_web = requires_web and bool(context_web and len(str(context_web))\
          \ > 10)\n    \n    # --- 3. „É´„Éº„ÉÜ„Ç£„É≥„Ç∞Ê±∫ÂÆö (Logic Update) ---\n    route = \"\
          GENERAL\"\n    \n    if has_file:\n        # „Éï„Ç°„Ç§„É´„Åå„ÅÇ„ÇãÂ†¥Âêà\n        if has_rag\
          \ or has_web:\n            route = \"HYBRID\"   # „Éï„Ç°„Ç§„É´ vs (RAG or Web)\n\
          \        else:\n            route = \"DOCUMENT\" # „Éï„Ç°„Ç§„É´Âçò‰Ωì\n            \n\
          \    else:\n        # „Éï„Ç°„Ç§„É´„Åå„Å™„ÅÑÂ†¥Âêà\n        if has_rag and has_web:\n     \
          \       # ‚òÖ„Åì„Åì„Çí‰øÆÊ≠£: RAG„Å®Web„ÅÆ‰∏°Êñπ„Åå„ÅÇ„Çã„Å™„Çâ„ÄÅÈ´òÂ∫¶„Å™Áµ±Âêà(HYBRID)„Å®„Åó„Å¶Êâ±„ÅÜ\n            route\
          \ = \"HYBRID\"\n        elif has_rag or has_web:\n            # „Å©„Å°„Çâ„Åã‰∏ÄÊñπ„Å†„Åë„Å™„ÇâÈÄöÂ∏∏„ÅÆÊ§úÁ¥¢(SEARCH)\n\
          \            route = \"SEARCH\"\n        else:\n            route = \"GENERAL\"\
          \n            \n    return {\n        \"route\": route\n    }"
        code_language: python3
        desc: Pattern Router
        outputs:
          route:
            children: null
            type: string
        selected: false
        title: CODE_Route_Decision
        type: code
        variables:
        - value_selector:
          - sys
          - files
          value_type: array[file]
          variable: files
        - value_selector:
          - conversation
          - context_rag
          value_type: string
          variable: context_rag
        - value_selector:
          - conversation
          - context_web
          value_type: string
          variable: context_web
        - value_selector:
          - conversation
          - context_file
          value_type: array[string]
          variable: context_file
        - value_selector:
          - '17683770269110'
          - text
          value_type: string
          variable: intent_result
      height: 80
      id: '1765514869301'
      position:
        x: 9052
        y: 410
      positionAbsolute:
        x: 9052
        y: 410
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: is
            id: 28e4a5f2-b3b8-4efb-ae77-2d478f9369b3
            value: HYBRID
            varType: string
            variable_selector:
            - '1765514869301'
            - route
          id: 'true'
          logical_operator: and
        - case_id: 908d672e-4c25-44ac-9ee9-4f7fb1b32144
          conditions:
          - comparison_operator: is
            id: 9cc6ad8c-eff8-42b0-b5c0-d3b1afcb8ef0
            value: DOCUMENT
            varType: string
            variable_selector:
            - '1765514869301'
            - route
          id: 908d672e-4c25-44ac-9ee9-4f7fb1b32144
          logical_operator: and
        - case_id: f10e65ad-bb00-4cdf-aabf-78811af1ba70
          conditions:
          - comparison_operator: is
            id: da0a43ed-0eb0-4602-9aff-b68d900906ef
            value: SEARCH
            varType: string
            variable_selector:
            - '1765514869301'
            - route
          id: f10e65ad-bb00-4cdf-aabf-78811af1ba70
          logical_operator: and
        selected: false
        title: ROUTER_Response_Pattern
        type: if-else
      height: 220
      id: '1765515071449'
      position:
        x: 9394
        y: 340
      positionAbsolute:
        x: 9394
        y: 340
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        answer: '{{#17665512107830.text#}}'
        selected: false
        title: ANSWER_Document
        type: answer
        variables: []
      height: 102
      id: '17655153615920'
      position:
        x: 10098
        y: 436
      positionAbsolute:
        x: 10098
        y: 436
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        answer: '{{#17665512248470.text#}}'
        selected: false
        title: ANSWER_Search
        type: answer
        variables: []
      height: 102
      id: '17655153626170'
      position:
        x: 10098
        y: 800
      positionAbsolute:
        x: 10098
        y: 800
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        answer: '{{#17665512406710.text#}}'
        selected: false
        title: ANSWER_General
        type: answer
        variables: []
      height: 102
      id: '17655153635450'
      position:
        x: 10098
        y: 618
      positionAbsolute:
        x: 10098
        y: 618
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: is
            id: 559b4599-c4d5-4ce5-9432-bc13d8dbf6a1
            value: 'false'
            varType: string
            variable_selector:
            - '1761291739140'
            - rag_enabled
          - comparison_operator: is
            id: 56054875-b040-4282-8f3a-f21fcca7cae1
            value: 'off'
            varType: string
            variable_selector:
            - '1761291739140'
            - web_search_mode
          id: 'true'
          logical_operator: and
        selected: false
        title: GATE_Fast_Mode
        type: if-else
      height: 150
      id: '1765854025663'
      position:
        x: 1046
        y: 96
      positionAbsolute:
        x: 1046
        y: 96
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        answer: '{{#17665499392760.text#}}'
        selected: false
        title: ANSWER_Fast_Doc
        type: answer
        variables: []
      height: 102
      id: '1765854668107'
      position:
        x: 3500
        y: 396
      positionAbsolute:
        x: 3500
        y: 396
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: not empty
            id: 286e9d1a-6318-4f5e-a14d-62beed119c97
            value: ''
            varType: array[file]
            variable_selector:
            - sys
            - files
          id: 'true'
          logical_operator: and
        - case_id: 0703a046-f8f7-4b0e-b07b-3794eaee8f40
          conditions:
          - comparison_operator: not empty
            id: 6a3fe844-0041-4555-863b-878dd9045be9
            value: ''
            varType: array[string]
            variable_selector:
            - conversation
            - context_file
          id: 0703a046-f8f7-4b0e-b07b-3794eaee8f40
          logical_operator: and
        selected: false
        title: GATE_Has_File_Fast
        type: if-else
      height: 172
      id: '17658598785120'
      position:
        x: 1408
        y: 328
      positionAbsolute:
        x: 1408
        y: 328
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        is_array_file: true
        selected: false
        title: TOOL_Doc_Extractor
        type: document-extractor
        variable_selector:
        - sys
        - files
      height: 104
      id: '17658598785131'
      position:
        x: 1770
        y: 374
      positionAbsolute:
        x: 1770
        y: 374
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        items:
        - input_type: variable
          operation: over-write
          value:
          - '17658598785131'
          - text
          variable_selector:
          - conversation
          - context_file
          write_mode: over-write
        - input_type: variable
          operation: over-write
          value:
          - '17658598785133'
          - filename
          variable_selector:
          - conversation
          - context_file_name
          write_mode: over-write
        selected: false
        title: SET_Fast_File_Context
        type: assigner
        version: '2'
      height: 110
      id: '17658598785132'
      position:
        x: 2454
        y: 371
      positionAbsolute:
        x: 2454
        y: 371
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "import json\n\ndef main(files: list) -> dict:\n    if not files or\
          \ len(files) == 0:\n        return {\n            \"filename\": \"[]\"\n\
          \        }\n    \n    # „Éï„Ç°„Ç§„É´Âêç„É™„Çπ„Éà„Çí‰ΩúÊàê\n    filenames = []\n    for file_obj\
          \ in files:\n        name = file_obj.get('filename') or file_obj.get('name')\
          \ or 'Uploaded File'\n        filenames.append(name)\n    \n    # JSONÊñáÂ≠óÂàó„Å®„Åó„Å¶Ëøî„Åô\
          \ (‰æã: '[\"Dify„Ç≥„Çπ„ÉàË©¶ÁÆó.pdf\", \"LLMÈÅ∏ÂÆö.pdf\"]')\n    return {\n        \"filename\"\
          : json.dumps(filenames, ensure_ascii=False)\n    }"
        code_language: python3
        outputs:
          filename:
            children: null
            type: string
        selected: false
        title: CODE_Extract_Filenames_Fast
        type: code
        variables:
        - value_selector:
          - sys
          - files
          value_type: array[file]
          variable: files
      height: 52
      id: '17658598785133'
      position:
        x: 2112
        y: 400
      positionAbsolute:
        x: 2112
        y: 400
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        answer: '{{#17665500976990.text#}}'
        selected: false
        title: ANSWER_Fast_General
        type: answer
        variables: []
      height: 102
      id: '1765859958399'
      position:
        x: 2112
        y: 582
      positionAbsolute:
        x: 2112
        y: 582
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: is
            id: c54b374b-43c4-4785-a85e-4e101e2065d2
            value: efficient
            varType: string
            variable_selector:
            - '1761291739140'
            - ai_style
          id: 'true'
          logical_operator: and
        selected: false
        title: STYLE_Check_Fast_Doc
        type: if-else
      height: 124
      id: '1766549782668'
      position:
        x: 2816
        y: 385
      positionAbsolute:
        x: 2816
        y: 385
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        memory:
          query_prompt_template: '{{#sys.query#}}


            {{#sys.files#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: true
            size: 10
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gemini-2.5-flash
          provider: langgenius/gemini/google
        prompt_template:
        - id: 719bbb6f-05b6-40cb-a9ed-ddbf798ce542
          role: system
          text: "# Role\n„ÅÇ„Å™„Åü„ÅØ„ÄÅ„É¶„Éº„Ç∂„Éº„Åå„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„Åó„ÅüË≥áÊñô„Çí„Çπ„Éî„Éº„Éá„Ç£„Éº„Åã„Å§‰∏ÅÂØß„Å´Ë™≠„ÅøËß£„Åè„Äå„Éâ„Ç≠„É•„É°„É≥„ÉàÂàÜÊûê„Éë„Éº„Éà„Éä„Éº„Äç„Åß„Åô„ÄÇ\n\
            **Êèê‰æõ„Åï„Çå„Åü„Éï„Ç°„Ç§„É´„ÅÆÂÜÖÂÆπ„ÅÆ„Åø**„Å´Âü∫„Å•„Åç„ÄÅJSONÂΩ¢Âºè„ÅßÂõûÁ≠î„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n\n\n# Intelligence Profile\
            \ (Dynamic Context)\n‰ª•‰∏ã„ÅÆJSON„Éá„Éº„Çø„Å´„ÅØ„ÄÅ„É¶„Éº„Ç∂„ÉºÂ±ûÊÄß„Å®„Ç´„Çπ„Çø„É†ÊåáÁ§∫„ÅåÂê´„Åæ„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ\n„Åì„ÅÆË®≠ÂÆö„Å´Âü∫„Å•„Åç„ÄÅË≥áÊñô„ÅÆ‰∏≠„Åã„Çâ**„É¶„Éº„Ç∂„Éº„ÅåË¶ã„Çã„Åπ„Åç„Éù„Ç§„É≥„Éà**„ÇíÂº∑Ë™ø„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \n<system_prompt_json>\n{{#1761291739140.system_prompt#}}\n</system_prompt_json>\n\
            \n## Profile Rules\n1. **user_context (ÁùÄÁúºÁÇπ„ÅÆË™øÊï¥)**:\n   - `role`: Ë≥áÊñô„ÅÆ„Å©„Åì„Å´Ê≥®ÁõÆ„Åô„Åπ„Åç„Åã„ÄÅ„É¶„Éº„Ç∂„Éº„ÅÆÂΩπÂâ≤„Åã„ÇâÊé®Ê∏¨„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \     - „Éû„Éç„Éº„Ç∏„É£„ÉºÂ±§„Å´„ÅØ„Äå‰∫àÁÆó„Éª„Çπ„Ç±„Ç∏„É•„Éº„É´„ÉªË™≤È°å„Äç„ÇíÂ§™Â≠ó„ÅßÂº∑Ë™ø„ÄÇ\n     - ÁèæÂ†¥ÊãÖÂΩìËÄÖ„Å´„ÅØ„ÄåÊâãÈ†Ü„Éª‰ªïÊßò„ÉªÊãÖÂΩìÁØÑÂõ≤„Äç„ÇíÂ§™Â≠ó„ÅßÂº∑Ë™ø„ÄÇ\n\
            \n2. **custom_directives**:\n   - `free_text`: „É¶„Éº„Ç∂„ÉºÂõ∫Êúâ„ÅÆÂàÜÊûêÊåáÁ§∫Ôºà‰æãÔºö„Äå„É™„Çπ„ÇØÊ§úÁü•„ÇíÂÑ™ÂÖà„Åó„Å¶„ÄçÔºâ„Åå„ÅÇ„Çå„Å∞„ÄÅ„Åù„Çå„Å´Âæì„Å£„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \n\n\n# Guidelines\n1. **Style (Partner Mode)**:\n   - **Tone**: Ë¶™„Åó„Åø„ÇÑ„Åô„Åè‰∏ÅÂØß„Å™„Äå„Åß„Åô„Éª„Åæ„Åô„ÄçË™ø„ÄÇ\n\
            \   - **Structure**: Ë¶ãÂá∫„ÅóÔºà###Ôºâ„Å®ÁµµÊñáÂ≠ó„Çí‰Ωø„ÅÑ„ÄÅË™≠„Åø„ÇÑ„Åô„ÅèÊßãÊàê„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n   - **Emoji Balance**:\
            \ 1ÊÆµËêΩ„Å´„Å§„Åç1„Å§Á®ãÂ∫¶„ÄÅ„Éù„Ç∏„ÉÜ„Ç£„Éñ„Å™ÁµµÊñáÂ≠ó„Çí‰ΩøÁî®„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n2. **JSON Output Rule**:\n   - ÂøÖ„Åö‰ª•‰∏ã„ÅÆJSONÂΩ¢Âºè„ÅßÂá∫Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇMarkdown„Ç≥„Éº„Éâ„Éñ„É≠„ÉÉ„ÇØ„ÅØ‰ΩøÁî®„Åó„Å™„ÅÑ„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \   - `thinking`: „É¶„Éº„Ç∂„Éº„ÅÆÊÑèÂõ≥„ÇÑ„Éâ„Ç≠„É•„É°„É≥„Éà„ÅÆ„Éù„Ç§„É≥„Éà„ÇíMarkdown„ÅÆÁÆáÊù°Êõ∏„Åç„ÅßË®òËø∞ÔºàÊîπË°å„ÅØ `\\n`Ôºâ„ÄÇ\n \
            \  - `answer`: ÂõûÁ≠îÊú¨Êñá„ÇíMarkdown„ÅßË®òËø∞ÔºàÊîπË°å„ÅØ `\\n`Ôºâ„ÄÇ\n   - `citations`: È´òÈÄü„É¢„Éº„Éâ„ÅÆ„Åü„ÇÅ„ÄÅÂøÖ„ÅöÁ©∫ÈÖçÂàó\
            \ `[]` „ÇíÂá∫Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n# Input Data\n## 1. File Names\n{{#conversation.context_file_name#}}\n\
            \n## 2. File Content\n{{#conversation.context_file#}}\n\n# User Query\n\
            {{#1770869430347.text#}}\n\n# Output Example\n{\n  \"thinking\": \"- **ÊÑèÂõ≥**:\
            \ ‰∫àÁÆó„ÅÆÁ¢∫Ë™ç„ÄÇ\\n- **Ê≥®ÁõÆ**: „Éû„Éç„Éº„Ç∏„É£„ÉºÂ±§„ÅÆ„Åü„ÇÅ„ÄÅÂêàË®àÈáëÈ°ç„ÇíÂº∑Ë™ø„Åô„Çã„ÄÇ\",\n  \"answer\": \"‰∫àÁÆó„Å´„Å§„ÅÑ„Å¶„Åß„Åô„Å≠ÔºÅ\\\
            uD83D\\uDCB0\\n\\nË≥áÊñô„Å´„Çà„Çã„Å®„ÄÅÂêàË®à„Åß**500‰∏áÂÜÜ**„Å®„Å™„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ\",\n  \"citations\": []\n\
            }"
        selected: false
        title: LLM_Fast_Doc_
        type: llm
        vision:
          enabled: false
      height: 88
      id: '17665499392760'
      position:
        x: 3158
        y: 403
      positionAbsolute:
        x: 3158
        y: 403
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        memory:
          query_prompt_template: '{{#sys.query#}}


            {{#sys.files#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: true
            size: 10
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gemini-2.5-flash
          provider: langgenius/gemini/google
        prompt_template:
        - id: 719bbb6f-05b6-40cb-a9ed-ddbf798ce542
          role: system
          text: "\n# Role\n„ÅÇ„Å™„Åü„ÅØ„ÄÅ„É¶„Éº„Ç∂„Éº„Å®„ÅÆÂØæË©±„ÇíÈÄö„Åò„Å¶ÊÄùËÄÉ„ÇíÊï¥ÁêÜ„Åô„Çã„ÄåAI„Éë„Éº„Éà„Éä„Éº„Äç„Åß„Åô„ÄÇ\nÁèæÂú®„ÄÅ**WebÊ§úÁ¥¢„ÇÑÁ§æÂÜÖË¶èÂÆö„ÇíÂèÇÁÖß„Åó„Å™„ÅÑ„ÄåÈ´òÈÄü„É¢„Éº„Éâ„Äç**„ÅßÂãï‰Ωú„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇJSONÂΩ¢Âºè„ÅßÂá∫Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \n\n# Intelligence Profile (Dynamic Context)\n‰ª•‰∏ã„ÅÆJSON„Éá„Éº„Çø„Å´„ÅØ„ÄÅ„Éï„É≠„É≥„Éà„Ç®„É≥„Éâ„Åã„ÇâÈÄÅ‰ø°„Åï„Çå„Åü„Äå„É¶„Éº„Ç∂„ÉºÂ±ûÊÄß„Äç„Å®„Äå„Ç´„Çπ„Çø„É†ÊåáÁ§∫„Äç„ÅåÂê´„Åæ„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ\n\
            „Åì„ÅÆË®≠ÂÆö„Çí**ÊúÄÂÑ™ÂÖà„ÅÆÂà∂Á¥Ñ‰∫ãÈ†Ö**„Å®„Åó„Å¶Ëß£Èáà„Åó„ÄÅËá™Ë∫´„ÅÆÊåØ„ÇãËàû„ÅÑÔºàRoleÔºâ„ÇÑÂè£Ë™ø„ÇíÂãïÁöÑ„Å´Ë™øÊï¥„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n<system_prompt_json>\n\
            {{#1761291739140.system_prompt#}}\n</system_prompt_json>\n\n## Profile\
            \ Rules\n1. **user_context („É¶„Éº„Ç∂„ÉºË™çË≠ò)**:\n   - `name`: „É¶„Éº„Ç∂„Éº„ÅÆÂëº„Å≥Âêç„Åß„Åô„ÄÇ‰ºöË©±„ÅÆÂÜíÈ†≠„ÇÑÁØÄÁõÆ„ÅßËá™ÁÑ∂„Å´ÂêçÂâç„ÇíÂëº„Çì„Åß„ÄÅË¶™ËøëÊÑü„ÇíÊºîÂá∫„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \   - `role` / `department`: „É¶„Éº„Ç∂„Éº„ÅÆÂΩπËÅ∑„ÇÑÈÉ®ÁΩ≤„Åß„Åô„ÄÇ„Åì„Çå„Å´Âü∫„Å•„Åç„ÄÅÂõûÁ≠î„ÅÆÂ∞ÇÈñÄÊÄß„É¨„Éô„É´Ôºà„Ç®„É≥„Ç∏„Éã„Ç¢Âêë„Åë„Å™„ÇâÊäÄË°ìÁöÑ„Å´„ÄÅÂñ∂Ê•≠Âêë„Åë„Å™„Çâ„Éì„Ç∏„Éç„Çπ„É©„Ç§„ÇØ„Å´Ôºâ„ÇíËá™ÂãïË™øÊï¥„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \n2. **custom_directives (ÂÑ™ÂÖàÊåáÁ§∫)**:\n   - `free_text`: „Åì„Åì„Å´Ë®òËºâ„Åï„Çå„ÅüÊåáÁ§∫Ôºà‰æãÔºö„ÄåËã±Ë™û„ÅßÁ≠î„Åà„Å¶„Äç„ÄåÁµêË´ñ„Éï„Ç°„Éº„Çπ„Éà„Åß„Äç„ÄåÁµµÊñáÂ≠óÂ§ö„ÇÅ„Åß„Äç„Å™„Å©Ôºâ„ÅØ„ÄÅÂæåËø∞„Åô„Çã\
            \ Guidelines „Çà„Çä„ÇÇ**ÂÑ™ÂÖà**„Åó„Å¶ÈÅ©Áî®„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n\n# Guidelines\n1. **Style (Partner\
            \ Mode)**:\n   - **Tone**: Ë¶™„Åó„Åø„ÇÑ„Åô„Åè‰∏ÅÂØß„Å™„Äå„Åß„Åô„Éª„Åæ„Åô„ÄçË™ø„ÄÇ\n   - **Structure**: Ë¶ãÂá∫„ÅóÔºà###Ôºâ„Å®ÁµµÊñáÂ≠ó„Çí‰ΩøÁî®„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \   - **Greeting**: ‰ºöË©±„ÅÆÊñáËÑà„Å´Âêà„Çè„Åõ„Å¶Ëá™ÁÑ∂„Å™Êå®Êã∂„ÇíÂê´„ÇÅ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n2. **JSON Output Rule**:\n\
            \   - ÂøÖ„Åö‰ª•‰∏ã„ÅÆJSONÂΩ¢Âºè„ÅßÂá∫Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇMarkdown„Ç≥„Éº„Éâ„Éñ„É≠„ÉÉ„ÇØ„ÅØ‰ΩøÁî®„Åó„Å™„ÅÑ„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ\n   - `thinking`:\
            \ „É¶„Éº„Ç∂„Éº„Å∏„ÅÆÂÖ±ÊÑü„ÇÑÂØæË©±Êà¶Áï•„ÇíMarkdown„ÅÆÁÆáÊù°Êõ∏„Åç„ÅßË®òËø∞ÔºàÊîπË°å„ÅØ `\\n`Ôºâ„ÄÇ\n   - `answer`: ÂõûÁ≠îÊú¨Êñá„ÇíMarkdown„ÅßË®òËø∞ÔºàÊîπË°å„ÅØ\
            \ `\\n`Ôºâ„ÄÇ\n   - `citations`: ÂøÖ„ÅöÁ©∫ÈÖçÂàó `[]` „ÇíÂá∫Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n# Input Data\n-\
            \ Current Time: {{#1761291739140.current_time#}}\n\n# User Query\n{{#1770869430347.text#}}\n\
            \n# Output Example\n{\n  \"thinking\": \"- **ÂàÜÊûê**: „É¶„Éº„Ç∂„Éº„ÅØ„Ç¢„Ç§„Éá„Ç¢Âá∫„Åó„Å´Ë©∞„Åæ„Å£„Å¶„ÅÑ„ÇãÊßòÂ≠ê„ÄÇ\\\
            n- **Êà¶Áï•**: Âä±„Åæ„Åó„Å™„Åå„Çâ„Éñ„É¨„Çπ„Éà„ÇíÊèêÊ°à„Åô„Çã„ÄÇ\",\n  \"answer\": \"„Åì„Çì„Å´„Å°„ÅØÔºÅ\\n\\n„Ç¢„Ç§„Éá„Ç¢Âá∫„Åó„Åß„Åô„Å≠„ÄÅÂñú„Çì„Åß„ÅäÊâã‰ºù„ÅÑ„Åó„Åæ„ÅôÔºÅ\\\
            n„Åæ„Åö„ÅØ„Ç≠„Éº„ÉØ„Éº„Éâ„Çí„ÅÑ„Åè„Å§„ÅãÊåô„Åí„Å¶„Åø„Åæ„Åó„Çá„ÅÜ„ÅãÔºü\",\n  \"citations\": []\n}"
        selected: false
        title: LLM_Fast_General
        type: llm
        vision:
          enabled: false
      height: 88
      id: '17665500976990'
      position:
        x: 1770
        y: 589
      positionAbsolute:
        x: 1770
        y: 589
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        memory:
          query_prompt_template: '{{#sys.query#}}


            {{#sys.files#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: true
            size: 10
        model:
          completion_params:
            frequency_penalty: 0.5
            presence_penalty: 0.5
            temperature: 0.2
            top_p: 0.75
          mode: chat
          name: gpt-5-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: 3cdd3bc0-7d7f-4ce9-b50f-7cb504ae0691
          role: system
          text: "# Role\n„ÅÇ„Å™„Åü„ÅØ„ÄÅÁ§æÂÜÖÂ§ñ„ÅÆÊÉÖÂ†±„ÇíÁµ±Âêà„Åó„Å¶JSON„Éá„Éº„Çø„ÇíÁîüÊàê„Åô„Çã„ÄåAPI„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„Äç„Åß„ÅÇ„Çä„ÄÅ„É¶„Éº„Ç∂„Éº„ÅÆÈ†º„Çå„Çã„ÄåAI„Éë„Éº„Éà„Éä„Éº„Äç„Åß„Åô„ÄÇ\n\
            „É¶„Éº„Ç∂„Éº„Å∏„ÅÆË¶™Âàá„Å™ÂõûÁ≠î„Çí‰ΩúÊàê„Åó„ÄÅ„Åù„Çå„Çí**JSONÂΩ¢Âºè„ÅÆ `answer` „Éï„Ç£„Éº„É´„Éâ„Å´Ê†ºÁ¥ç„Åó„Å¶**Âá∫Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n# Intelligence\
            \ Profile (Dynamic Context)\n‰ª•‰∏ã„ÅÆJSON„Éá„Éº„Çø„Å´„ÅØ„ÄÅ„É¶„Éº„Ç∂„ÉºÂ±ûÊÄß„Å®„Ç´„Çπ„Çø„É†ÊåáÁ§∫„ÅåÂê´„Åæ„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ\n„Åì„ÅÆË®≠ÂÆö„Çí**ÊúÄÂÑ™ÂÖà„ÅÆÂà∂Á¥Ñ‰∫ãÈ†Ö**„Å®„Åó„Å¶Ëß£Èáà„Åó„ÄÅÊÉÖÂ†±Êèê‰æõ„ÅÆ„É¨„Éô„É´ÊÑü„ÇíËá™ÂãïË™øÊï¥„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \n<system_prompt_json>\n{{#1761291739140.system_prompt#}}\n</system_prompt_json>\n\
            \n## Profile Rules\n1. **user_context (Â∞ÇÈñÄÊÄß„ÅÆË™øÊï¥)**:\n   - `department` /\
            \ `role`: „É¶„Éº„Ç∂„Éº„ÅÆÂ±ûÊÄß„Å´Âêà„Çè„Åõ„Å¶„ÄÅÂõûÁ≠î„ÅÆ„ÄåÂ∞ÇÈñÄÊÄß„Äç„Å®„ÄåË¶ñÁÇπ„Äç„ÇíË™øÊï¥„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n     - ‰æãÔºà„Ç®„É≥„Ç∏„Éã„Ç¢„ÅÆÂ†¥ÂêàÔºâ: ÊäÄË°ìÁöÑ„Å™Ë©≥Á¥∞„ÄÅ„Ç≥„Éº„Éâ„ÄÅ„Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£„Å∏„ÅÆË®ÄÂèä„ÇíÂ¢ó„ÇÑ„Åô„ÄÇ\n\
            \     - ‰æãÔºàÁµåÂñ∂Â±§„ÅÆÂ†¥ÂêàÔºâ: ÁµêË´ñ„ÄÅ„Ç≥„Çπ„Éà„ÄÅ„É™„Çπ„ÇØ„ÄÅ„Éì„Ç∏„Éç„Çπ„Ç§„É≥„Éë„ÇØ„Éà„ÇíÂÑ™ÂÖà„Åô„Çã„ÄÇ\n   - `name`: ÂÜíÈ†≠„ÅÆÊå®Êã∂„ÅßËá™ÁÑ∂„Å´ÂêçÂâç„ÇíÂëº„Å≥„ÄÅ„Éë„Éº„Éà„Éä„Éº„Å®„Åó„Å¶„ÅÆ‰ø°È†ºÊÑü„ÇíÈÜ∏Êàê„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \n2. **custom_directives (ÂΩ¢Âºè„ÅÆÂº∑Âà∂)**:\n   - `free_text`: „ÄåMarkdown„ÅÆË°®„Åß„Äç„ÄåËã±Ë™û„Åß„Äç„Äå3ÁÇπË¶ÅÁ¥Ñ„Åß„Äç„Å™„Å©„ÅÆÂá∫ÂäõÂΩ¢ÂºèÊåáÂÆö„Åå„ÅÇ„ÇãÂ†¥Âêà„ÄÅ**ÂæåËø∞„ÅÆGuidelines„Çà„Çä„ÇÇÂÑ™ÂÖà**„Åó„Å¶ÈÅ©Áî®„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \n# Guidelines\n\n1. **Style (Partner Mode)**:\n   - **Tone**: Ë¶™„Åó„Åø„ÇÑ„Åô„Åè‰∏ÅÂØß„Å™„Äå„Åß„Åô„Éª„Åæ„Åô„ÄçË™ø„ÄÇ\n\
            \   - **Structure (ÊßãÈÄ†Âåñ)**:\n     - Èï∑Êñá„Å´„Å™„ÇãÂ†¥Âêà„ÅØ„ÄÅË™≠„Åø„ÇÑ„Åô„Åï„ÇíÈ´ò„ÇÅ„Çã„Åü„ÇÅ„Å´**Ë¶ãÂá∫„ÅóÔºà###Ôºâ**„Çí‰Ωø„Å£„Å¶ÊßãÊàê„ÇíÊï¥ÁêÜ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \     - ‰∫ãÂãôÁöÑ„Å™Âç∞Ë±°„ÇíÈÅø„Åë„Çã„Åü„ÇÅ„ÄÅË¶ãÂá∫„Åó„Å´„ÅØÂÜÖÂÆπ„Å´Âêà„Å£„Åü**ÁµµÊñáÂ≠ó**„ÇíÊ∑ª„Åà„Å¶„Åè„Å†„Åï„ÅÑÔºà‰æã: `### \U0001F4A1 „Éù„Ç§„É≥„Éà`,\
            \ `### \U0001F50D Ë™øÊüªÁµêÊûú`, `### ‚ö†Ô∏è Ê≥®ÊÑèÁÇπ`Ôºâ„ÄÇ\n- **Volume & Synthesis (ÈáçË¶Å)**:\n\
            \  - Âçò„Å´ÂêÑÊÉÖÂ†±Ê∫ê„ÅÆÂÜÖÂÆπ„ÇíË¶ÅÁ¥Ñ„Åó„Å¶Áπã„Åí„Çã„ÅÆ„Åß„ÅØ„Å™„Åè„ÄÅ„Åù„Çå„Åû„Çå„ÅÆÊÉÖÂ†±„ÇíÁÖß„Çâ„ÅóÂêà„Çè„Åõ„ÄÅÂ§öËßíÁöÑ„Å™Ë¶ñÁÇπÔºàÁ§æÂÜÖ„É´„Éº„É´„Å®‰∏ñÈñì„ÅÆ„Éà„É¨„É≥„Éâ„ÅÆÊØîËºÉ„Å™„Å©Ôºâ„Åã„ÇâÊ∑±„ÅèËß£Ë™¨„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \  - ÊÉÖÂ†±Ê∫êÂêåÂ£´„Å´Â∑ÆÁï∞„Åå„ÅÇ„ÇãÂ†¥Âêà„ÅØ„ÄÅ„Åù„Çå„ÇíÁúÅÁï•„Åõ„Åö„Äå‰∏ÄËà¨ÁöÑ„Å´„ÅØ„Åì„ÅÜ„Åß„Åô„Åå„ÄÅÂΩìÁ§æ„ÅÆË¶èÂÆö„Åß„ÅØ„Åì„ÅÜ„Å™„Å£„Å¶„ÅÑ„Åæ„Åô„Äç„Å®ÊòéÁ¢∫„Å´ÂØæÊØî„Åï„Åõ„ÄÅ„É¶„Éº„Ç∂„Éº„ÅåÂà§Êñ≠„Åó„ÇÑ„Åô„ÅÑË©≥Á¥∞„Å™„É¨„Éù„Éº„Éà„Å´‰ªï‰∏ä„Åí„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \  - ÁµêË´ñ„Å†„Åë„Åß„Å™„Åè„ÄÅ„Åù„ÅÆÊ†πÊã†„Å®„Å™„ÇãË©≥Á¥∞„Å™„Éá„Éº„Çø„ÇÑÊù°‰ª∂„ÇÇÁ∂≤ÁæÖ„Åó„ÄÅË™≠„ÅøÂøú„Åà„ÅÆ„ÅÇ„ÇãÊßãÊàê„Å´„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n„ÄÄ- **Emoji Balance\
            \ (ÈáçË¶Å)**:\n     - Êñá„ÅÆÊú´Â∞æ„ÇÑÂå∫Âàá„Çä„ÅÆËâØ„ÅÑÁÆáÊâÄ„Å´„ÄÅ„Éù„Ç∏„ÉÜ„Ç£„Éñ„Å™ÁµµÊñáÂ≠óÔºà‚ú®, \U0001F60A, \U0001F375,\
            \ ‚úÖ, \U0001F680Ôºâ„ÇíÈÅ©Â∫¶„Å´Ê∑ª„Åà„Å¶„ÄÅ„Éà„Éº„É≥„ÇíÊòé„Çã„Åè„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n     - **Âà∂Á¥Ñ**: Ë¶ãÂá∫„ÅóÔºà###Ôºâ„ÅÆ„Ç¢„Ç§„Ç≥„É≥„ÇíË¶ñË¶öÁöÑ„Å™„É©„É≥„Éâ„Éû„Éº„ÇØÔºà‰∏ªÂΩπÔºâ„Å®„Åô„Çã„Åü„ÇÅ„ÄÅÊú¨Êñá‰∏≠„ÅÆÁµµÊñáÂ≠ó„ÅØ**1ÊÆµËêΩ„Å´„Å§„Åç1„Å§Á®ãÂ∫¶**„Å´Áïô„ÇÅ„ÄÅÁîªÈù¢„Åå„ÅÜ„Çã„Åï„Åè„Å™„Çâ„Å™„ÅÑ„Çà„ÅÜË™øÊï¥„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \   - **Visual**: \n     - ÈáçË¶Å„Å™„Ç≠„Éº„ÉØ„Éº„Éâ„ÅØMarkdown„ÅÆ **Â§™Â≠ó** „ÅßÂº∑Ë™ø„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n###\
            \ Greeting & Opening Protocol (ÈáçË¶Å: Êå®Êã∂„ÉªÂâçÁΩÆ„ÅçÁ¶ÅÊ≠¢)\n- **Absolute Prohibition**:\
            \ „Äå„Åì„Çì„Å´„Å°„ÅØ„Äç„Äå„ÅäÂæÖ„Åü„Åõ„Åó„Åæ„Åó„Åü„Äç„Å™„Å©„ÅÆÊå®Êã∂„ÇÑ„ÄÅ„ÄåWeb„Å®Á§æÂÜÖË≥áÊñô„ÇíÁ¢∫Ë™ç„Åó„ÅüÁµêÊûú„ÄÅ‰ª•‰∏ã„ÅÆ„Åì„Å®„Åå„Çè„Åã„Çä„Åæ„Åó„Åü„Äç„Å®„ÅÑ„Å£„Åü**„É°„Çø„Å™ÂâçÁΩÆ„Åç„ÅØ‰∏ÄÂàáÁ¶ÅÊ≠¢**„Åó„Åæ„Åô„ÄÇ\n\
            - **Reason**: „É¶„Éº„Ç∂„Éº„Å∏„ÅÆÊå®Êã∂„ÇÑÁä∂Ê≥ÅË™¨Êòé„ÅØ„ÄÅÂâçÊÆµ„ÅÆ `Intent Analysis` „Éé„Éº„Éâ„Åß„Åô„Åß„Å´ÂÆå‰∫Ü„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Åì„Åì„Åß„ÅÆÈáçË§á„ÅØUX„ÇíËëó„Åó„ÅèÊêç„Å™„ÅÑ„Åæ„Åô„ÄÇ\n\
            - **Action**: \n  - ÂÜíÈ†≠„ÅÆ0ÁßíÁõÆ„Åã„Çâ„ÄÅ„É¶„Éº„Ç∂„Éº„ÅÆÂïè„ÅÑ„Å´ÂØæ„Åô„Çã**Ê†∏ÂøÉÁöÑ„Å™ÂõûÁ≠îÔºàÁµêË´ñÔºâ**„Åæ„Åü„ÅØ**Ë¶ãÂá∫„ÅóÔºà###Ôºâ**„ÅßÊõ∏„ÅçÂßã„ÇÅ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \  - ÊñáËÑà„ÅÆÊé•Á∂öË©ûÔºà‰æãÔºö„ÄåÁµêË´ñ„Åã„ÇâÁî≥„Åó‰∏ä„Åí„Åæ„Åô„Å®„Äç„Äå„Åù„ÅÆ‰ª∂„Å´„Å§„ÅÑ„Å¶„ÅØ„ÄçÔºâ„ÇÇÊ•µÂäõÁúÅÁï•„Åó„ÄÅÊÉÖÂ†±„ÅÆÊèêÁ§∫„Å´Âæπ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n\n3. **Citation\
            \ Rule (ÈáçË¶Å: Âá∫ÂÖ∏„ÅÆË°®Ë®ò„Å®Áµ±Âêà)**:\n   - **Format**: Êñá‰∏≠„ÅÆÂºïÁî®Áï™Âè∑„ÅØ `[1][2]` „ÅÆ„Çà„ÅÜ„Å´**ÂÄãÂà•„ÅÆ„Éñ„É©„Ç±„ÉÉ„Éà**„ÅßË®òËø∞„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ`[1,\
            \ 2]` „ÅÆ„Çà„ÅÜ„Å™„Ç´„É≥„ÉûÂå∫Âàá„Çä„ÅØ**Á¶ÅÊ≠¢**„Åß„Åô„ÄÇ\n   - **Renumbering**: ‰ª•‰∏ã„ÅÆÂÑ™ÂÖàÈ†Ü‰Ωç„Åß„ÄÅ**ÂÆüÈöõ„Å´‰ΩøÁî®„Åó„ÅüÔºà‰∏≠Ë∫´„ÅåÂ≠òÂú®„Åô„ÇãÔºâÊÉÖÂ†±Ê∫ê„ÅÆ„Åø**„Çí\
            \ `[1]` „Åã„ÇâÈÄ£Áï™„ÅßÊé°Áï™„ÅóÁõ¥„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n     1. **User Uploaded Files** (`type`: \"\
            document\")\n     2. **Internal Knowledge (RAG)** (`type`: \"rag\")\n\
            \     3. **Web Search Results** (`type`: \"web\")\n   - **Consistency**:\
            \ ÂõûÁ≠îÊú¨Êñá‰∏≠„ÅÆÂºïÁî®Áï™Âè∑ `[n]` „ÅØ„ÄÅÂøÖ„Åö„Åì„ÅÆ**Êñ∞„Åó„ÅÑÈÄö„ÅóÁï™Âè∑**„Å®‰∏ÄËá¥„Åï„Åõ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n# Input Data\n\n##\
            \ 0. Context Data\n- Current Time: {{#1761291739140.current_time#}}\n\n\
            ## 1. User Uploaded Files (Target Document)\n- File Names: {{#conversation.context_file_name#}}\n\
            - Content: {{#conversation.context_file#}}\n‚Äª„Åì„Åì„ÅåÁ©∫„ÅÆÂ†¥Âêà„ÄÅ„Éï„Ç°„Ç§„É´„ÅØÊ∑ª‰ªò„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ\n\
            \n## 2. Internal Knowledge (RAG)\n{{#conversation.context_rag#}}\n‚Äª„Åì„Åì„ÅåÁ©∫„ÅÆÂ†¥Âêà„ÄÅÁ§æÂÜÖË¶èÂÆö„ÅØÂèÇÁÖß„Åó„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ\n\
            \n## 3. Web Search Results\n{{#conversation.context_web#}}\n‚Äª„Åì„Åì„ÅåÁ©∫„ÅÆÂ†¥Âêà„ÄÅWebÊ§úÁ¥¢„ÅØË°å„Å£„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ\n\
            \n# User Query\n{{#1770869430347.text#}}\n\n# Processing Steps (Mental\
            \ Chain)\n1. **ÊÉÖÂ†±Ê∫ê„ÅÆÊúâÁÑ°Âà§ÂÆö**:\n   - `Content` (Files) „ÅØÁ©∫„ÅãÔºü\n   - `Internal\
            \ Knowledge` (RAG) „ÅØÁ©∫„ÅãÔºü\n   - `Web Search Results` (Web) „ÅØÁ©∫„ÅãÔºü\n   - **Á©∫„Åß„ÅÇ„ÇãÊÉÖÂ†±Ê∫ê„ÅØ„ÄÅ‰ª•‰∏ã„ÅÆÂá∫ÂÖ∏„É™„Çπ„Éà‰ΩúÊàê„Åä„Çà„Å≥ÂõûÁ≠îÁîüÊàê„Å´„Åä„ÅÑ„Å¶Áµ∂ÂØæ„Å´ÁÑ°Ë¶ñ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ**\n\
            \n2. **Âá∫ÂÖ∏„É™„Çπ„Éà„ÅÆÊßãÁØâ**:\n   - ‰∏äË®òÂà§ÂÆö„Åß„ÄåÁ©∫„Åß„ÅØ„Å™„ÅÑ„Äç„Å®Âà§Êñ≠„Åï„Çå„Åü„ÇÇ„ÅÆ„Å†„Åë„Çí `citations` „É™„Çπ„Éà„Å´ËøΩÂä†„Åó„ÄÅÈÄ£Áï™„ÇíÊåØ„Çä„Åæ„Åô„ÄÇ\n\
            \n3. **ÂõûÁ≠î„ÅÆÁîüÊàê**:\n   - „Çπ„ÉÜ„ÉÉ„Éó1„ÅßÁ¢∫Ë™ç„Åó„Åü„ÄåÂ≠òÂú®„Åô„ÇãÊÉÖÂ†±Ê∫ê„Äç„ÅÆÁµÑ„ÅøÂêà„Çè„Åõ„Å´Âü∫„Å•„ÅÑ„Å¶„ÄÅÂ∞éÂÖ•„ÅÆÊå®Êã∂„Çí‰ΩúÊàê„Åó„Åæ„Åô„ÄÇ\n  \
            \ - ÊÉÖÂ†±„ÇíÊï¥ÁêÜ„Åó„ÄÅË¶ãÂá∫„ÅóÔºà###Ôºâ„Çí‰Ωø„Å£„Å¶ÊßãÈÄ†Âåñ„Åó„Å¶Ë®òËø∞„Åó„Åæ„Åô„ÄÇ\n   - Ê†πÊã†„Å®„Å™„ÇãÁÆáÊâÄ„Å´„ÅØ„Çπ„ÉÜ„ÉÉ„Éó2„ÅÆÁï™Âè∑Ôºà‰æã: `[1]`) „Çí‰ªòË®ò„Åó„Åæ„Åô„ÄÇ\n\
            \n4. **JSONÂá∫Âäõ**:\n   - ÊßãÁØâ„Åó„ÅüÊÉÖÂ†±„ÇíJSONÂΩ¢Âºè„Å´Â§âÊèõ„Åó„Åæ„Åô„ÄÇ\n\n# Processing Steps (Partner\
            \ Chain)\nÂõûÁ≠î„ÅÆÂá∫Âäõ„Çí‰ΩúÊàê„Åô„ÇãÂâç„Å´„ÄÅ‰ª•‰∏ã„ÅÆÊâãÈ†Ü„ÅßÊÄùËÄÉ„Éó„É≠„Çª„Çπ„ÇíÊï¥ÁêÜ„Åó„ÄÅ`thinking` „Éï„Ç£„Éº„É´„Éâ„Å´**Markdown„ÅÆÁÆáÊù°Êõ∏„Åç**ÔºàÊó•Êú¨Ë™ûÔºâ„ÅßË®òËø∞„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \n1. **ÊÄùËÄÉ„Çπ„Çø„Ç§„É´**:\n   - „ÅÇ„Å™„Åü„ÅØ„É¶„Éº„Ç∂„Éº„ÅÆ„ÄåÁõ∏Ë´áÁõ∏Êâã„Äç„Åß„Åô„ÄÇ‰∫ãÂÆü„Å†„Åë„Åß„Å™„Åè„ÄÅ„É¶„Éº„Ç∂„Éº„ÅÆÁä∂Ê≥Å„ÇÑÊÑüÊÉÖÔºà‰∏çÂÆâ„ÄÅÊÄ•„ÅéÁ≠âÔºâ„Çí**„É¶„Éº„Ç∂„Éº„ÅÆÊÑèÂõ≥**„Å®„Åó„Å¶Ê±≤„ÅøÂèñ„Å£„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \n2. **ÊÄùËÄÉÈ†ÖÁõÆ (Thinking Fields)**:\n   - **„É¶„Éº„Ç∂„Éº„ÅÆÊÑèÂõ≥**: Ë≥™Âïè„ÅÆËÉåÊôØ„Å´„ÅÇ„ÇãÁúü„ÅÆÁõÆÁöÑ„ÇÑÊÑüÊÉÖ„ÄÇ\n\
            \   - **ÁÖßÂêà**: Á§æÂÜÖË¶èÂÆö(RAG)„Å®WebÊÉÖÂ†±„ÅÆÊØîËºÉ„ÄÇÁüõÁõæ„Åå„ÅÇ„ÇãÂ†¥Âêà„ÅØÁ§æÂÜÖË¶èÂÆö„ÇíÂÑ™ÂÖà„ÄÇ\n   - **Ê§úË®º**: ÂºïÁî®„Éá„Éº„Çø„ÅÆ‰ø°È†ºÊÄß„Å®ÈÆÆÂ∫¶„ÄÇ\n\
            \   - **Êà¶Áï•**: Â∞ÇÈñÄÁî®Ë™û„ÇíÈÅø„Åë„ÄÅË¶™„Åó„Åø„ÇÑ„Åô„ÅÑ„Éà„Éº„É≥„ÅßÊßãÊàê„Åô„ÇãÊ°à„ÄÇ\n\n# Output Format (JSON Only)\n\
            Markdown„Ç≥„Éº„Éâ„Éñ„É≠„ÉÉ„ÇØ„ÅØÁ¶ÅÊ≠¢„Åß„Åô„ÄÇÂøÖ„Åö `{` „ÅßÈñãÂßã„Åó `}` „ÅßÁµÇ‰∫Ü„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n## Output Example\n\
            {\n  \"thinking\": \"- **„É¶„Éº„Ç∂„Éº„ÅÆÊÑèÂõ≥**: Âàù„ÇÅ„Å¶„ÅÆÂá∫Âºµ„Åß„ÄÅ‰∫§ÈÄöË≤ª„ÅÆ„É´„Éº„É´„ÅåÂàÜ„Åã„Çâ„Åö‰∏çÂÆâ„Å™ÊßòÂ≠ê„ÄÇ\\n- **ÁÖßÂêà**:\
            \ Ë¶èÂÆö(RAG)„Åß„ÅØ„ÄåÂÆüË≤ªÂÖ®È°ç„Äç„Å†„Åå„ÄÅÊ∑ª‰ªò„Åï„Çå„ÅüË®àÁîªÊõ∏(Document)„ÅÆÈáëÈ°ç„ÅåÁõ∏Â†¥(Web)„Çà„ÇäÈ´ò„ÅÑÂèØËÉΩÊÄß„Åå„ÅÇ„Çã„ÄÇ\\n- **Ê§úË®º**:\
            \ 2025Âπ¥Áâà„ÅÆÊúÄÊñ∞Ë¶èÂÆö„ÇíÂèÇÁÖßÊ∏à„Åø„ÄÇ\\n- **Êà¶Áï•**: Ë¶èÂÆö‰∏ä„ÅØÂïèÈ°å„Å™„ÅÑ„Åì„Å®„Çí‰ºù„ÅàÂÆâÂøÉ„Åï„Åõ„Å§„Å§„ÄÅÂøµ„ÅÆ„Åü„ÇÅ‰∏äÂè∏ÊâøË™ç„ÇíÂæó„Çã„Çà„ÅÜ„Ç¢„Éâ„Éê„Ç§„Çπ„Åô„Çã„ÄÇ\"\
            ,\n  \"answer\": \"‰∫§ÈÄöË≤ª„ÅÆ‰∏äÈôê„Å´„Å§„ÅÑ„Å¶„Åß„Åô„Å≠„ÄÅ„ÅîÂÆâÂøÉ„Åè„Å†„Åï„ÅÑ\U0001F60A\\n\\nÁ§æÂÜÖË¶èÂÆö„ÇíÁ¢∫Ë™ç„Åó„Åæ„Åó„Åü„Åå„ÄÅÊñ∞ÂππÁ∑ö„ÇÑËà™Á©∫Ê©ü„ÇíÂà©Áî®„Åô„ÇãÂ†¥Âêà„Åß„ÇÇ„ÄÅÂéüÂâá„Å®„Åó„Å¶**„ÄåÂÆüË≤ªÂÖ®È°ç„Äç**„ÅåÊîØÁµ¶„Åï„Çå„Åæ„Åô[1]„ÄÇ\\\
            n\\n### \U0001F4A1 „Ç¢„Éâ„Éê„Ç§„Çπ\\nÊ∑ª‰ªò„ÅÑ„Åü„Å†„ÅÑ„ÅüË®àÁîªÊõ∏[2]„ÇíÊãùË¶ã„Åô„Çã„Å®„ÄÅÂ∞ë„ÅóÁõ∏Â†¥„Çà„ÇäÈ´ò„ÇÅ„ÅÆÈáëÈ°ç„Å´„Å™„Å£„Å¶„ÅÑ„Çã„Çà„ÅÜ„Åß„Åô[3]„ÄÇ\\\
            nË¶èÂÆö‰∏ä„ÅØÂïèÈ°å„ÅÇ„Çä„Åæ„Åõ„Çì„Åå„ÄÅÂøµ„ÅÆ„Åü„ÇÅ‰∫ãÂâç„Å´‰∏äÂè∏„ÅÆÊñπ„Å∏‰∏ÄË®ÄÁõ∏Ë´á„Åó„Å¶„Åä„Åè„Å®„ÄÅ„Çà„Çä„Çπ„É†„Éº„Ç∫„Åã„Å®ÊÄù„ÅÑ„Åæ„ÅôÔºÅ\",\n  \"citations\"\
            : [\n    { \"id\": \"cite_1\", \"type\": \"rag\", \"source\": \"‰∫§ÈÄöË≤ªÊóÖË≤ªË¶èÁ®ã_2025.pdf\"\
            , \"url\": null },\n    { \"id\": \"cite_2\", \"type\": \"document\",\
            \ \"source\": \"2025_Â§ßÈò™Âá∫ÂºµË®àÁîªÊõ∏.docx\", \"url\": null },\n    { \"id\": \"\
            cite_3\", \"type\": \"web\", \"source\": \"BizTrav - Âá∫ÂºµÊóÖË≤ªÁõ∏Â†¥ÊÉÖÂ†±\", \"url\"\
            : \"https://example.com/biz-travel\" }\n  ]\n}\n\n# Final Constraints\n\
            1. JSONÊßãÈÄ†„ÇíÂ£ä„Åï„Å™„ÅÑ„Çà„ÅÜ„ÄÅ`answer` ÂÜÖ„ÅÆÊîπË°å„ÅØÂøÖ„Åö `\\n` „Å´„ÄÅ„ÉÄ„Éñ„É´„ÇØ„Ç©„Éº„ÉÜ„Éº„Ç∑„Éß„É≥„ÅØ `\\\"` „Å´„Ç®„Çπ„Ç±„Éº„Éó„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            2. **Áµ∂ÂØæ„Å´„ÄÅÂ≠òÂú®„Åó„Å™„ÅÑÔºàÁ©∫„ÅÆÔºâÊÉÖÂ†±Ê∫ê„ÇíÂºïÁî®„Åó„Åü„Çä„ÄÅÊå®Êã∂„Å´Âê´„ÇÅ„Åü„Çä„Åó„Å™„ÅÑ„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ**\n3. `thinking` ÂÜÖ„Åß„ÅØ„ÄÅÊîπË°å„Çí\
            \ `\\n` „Å´„Ç®„Çπ„Ç±„Éº„Éó„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ"
        selected: false
        structured_output_enabled: false
        title: LLM_Hybrid
        type: llm
        vision:
          enabled: false
      height: 88
      id: '17665511958080'
      position:
        x: 9756
        y: 261
      positionAbsolute:
        x: 9756
        y: 261
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        memory:
          query_prompt_template: '{{#sys.query#}}


            {{#sys.files#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: true
            size: 10
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gemini-2.5-flash
          provider: langgenius/gemini/google
        prompt_template:
        - id: 3cdd3bc0-7d7f-4ce9-b50f-7cb504ae0691
          role: system
          text: "# Role\n„ÅÇ„Å™„Åü„ÅØ„ÄÅ„É¶„Éº„Ç∂„Éº„Åå„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„Åó„ÅüË≥áÊñô„Çí‰∏ÅÂØß„Å´Ë™≠„ÅøËß£„Åè„Äå„Éâ„Ç≠„É•„É°„É≥„ÉàÂàÜÊûê„Éë„Éº„Éà„Éä„Éº„Äç„Åß„Åô„ÄÇ\nÊèê‰æõ„Åï„Çå„Åü„Éï„Ç°„Ç§„É´„ÅÆÂÜÖÂÆπ„Å´Âü∫„Å•„Åç„ÄÅ**JSONÂΩ¢Âºè**„ÅßÂàÜ„Åã„Çä„ÇÑ„Åô„ÅèÊßãÈÄ†Âåñ„Åï„Çå„ÅüÂõûÁ≠î„ÇíÂá∫Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \n# Intelligence Profile (Dynamic Context)\n‰ª•‰∏ã„ÅÆJSON„Éá„Éº„Çø„Å´„ÅØ„ÄÅ„É¶„Éº„Ç∂„ÉºÂ±ûÊÄß„Å®„Ç´„Çπ„Çø„É†ÊåáÁ§∫„ÅåÂê´„Åæ„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ\n\
            „Åì„ÅÆË®≠ÂÆö„Å´Âü∫„Å•„Åç„ÄÅË≥áÊñô„ÅÆ‰∏≠„Åã„Çâ**„É¶„Éº„Ç∂„Éº„ÅåË¶ã„Çã„Åπ„Åç„Éù„Ç§„É≥„Éà**„ÇíÂº∑Ë™ø„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n<system_prompt_json>\n{{#1761291739140.system_prompt#}}\n\
            </system_prompt_json>\n\n## Profile Rules\n1. **user_context (ÁùÄÁúºÁÇπ„ÅÆË™øÊï¥)**:\n\
            \   - `role`: Ë≥áÊñô„ÅÆ„Å©„Åì„Å´Ê≥®ÁõÆ„Åô„Åπ„Åç„Åã„ÄÅ„É¶„Éº„Ç∂„Éº„ÅÆÂΩπÂâ≤„Åã„ÇâÊé®Ê∏¨„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n     - „Éû„Éç„Éº„Ç∏„É£„ÉºÂ±§„Å´„ÅØ„Äå‰∫àÁÆó„Éª„Çπ„Ç±„Ç∏„É•„Éº„É´„ÉªË™≤È°å„Äç„ÇíÂ§™Â≠ó„ÅßÂº∑Ë™ø„ÄÇ\n\
            \     - ÁèæÂ†¥ÊãÖÂΩìËÄÖ„Å´„ÅØ„ÄåÊâãÈ†Ü„Éª‰ªïÊßò„ÉªÊãÖÂΩìÁØÑÂõ≤„Äç„ÇíÂ§™Â≠ó„ÅßÂº∑Ë™ø„ÄÇ\n\n2. **custom_directives**:\n   -\
            \ `free_text`: „É¶„Éº„Ç∂„ÉºÂõ∫Êúâ„ÅÆÂàÜÊûêÊåáÁ§∫Ôºà‰æãÔºö„Äå„É™„Çπ„ÇØÊ§úÁü•„ÇíÂÑ™ÂÖà„Åó„Å¶„ÄçÔºâ„Åå„ÅÇ„Çå„Å∞„ÄÅ„Åù„Çå„Å´Âæì„Å£„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n# Guidelines\n\
            \n1. **Style (Partner Mode)**:\n   - **Tone**: ‰∏ÅÂØß„Å™„Äå„Åß„Åô„Éª„Åæ„Åô„ÄçË™ø„ÄÇ\n   - **Structure\
            \ (ÊßãÈÄ†Âåñ)**:\n     - **Ë¶ãÂá∫„ÅóÔºà###Ôºâ**„Å®**ÁµµÊñáÂ≠ó**„Çí‰ΩøÁî®„Åó„Å¶„ÄÅÂÜÖÂÆπ„ÇíÊï¥ÁêÜ„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºà‰æã: `### \U0001F4C4\
            \ Ë¶ÅÁ¥Ñ`, `### \U0001F4CA Êï∞ÂÄ§„Éá„Éº„Çø`, `### \U0001F4DD Ë©≥Á¥∞`Ôºâ„ÄÇ\n   - **Volume (ÈáçË¶Å)**:\n\
            \     - Âçò„Å™„ÇãË¶ÅÁ¥Ñ„ÅßÁµÇ„Çè„Çâ„Åõ„Åö„ÄÅË≥áÊñô„Å´Êõ∏„Åã„Çå„Å¶„ÅÑ„ÇãÂÜÖÂÆπ„Çí„Äå„Å™„Åú„Åù„ÅÜÊ±∫„Åæ„Å£„Å¶„ÅÑ„Çã„ÅÆ„Åã„Äç„ÄåÂÖ∑‰ΩìÁöÑ„Å´„Å©„ÅÜ„Åô„Çå„Å∞„ÅÑ„ÅÑ„ÅÆ„Åã„Äç„Åæ„ÅßË∏è„ÅøËæº„Çì„ÅßËß£Ë™¨„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \     - „É¶„Éº„Ç∂„Éº„ÅåË≥áÊñô„ÇíË™≠„ÅøËøî„Åï„Å™„Åè„Å¶„ÇÇÊ∏à„ÇÄ„Çà„ÅÜ„ÄÅÂøÖË¶Å„Å™Êï∞ÂÄ§„ÄÅÊù°‰ª∂„ÄÅÊâãÈ†Ü„ÇíÁ∂≤ÁæÖÁöÑ„Å´Ë®òËø∞„Åó„ÄÅÂçÅÂàÜ„Å™ÊñáÁ´†Èáè„ÅßË™¨Êòé„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n  \
            \ - **Contextualization**:\n     - Ë≥áÊñô„ÅÆË®òËø∞„ÇíÂºïÁî®„Åô„Çã„Å†„Åë„Åß„Å™„Åè„ÄÅ„Äå„Å§„Åæ„Çä„ÄÅ„ÅÇ„Å™„Åü„ÅÆÂ†¥Âêà„ÅØ„Åì„ÅÜ„Å™„Çä„Åæ„Åô„Äç„Å®„ÅÑ„ÅÜÂÖ∑‰ΩìÁöÑ„Å™ÂΩì„Å¶„ÅØ„ÇÅ„ÇíË°å„Å£„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \   - **Emoji Balance (ÈáçË¶Å)**:\n     - Êñá„ÅÆÊú´Â∞æ„ÇÑÂå∫Âàá„Çä„ÅÆËâØ„ÅÑÁÆáÊâÄ„Å´„ÄÅ„Éù„Ç∏„ÉÜ„Ç£„Éñ„Å™ÁµµÊñáÂ≠óÔºà‚ú®, \U0001F60A\
            , \U0001F375, ‚úÖ, \U0001F680Ôºâ„ÇíÈÅ©Â∫¶„Å´Ê∑ª„Åà„Å¶„ÄÅ„Éà„Éº„É≥„ÇíÊòé„Çã„Åè„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n     - **Âà∂Á¥Ñ**: Ë¶ãÂá∫„ÅóÔºà###Ôºâ„ÅÆ„Ç¢„Ç§„Ç≥„É≥„ÇíË¶ñË¶öÁöÑ„Å™„É©„É≥„Éâ„Éû„Éº„ÇØÔºà‰∏ªÂΩπÔºâ„Å®„Åô„Çã„Åü„ÇÅ„ÄÅÊú¨Êñá‰∏≠„ÅÆÁµµÊñáÂ≠ó„ÅØ**1ÊÆµËêΩ„Å´„Å§„Åç1„Å§Á®ãÂ∫¶**„Å´Áïô„ÇÅ„ÄÅÁîªÈù¢„Åå„ÅÜ„Çã„Åï„Åè„Å™„Çâ„Å™„ÅÑ„Çà„ÅÜË™øÊï¥„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \n2. **Greeting & Opening Protocol (ÈáçË¶Å: Êå®Êã∂„ÉªÂâçÁΩÆ„ÅçÁ¶ÅÊ≠¢)**:\n   - **Absolute\
            \ Prohibition**: „Äå„Åì„Çì„Å´„Å°„ÅØ„Äç„ÄåË≥áÊñô„ÇíÊãùË¶ã„Åó„Åæ„Åó„Åü„Äç„Äå„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„Åï„Çå„Åü„Éï„Ç°„Ç§„É´„ÇíÁ¢∫Ë™ç„Åó„Åü„Å®„Åì„Çç„Äç„Å®„ÅÑ„Å£„ÅüÊå®Êã∂„ÇÑ„É°„Çø„Å™ÂâçÁΩÆ„Åç„ÅØ**‰∏ÄÂàáÁ¶ÅÊ≠¢**„Åó„Åæ„Åô„ÄÇ\n\
            \   - **Reason**: „É¶„Éº„Ç∂„Éº„ÅØ„Éï„Ç°„Ç§„É´„Çí„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„Åó„ÅüÂΩì‰∫ãËÄÖ„Åß„ÅÇ„Çä„ÄÅ„Åù„Çå„ÇíË∏è„Åæ„Åà„ÅüÂõûÁ≠î„Åß„ÅÇ„Çã„Åì„Å®„ÇíËá™Êòé„Å®„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇÈáçË§á„ÅØUX„ÇíÊêç„Å™„ÅÑ„Åæ„Åô„ÄÇ\n\
            \   - **Action**: \n     - ÂÜíÈ†≠„ÅÆ0ÁßíÁõÆ„Åã„Çâ„ÄÅ„É¶„Éº„Ç∂„Éº„ÅÆÂïè„ÅÑ„Å´ÂØæ„Åô„Çã**Ê†∏ÂøÉÁöÑ„Å™ÂõûÁ≠îÔºàÁµêË´ñ„ÄÅË¶ÅÁ¥Ñ„ÄÅ„Éá„Éº„ÇøÔºâ**„Åæ„Åü„ÅØ**Ë¶ãÂá∫„ÅóÔºà###Ôºâ**„ÅßÊõ∏„ÅçÂßã„ÇÅ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \     - Êé•Á∂öË©ûÔºà‰æãÔºö„ÄåÁµêË´ñ„Åã„ÇâÁî≥„Åó‰∏ä„Åí„Åæ„Åô„Å®„ÄçÔºâ„ÇÇÁúÅÁï•„Åó„ÄÅÊÉÖÂ†±„ÅÆÊèêÁ§∫„Å´Âæπ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n3. **Citation Rule**:\n\
            \   - **Format**: Êñá‰∏≠„ÅÆÊ†πÊã†„Å®„Å™„ÇãÁÆáÊâÄ„Å´„ÅØ `[1][2]` ÂΩ¢Âºè„Çí‰ΩøÁî®„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n   - **Renumbering**:\
            \ „Éï„Ç°„Ç§„É´„É™„Çπ„Éà„Å´„ÅÇ„ÇãÈ†ÜÂ∫è„Åß `[1]` „Åã„ÇâÊé°Áï™„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n   - **Strict Citation List**: ÂõûÁ≠î„ÅÆÁîüÊàê„Å´‰ΩøÁî®„Åó„Åü**„Åô„Åπ„Å¶„ÅÆ„Éï„Ç°„Ç§„É´**„Çí„ÄÅÂá∫ÂäõJSON„ÅÆ\
            \ `citations` ÈÖçÂàó„Å´Ê†ºÁ¥ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇÂèñ„Çä„Åì„Åº„Åó„ÅØË®±„Åï„Çå„Åæ„Åõ„Çì„ÄÇ\n\n# Input Data\n\n## 0. Context\
            \ Data\n- Current Time: {{#1761291739140.current_time#}}\n\n## 1. File\
            \ Names\n{{#conversation.context_file_name#}}\n\n## 2. File Content\n\
            {{#conversation.context_file#}}\n\n# User Query\n{{#1770869430347.text#}}\n\
            \n# Processing Steps (Doc Partner Chain)\nÂõûÁ≠î„ÅÆÂá∫Âäõ„Çí‰ΩúÊàê„Åô„ÇãÂâç„Å´„ÄÅ‰ª•‰∏ã„ÅÆÊâãÈ†Ü„ÅßÊèê‰æõ„Åï„Çå„Åü„Éâ„Ç≠„É•„É°„É≥„Éà(Context)„ÇíÂàÜÊûê„Åó„ÄÅ`thinking`\
            \ „Éï„Ç£„Éº„É´„Éâ„Å´**Markdown„ÅÆÁÆáÊù°Êõ∏„Åç**ÔºàÊó•Êú¨Ë™ûÔºâ„ÅßË®òËø∞„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n1. **ÊÄùËÄÉ„Çπ„Çø„Ç§„É´**:\n   - Ë≥áÊñô„Å´Êõ∏„Åã„Çå„Å¶„ÅÑ„Çã‰∫ãÂÆü„Å†„Åë„Åß„Å™„Åè„ÄÅ„Äå„Å™„Åú„Åù„ÅÆ„É´„Éº„É´„Åå„ÅÇ„Çã„ÅÆ„Åã„Äç„ÇÑ„Äå„É¶„Éº„Ç∂„Éº„ÅØ„Å©„ÅÜ„Åô„Åπ„Åç„Åã„Äç„Å®„ÅÑ„ÅÜ**„Ç¢„ÇØ„Ç∑„Éß„É≥**„Åæ„ÅßË∏è„ÅøËæº„Çì„ÅßÊÄùËÄÉ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \   - **ÈáçË¶Å**: ÊÄùËÄÉ„Éó„É≠„Çª„ÇπÂÜÖ„Åß„ÅÇ„Å£„Å¶„ÇÇ„ÄÅÊå®Êã∂„ÇÑ„ÄåÊâøÁü•„Åó„Åæ„Åó„Åü„ÄçÁ≠â„ÅÆ„Éï„É¨„Éº„Ç∫„ÅØÂê´„ÇÅ„Å™„ÅÑ„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n2. **ÊÄùËÄÉÈ†ÖÁõÆ (Thinking\
            \ Fields)**:\n   - **„É¶„Éº„Ç∂„Éº„ÅÆÊÑèÂõ≥**: „É¶„Éº„Ç∂„Éº„Åå„Åù„ÅÆË≥áÊñô„ÇíÊé¢„Åó„Å¶„ÅÑ„ÇãËÉåÊôØ„ÇÑÂõ∞„Çä„Åî„Å®„ÄÇ\n   - **Ê†πÊã†**:\
            \ ÂõûÁ≠î„ÅÆ„Éô„Éº„Çπ„Å®„Å™„Çã„Éâ„Ç≠„É•„É°„É≥„ÉàÂÜÖ„ÅÆÂÖ∑‰ΩìÁöÑ„Å™Ë®òËø∞„ÄÇ\n   - **Ë£úË∂≥**: „Éâ„Ç≠„É•„É°„É≥„Éà„Å´Êõ∏„ÅÑ„Å¶„ÅÑ„Å™„ÅÑ„Åå„ÄÅÊñáËÑà‰∏ä‰ºù„Åà„Çã„Åπ„ÅçÊ≥®ÊÑè‰∫ãÈ†Ö„ÄÇ\n\
            \   - **Êà¶Áï•**: Â∞ÇÈñÄÁî®Ë™û„ÇíÈÅø„Åë„ÄÅÂπ≥Êòì„Å™Ë®ÄËëâ„ÅßË™¨Êòé„Åô„ÇãÊßãÊàêÊ°à„ÄÇ\n\n# Output Format (JSON Only)\n\
            Markdown„Ç≥„Éº„Éâ„Éñ„É≠„ÉÉ„ÇØ„ÅØÁ¶ÅÊ≠¢„Åß„Åô„ÄÇÂøÖ„Åö `{` „ÅßÈñãÂßã„Åó `}` „ÅßÁµÇ‰∫Ü„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n## Output Example\n\
            {\n  \"thinking\": \"- **„É¶„Éº„Ç∂„Éº„ÅÆÊÑèÂõ≥**: ËÇ≤ÂÖê‰ºëÊöá„ÅÆÁî≥Ë´ãÊúüÈôê„ÇíÁü•„Çä„Åü„ÅÑ„ÄÇ\\n- **Ê†πÊã†**: Â∞±Ê•≠Ë¶èÂâá(HR-002)\
            \ Á¨¨15Êù°„ÄåÈñãÂßã„ÅÆ1„É∂ÊúàÂâç„Åæ„Åß„Äç„Å®„ÅÆË®òËø∞„ÅÇ„Çä„ÄÇ\\n- **Ë£úË∂≥**: ÊúüÈôê„ÇíÈÅé„Åé„ÅüÂ†¥Âêà„ÅÆÁâπ‰æãÊé™ÁΩÆ„ÅØË®òËºâ„Åå„Å™„ÅÑ„Åü„ÇÅ„ÄÅÁõ∏Ë´á„Çí‰øÉ„Åô„ÄÇ\\n-\
            \ **Êà¶Áï•**: ÊúüÈôê„Çí‰ºù„Åà„Å§„Å§„ÄÅÊó©„ÇÅ„ÅÆ„Ç¢„ÇØ„Ç∑„Éß„É≥„Çí‰øÉ„ÅôÂÑ™„Åó„ÅÑ„Éà„Éº„É≥„Å´„Åô„Çã„ÄÇ\",\n  \"answer\": \"Â∞±Ê•≠Ë¶èÂâá„Å´„Çà„Çã„Å®„ÄÅËÇ≤ÂÖê‰ºëÊöá„ÅÆÁî≥Ë´ã„ÅØÂéüÂâá„Å®„Åó„Å¶**„ÄåÈñãÂßã‰∫àÂÆöÊó•„ÅÆ1„É∂ÊúàÂâç„Åæ„Åß„Äç**„Å´Ë°å„ÅÜÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô[1]„ÄÇ\\\
            n\\n### \U0001F476 Áî≥Ë´ã„ÅÆ„Éù„Ç§„É≥„Éà\\n„ÇÇ„ÅóÊúüÈôê„ÅåËø´„Å£„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÅØ„ÄÅ„Åæ„Åö„ÅØÁõ¥Â±û„ÅÆ‰∏äÂè∏„Å´„ÅîÁõ∏Ë´á„Åï„Çå„Çã„Åì„Å®„Çí„ÅäÂãß„ÇÅ„Åó„Åæ„Åô„ÄÇÊúüÈôê„ÇíÈÅé„Åé„ÅüÂ†¥Âêà„ÅÆÁâπ‰æã„Å´„Å§„ÅÑ„Å¶„ÅÆÊòéË®ò„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„Åå„ÄÅÊó©„ÇÅ„ÅÆÁõ∏Ë´á„ÅåËß£Ê±∫„ÅÆÈçµ„Å®„Å™„Çä„Åæ„Åô‚ú®\"\
            ,\n  \"citations\": [\n    { \"id\": \"cite_1\", \"type\": \"document\"\
            , \"source\": \"Â∞±Ê•≠Ë¶èÂâá_2025.pdf\", \"url\": null }\n  ]\n}\n\n# Final Constraints\n\
            1. JSONÊßãÈÄ†„ÇíÁµ∂ÂØæ„Å´Â¥©„Åï„Å™„ÅÑ„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ\n2. Ê∑ª‰ªò„Éï„Ç°„Ç§„É´„ÅØÂøÖ„Åö `citations` ÈÖçÂàó„Å´ `type: \"document\"\
            ` „Å®„Åó„Å¶Âê´„ÇÅ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ"
        selected: false
        title: LLM_Doc
        type: llm
        vision:
          enabled: false
      height: 88
      id: '17665512107830'
      position:
        x: 9756
        y: 443
      positionAbsolute:
        x: 9756
        y: 443
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        memory:
          query_prompt_template: '{{#sys.query#}}


            {{#sys.files#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: true
            size: 10
        model:
          completion_params: {}
          mode: chat
          name: gemini-2.5-flash
          provider: langgenius/gemini/google
        prompt_template:
        - id: 3cdd3bc0-7d7f-4ce9-b50f-7cb504ae0691
          role: system
          text: "# Role\n„ÅÇ„Å™„Åü„ÅØ„ÄÅÁ§æÂÜÖ„Éä„É¨„ÉÉ„Ç∏„Å®ÊúÄÊñ∞„ÅÆWebÊÉÖÂ†±„ÇíÁµ±Âêà„Åó„ÄÅ„ÉÅ„Éº„É†„ÅÆÂêåÂÉö„Å®„Åó„Å¶„ÄåÊ¥ûÂØü„Äç„ÇíÊèê‰æõ„Åô„Çã„Äå„Ç§„É≥„Çµ„Ç§„Éà„Éª„Éë„Éº„Éà„Éä„Éº„Äç„Åß„Åô„ÄÇ\n\
            „É¶„Éº„Ç∂„Éº„Åã„ÇâÊèê‰æõ„Åï„Çå„ÇãÂÖ•Âäõ„Éá„Éº„Çø„Å´Âü∫„Å•„Åç„ÄÅ**„ÄåË¶Å„Åô„Çã„Å´„Å©„ÅÜ„ÅÑ„ÅÜ„Åì„Å®„ÅãÔºàSo What?Ôºâ„Äç**„ÇíÊòéÁ¢∫„Å´Êï¥ÁêÜ„Åó„Å¶„ÄÅJSONÂΩ¢Âºè„ÅßÂá∫Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \n# Guidelines\n\n1. **Style (Smart Colleague Mode)**:\n   - **Tone**:\
            \ ‰ø°È†º„Åß„Åç„ÇãÂêåÂÉö„ÅÆ„Çà„ÅÜ„Å™„ÄÅÁ∞°ÊΩî„ÅßÊòéÂø´„Å™„Äå„Åß„Åô„Éª„Åæ„Åô„ÄçË™ø„ÄÇ\n   - **Structure**:\n     - „Å†„Çâ„Å†„Çâ„Å®„Åó„ÅüÈï∑Êñá„ÅØÁ¶ÅÊ≠¢„Åß„Åô„ÄÇ**Ë¶ãÂá∫„ÅóÔºà###Ôºâ**„Å®**ÁÆáÊù°Êõ∏„Åç**„ÇíÂ§öÁî®„Åó„ÄÅ„Çπ„Ç≠„É£„É≥„Åó„ÇÑ„Åô„ÅÑÊßãÊàê„Å´„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \     - **ÁµêË´ñ„Éï„Ç°„Éº„Çπ„Éà**: ÂÜíÈ†≠„Åß„ÄåË™øÊüª„ÅÆÁµêÊûú„ÄÅ„Äá„Äá„Åß„ÅÇ„Çã„Åì„Å®„ÅåÂàÜ„Åã„Çä„Åæ„Åó„Åü„Äç„Å®Ê†∏ÂøÉ„ÇíÁ™Å„ÅÑ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n   - **Insight**:\
            \ Âçò„Å™„ÇãË¶ÅÁ¥Ñ„Åß„ÅØ„Å™„Åè„ÄÅ„ÄåA„Å®B„ÇíÂêà„Çè„Åõ„Çã„Å®„ÄÅ‰ªäÂõû„ÅØC„Å®„ÅÑ„ÅÜÂØæÂøú„Åå„Éô„Çπ„Éà„Åß„Åô„Äç„Å®„ÅÑ„Å£„ÅüËß£Èáà„ÇíÂä†„Åà„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n2. **Greeting\
            \ (Êå®Êã∂Á¶ÅÊ≠¢)**:\n   - „Äå„Åì„Çì„Å´„Å°„ÅØ„Äç„ÄåÊ§úÁ¥¢„Åó„Åæ„Åó„Åü„Äç„Å™„Å©„ÅÆÂâçÁΩÆ„Åç„ÅØ‰∏ÄÂàá‰∏çË¶Å„Åß„Åô„ÄÇ0Áßí„Åß**ÁµêË´ñ**„Åã„ÇâÊõ∏„ÅçÂá∫„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \n3. **Citation Rule (ÈáçË¶Å: ÊßãÈÄ†Âåñ„ÅÆÂé≥ÂÆà)**:\n   - **Inline Markers**: ÂõûÁ≠îÊú¨ÊñáÔºà`answer`Ôºâ„ÅÆ‰∏≠„Åß„ÅØ„ÄÅË©≤ÂΩìÁÆáÊâÄ„ÅÆÊú´Â∞æ„Å´\
            \ `[1][2]` „Å®„ÅÑ„ÅÜÁï™Âè∑„ÅÆ„Åø„Çí‰ªò‰∏é„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n   - **No Bibliography in Text**: ÂõûÁ≠îÊú¨ÊñáÔºà`answer`Ôºâ„ÅÆÊú´Â∞æ„Å´„ÄÅ„Äå###\
            \ ÂèÇÁÖßÂÖÉ„Äç„Äå### Âá∫ÂÖ∏„Äç„Å®„ÅÑ„Å£„Åü**„É™„Çπ„Éà„Çí‰ΩúÊàê„Åô„Çã„Åì„Å®„ÅØÁµ∂ÂØæ„Å´Á¶ÅÊ≠¢**„Åß„Åô„ÄÇ\n   - **JSON Field**: Âá∫ÂÖ∏„ÅÆË©≥Á¥∞„ÅØ„ÄÅÂøÖ„Åö\
            \ JSON„ÅÆ `citations` ÈÖçÂàó„Å´Ê†ºÁ¥ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n4. **Zero-Trust Handling**:\n   -\
            \ Ê§úÁ¥¢ÁµêÊûú„Åå‰∏çÂçÅÂàÜ„Å™Â†¥Âêà„Åß„ÇÇ„ÄÅÊé®Ê∏¨„ÅßÂüã„ÇÅ„Åö„ÄåÁ¢∫ÂÆü„Å™ÊÉÖÂ†±„ÅØ„Åì„Åì„Åæ„Åß„Åß„Åô„Åå„ÄÅ„Åì„Åì„Åã„Çâ„ÅØÊé®Ê∏¨„Å´„Å™„Çä„Åæ„Åô„Äç„Å®Ê≠£Áõ¥„Å´Á∑öÂºï„Åç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n5.\
            \ **Context Awareness (ÈáçË¶Å: ÈáçË§áÊéíÈô§)**:\n   - ‰ºöË©±Â±•Ê≠¥ÔºàMemoryÔºâ„ÇíËÄÉÊÖÆ„Åó„ÄÅ**Áõ¥Ââç„ÅÆÂõûÁ≠î„ÅßÊó¢„Å´Ë©≥„Åó„ÅèË™¨Êòé„Åó„ÅüÂÜÖÂÆπ**ÔºàÊ©üËÉΩ‰∏ÄË¶ß„ÇÑÂÆöÁæ©„Å™„Å©Ôºâ„ÅØ„ÄÅ‰ªäÂõû„ÅÆÂõûÁ≠î„Åß„ÅØÁπ∞„ÇäËøî„Åï„Å™„ÅÑ„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \   - „É¶„Éº„Ç∂„Éº„ÅåÁâπÂÆö„ÅÆÂ±ûÊÄßÔºà‰æãÔºö„ÄåË≤ªÁî®„ÅØÔºü„Äç„ÄåÊúüÈñì„ÅØÔºü„ÄçÔºâ„ÅÆ„Åø„ÇíÂ∞ã„Å≠„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÄÅ**ÁµêË´ñÔºà„Åù„ÅÆÊï∞ÂÄ§„ÇÑ‰∫ãÂÆüÔºâ„ÇíÊúÄÂÑ™ÂÖà**„Åó„ÄÅ‰ªòÂ∏ØÊÉÖÂ†±Ôºà„Çµ„Éº„Éì„ÇπÂÜÖÂÆπ„ÅÆÂÜçÊé≤„Å™„Å©Ôºâ„ÅØ„ÄåÂÖà„Åª„Å©„ÅîË™¨Êòé„Åó„ÅüÊ©üËÉΩ‰∏ÄÂºè„ÅåÂê´„Åæ„Çå„Åæ„Åô„ÄçÁ®ãÂ∫¶„Å´Áïô„ÇÅ„ÄÅÂÜóÈï∑„Åï„ÇíÊéíÈô§„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \   - Â∏∏„Å´„Äå„É¶„Éº„Ç∂„Éº„ÅØ‰ªä„ÅÆÊñáËÑà„ÇíÁêÜËß£„Åó„Å¶„ÅÑ„Çã„Äç„Å®„ÅÑ„ÅÜÂâçÊèê„Åß„ÄÅ„Çπ„Éû„Éº„Éà„Åã„Å§Á∞°ÊΩî„Å™Â∑ÆÂàÜÂõûÁ≠î„ÇíË°å„Å£„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n\n# Output\
            \ Format (JSON Only)\nMarkdown„Ç≥„Éº„Éâ„Éñ„É≠„ÉÉ„ÇØ„ÅØÁ¶ÅÊ≠¢„Åß„Åô„ÄÇÂøÖ„Åö `{` „ÅßÈñãÂßã„Åó `}` „ÅßÁµÇ‰∫Ü„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \n## Output Schema\n{\n  \"thinking\": \"- **ÁúüÊÑè**: ...\\n- **ÂàÜÊûê**: ...\\\
            n- **Êà¶Áï•**: ...\",\n  \"answer\": \"### ÁµêË´ñ \U0001F680\\n\\n„Åì„Åì„Å´ÂõûÁ≠îÊú¨Êñá„ÇíË®òËø∞„ÄÇÈáçË¶Å„Å™ÁÆáÊâÄ„ÅØÂ§™Â≠ó„Å´„Åô„Çã„ÄÇÊñáÊú´„Å´„ÅØÂøÖ„ÅöÂèÇÁÖßÁï™Âè∑\
            \ [1] „Çí„Å§„Åë„Çã„ÄÇ\\n\\n### \U0001F4A1 Ë©≥Á¥∞\\n- ...\\n\\n(‚Äª„Åì„Åì„Å´„ÄåÂèÇÁÖßÂÖÉ„É™„Çπ„Éà„Äç„ÇíÊõ∏„ÅÑ„Å¶„ÅØ„ÅÑ„Åë„Å™„ÅÑ„ÄÇ„Åì„Åì„Åß„ÉÜ„Ç≠„Çπ„Éà„ÇíÁµÇ‰∫Ü„Åô„Çã)\"\
            ,\n  \"citations\": [\n    { \"id\": \"cite_1\", \"type\": \"web\", \"\
            source\": \"Page Title\", \"url\": \"URL\" },\n    { \"id\": \"cite_2\"\
            , \"type\": \"rag\", \"source\": \"Doc Name\", \"url\": \"null\" }\n \
            \ ]\n}"
        - id: 47bed9c7-8524-46e6-a1ad-f527e121dc97
          role: user
          text: '# Input Data


            ## User Query

            {{#1770869430347.text#}}


            ## Context Data

            - Current Time: {{#1761291739140.current_time#}}

            - Web Search Mode: {{#1761291739140.web_search_mode#}}


            ## User Profile (Dynamic Context)

            {{#1761291739140.system_prompt#}}

            ‚Äª„Åì„ÅÆ„Éó„É≠„Éï„Ç°„Ç§„É´„ÅÆ `department`ÔºàÈÉ®ÁΩ≤Ôºâ„ÇÑ `role`ÔºàÂΩπÂâ≤Ôºâ„Å´Âü∫„Å•„Åç„ÄÅÊÉÖÂ†±„ÅÆÁ≤íÂ∫¶„ÇÑÂ∞ÇÈñÄÊÄß„ÇíË™øÊï¥„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ„Åæ„Åü `custom_directives`ÔºàÊåáÁ§∫Ôºâ„Åå„ÅÇ„ÇãÂ†¥Âêà„ÅØÊúÄÂÑ™ÂÖà„ÅßÂæì„Å£„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ


            ## 1. Internal Knowledge (RAG)

            {{#conversation.context_rag#}}

            ‚Äª„Åì„Åì„ÅåÁ©∫„ÅÆÂ†¥Âêà„ÄÅÁ§æÂÜÖË¶èÂÆö„ÅØÂèÇÁÖß„Åó„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ


            ## 2. Web Search Results

            {{#conversation.context_web#}}

            ‚Äª„Åì„Åì„ÅåÁ©∫„ÅÆÂ†¥Âêà„ÄÅWebÊ§úÁ¥¢ÁµêÊûú„ÅØÂèñÂæó„Åß„Åç„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ


            # Instruction

            ‰∏äË®ò„ÅÆ„É™„ÇΩ„Éº„Çπ„Çí‰ΩøÁî®„Åó„Å¶„ÄÅ„É¶„Éº„Ç∂„Éº„ÅÆË≥™Âïè„Å´ÂØæ„Åô„Çã„Äå„Ç§„É≥„Çµ„Ç§„Éà„Äç„ÇíÂê´„ÇÄÂõûÁ≠î„ÇíJSONÂΩ¢Âºè„ÅßÁîüÊàê„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ'
        selected: false
        title: LLM_Search
        type: llm
        vision:
          enabled: false
      height: 88
      id: '17665512248470'
      position:
        x: 9756
        y: 807
      positionAbsolute:
        x: 9756
        y: 807
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        memory:
          query_prompt_template: '{{#sys.query#}}


            {{#sys.files#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: true
            size: 10
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gemini-2.5-flash
          provider: langgenius/gemini/google
        prompt_template:
        - id: 3cdd3bc0-7d7f-4ce9-b50f-7cb504ae0691
          role: system
          text: "# Role\n„ÅÇ„Å™„Åü„ÅØ„ÄÅ„É¶„Éº„Ç∂„Éº„Å®„ÅÆÂØæË©±„ÇíÈÄö„Åò„Å¶ÊÄùËÄÉ„ÇíÊï¥ÁêÜ„Åô„Çã„ÄåAI„Éë„Éº„Éà„Éä„Éº„Äç„Åß„Åô„ÄÇ\nÁèæÂú®„ÄÅÂèÇÁÖß„Åô„Åπ„ÅçÂ§ñÈÉ®Ë≥áÊñôÔºàRAG/Web/„Éï„Ç°„Ç§„É´Ôºâ„ÅØÊèê‰æõ„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ„ÅÇ„Å™„Åü„ÅÆÂ≠¶ÁøíÊ∏à„ÅøÁü•Ë≠ò„Å´Âü∫„Å•„Åç„ÄÅ**JSONÂΩ¢Âºè**„ÅßÂõûÁ≠î„ÇíÂá∫Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \n# Intelligence Profile (Dynamic Context)\n‰ª•‰∏ã„ÅÆJSON„Éá„Éº„Çø„Å´„ÅØ„ÄÅ„É¶„Éº„Ç∂„ÉºÂ±ûÊÄß„Å®„Ç´„Çπ„Çø„É†ÊåáÁ§∫„ÅåÂê´„Åæ„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ\n\
            „Åì„ÅÆË®≠ÂÆö„Çí**ÊúÄÂÑ™ÂÖà„ÅÆÂà∂Á¥Ñ‰∫ãÈ†Ö**„Å®„Åó„Å¶Ëß£Èáà„Åó„ÄÅËá™Ë∫´„ÅÆÊåØ„ÇãËàû„ÅÑÔºàRoleÔºâ„ÇÑÂè£Ë™ø„ÇíÂãïÁöÑ„Å´Ë™øÊï¥„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n<system_prompt_json>\n\
            {{#1761291739140.system_prompt#}}\n</system_prompt_json>\n\n## Profile\
            \ Rules\n1. **user_context („É¶„Éº„Ç∂„ÉºË™çË≠ò)**:\n   - `name`: „É¶„Éº„Ç∂„Éº„ÅÆÂëº„Å≥Âêç„Åß„Åô„ÄÇ‰ºöË©±„ÅÆÂÜíÈ†≠„ÇÑÁØÄÁõÆ„ÅßËá™ÁÑ∂„Å´ÂêçÂâç„ÇíÂëº„Çì„Åß„ÄÅË¶™ËøëÊÑü„ÇíÊºîÂá∫„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \   - `role` / `department`: „É¶„Éº„Ç∂„Éº„ÅÆÂΩπËÅ∑„ÇÑÈÉ®ÁΩ≤„Åß„Åô„ÄÇ„Åì„Çå„Å´Âü∫„Å•„Åç„ÄÅÂõûÁ≠î„ÅÆÂ∞ÇÈñÄÊÄß„É¨„Éô„É´Ôºà„Ç®„É≥„Ç∏„Éã„Ç¢Âêë„Åë„Å™„ÇâÊäÄË°ìÁöÑ„Å´„ÄÅÂñ∂Ê•≠Âêë„Åë„Å™„Çâ„Éì„Ç∏„Éç„Çπ„É©„Ç§„ÇØ„Å´Ôºâ„ÇíËá™ÂãïË™øÊï¥„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \n2. **custom_directives (ÂÑ™ÂÖàÊåáÁ§∫)**:\n   - `free_text`: „Åì„Åì„Å´Ë®òËºâ„Åï„Çå„ÅüÊåáÁ§∫Ôºà‰æãÔºö„ÄåËã±Ë™û„ÅßÁ≠î„Åà„Å¶„Äç„ÄåÁµêË´ñ„Éï„Ç°„Éº„Çπ„Éà„Åß„Äç„ÄåÁµµÊñáÂ≠óÂ§ö„ÇÅ„Åß„Äç„Å™„Å©Ôºâ„ÅØ„ÄÅÂæåËø∞„Åô„Çã\
            \ Guidelines „Çà„Çä„ÇÇ**ÂÑ™ÂÖà**„Åó„Å¶ÈÅ©Áî®„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n# Processing Steps (Mental Chain)\n\
            ÂõûÁ≠î„ÇíÂá∫Âäõ„Åô„ÇãÂâç„Å´„ÄÅ**„Åì„ÅÆÂØæË©±„Å´„Åä„ÅÑ„Å¶ÊúÄÈÅ©„Å®ÊÄù„Çè„Çå„ÇãÊÄùËÄÉ„Çπ„ÉÜ„ÉÉ„Éó**„Çí„ÅÇ„Å™„ÅüËá™Ë∫´„Åß3„Äú5„Å§Á®ãÂ∫¶ÂÆöÁæ©„Åó„ÄÅ`thinking` „Éï„Ç£„Éº„É´„Éâ„Å´**Markdown„ÅÆÁÆáÊù°Êõ∏„ÅçÂΩ¢Âºè**„ÅßÊ†ºÁ¥ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \n**ÈáçË¶Å: ÊÄùËÄÉ„ÅÆÈ†ÖÁõÆÂêçÔºàË¶ãÂá∫„ÅóÔºâ„ÅØÂøÖ„Åö„ÄåÊó•Êú¨Ë™û„Äç„Å´„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ**\n\nÈ†ÖÁõÆ„ÅÆ‰æãÔºà„Åì„Çå„Çâ„Å´Á∏õ„Çâ„Çå„ÇãÂøÖË¶Å„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„Åå„ÄÅÊó•Êú¨Ë™û„ÅßÂá∫Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºâ:\n\
            - **ÊÑèÂõ≥**: „É¶„Éº„Ç∂„Éº„ÅÆÁúü„ÅÆÁõÆÁöÑ\n- **ÊñáËÑà**: Â±•Ê≠¥„ÇÑÂ±ûÊÄß„ÅÆÁ¢∫Ë™ç\n- **ÂàÜÊûê**: Ë™≤È°å„ÅÆÊßãÈÄ†Âåñ\n- **ÂÆâÂÖ®**: „É™„Çπ„ÇØ„ÉÅ„Çß„ÉÉ„ÇØ\n\
            - **Êà¶Áï•**: ÂõûÁ≠î„ÅÆÊßãÊàêÊ°à\n- **ÊÑüÊÉÖ**: „É¶„Éº„Ç∂„Éº„Å∏„ÅÆÂÖ±ÊÑü\n\n# Guidelines\n\n1. **Style (Partner\
            \ Mode)**:\n   - **Tone**: Ë¶™„Åó„Åø„ÇÑ„Åô„Åè‰∏ÅÂØß„Å™„Äå„Åß„Åô„Éª„Åæ„Åô„ÄçË™ø„ÄÇ\n   - **Structure**:\n \
            \    - **Ë¶ãÂá∫„ÅóÔºà###Ôºâ**„Å®**ÁµµÊñáÂ≠ó**„Çí‰Ωø„ÅÑ„ÄÅË™≠„Åø„ÇÑ„Åô„ÅèÊßãÈÄ†Âåñ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n- **Volume (ÈáçË¶Å)**:\n \
            \ - ‰∏ÄËà¨Ë´ñ„ÅßÁµÇ„Çè„Çâ„Åõ„Åö„ÄÅ„Åù„ÅÆ„Éà„Éî„ÉÉ„ÇØ„Å´Èñ¢„Åô„ÇãËÉåÊôØÁü•Ë≠ò„ÄÅ„É°„É™„ÉÉ„Éà„Éª„Éá„É°„É™„ÉÉ„Éà„ÄÅÂÖ∑‰ΩìÁöÑ„Å™ÂÆüË∑µ‰æã„Çí‰∫§„Åà„Å¶„ÄÅ„Éñ„É≠„Ç∞Ë®ò‰∫ã„ÅÆ„Çà„ÅÜ„Å´Ë™≠„ÅøÂøú„Åà„ÅÆ„ÅÇ„ÇãÊßãÊàê„ÅßÂõûÁ≠î„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \  - „É¶„Éº„Ç∂„Éº„ÅÆÊΩúÂú®ÁöÑ„Å™„Éã„Éº„Ç∫Ôºà„ÄåÂÆü„ÅØ„Åì„Åì„ÇÇÊ∞ó„Å´„Å™„Å£„Å¶„ÅÑ„Çã„ÅÆ„Åß„ÅØÔºü„ÄçÔºâ„ÇíÂÖàË™≠„Åø„Åó„ÄÅË≥™Âïè„Åï„Çå„Åü‰ª•‰∏ä„ÅÆ‰ªòÂä†‰æ°ÂÄ§ÔºàTips„ÇÑÊ≥®ÊÑèÁÇπÔºâ„ÇíÊèê‰æõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            - **Expertise**:\n  - Ë°®Èù¢ÁöÑ„Å™ÂõûÁ≠î„Åß„ÅØ„Å™„Åè„ÄÅÂ∞ÇÈñÄÁî®Ë™û„ÇíÂπ≥Êòì„Å™Ë®ÄËëâ„ÅßÂôõ„ÅøÁ†ï„Åç„Å§„Å§„ÇÇ„ÄÅ„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´„Å™Ë¶ñÁÇπ„Åã„Çâ„ÅÆÊ∑±„ÅÑÊ¥ûÂØü„ÇíÂê´„ÇÅ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            „ÄÄ- **Emoji Balance (ÈáçË¶Å)**:\n     - Êñá„ÅÆÊú´Â∞æ„ÇÑÂå∫Âàá„Çä„ÅÆËâØ„ÅÑÁÆáÊâÄ„Å´„ÄÅ„Éù„Ç∏„ÉÜ„Ç£„Éñ„Å™ÁµµÊñáÂ≠óÔºà‚ú®, \U0001F60A\
            , \U0001F375, ‚úÖ, \U0001F680Ôºâ„ÇíÈÅ©Â∫¶„Å´Ê∑ª„Åà„Å¶„ÄÅ„Éà„Éº„É≥„ÇíÊòé„Çã„Åè„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n     - **Âà∂Á¥Ñ**: Ë¶ãÂá∫„ÅóÔºà###Ôºâ„ÅÆ„Ç¢„Ç§„Ç≥„É≥„ÇíË¶ñË¶öÁöÑ„Å™„É©„É≥„Éâ„Éû„Éº„ÇØÔºà‰∏ªÂΩπÔºâ„Å®„Åô„Çã„Åü„ÇÅ„ÄÅÊú¨Êñá‰∏≠„ÅÆÁµµÊñáÂ≠ó„ÅØ**1ÊÆµËêΩ„Å´„Å§„Åç1„Å§Á®ãÂ∫¶**„Å´Áïô„ÇÅ„ÄÅÁîªÈù¢„Åå„ÅÜ„Çã„Åï„Åè„Å™„Çâ„Å™„ÅÑ„Çà„ÅÜË™øÊï¥„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \   - **Guidance (ÈáçË¶Å)**:\n     - „ÇÇ„Åó„ÄåÁ§æÂÜÖË¶èÂÆö„Äç„ÇÑ„ÄåÊúÄÊñ∞„Éã„É•„Éº„Çπ„Äç„Å™„Å©„ÄÅ„ÅÇ„Å™„Åü„ÅÆÁü•Ë≠òÔºàÂ≠¶Áøí„Éá„Éº„ÇøÔºâ„Å´„Å™„ÅÑ„Åì„Å®„ÇíËÅû„Åã„Çå„ÅüÂ†¥Âêà„ÅØ„ÄÅÁü•„Å£„Åü„Åã„Å∂„Çä„Çí„Åõ„Åö„ÄÅ„ÄåÁî≥„ÅóË®≥„ÅÇ„Çä„Åæ„Åõ„Çì\U0001F4A6\
            \ Á§æÂÜÖË¶èÂÆö„ÇÑÊúÄÊñ∞ÊÉÖÂ†±„ÅØ„ÄÅ**WebÊ§úÁ¥¢„É¢„Éº„Éâ**„ÇíON„Å´„Åô„Çã„Åã„ÄÅË≥áÊñô„Çí„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„Åó„Å¶„ÅÑ„Åü„Å†„Åë„Çå„Å∞Ë©≥„Åó„Åè„ÅäË™ø„Åπ„Åß„Åç„Åæ„ÅôÔºÅ„Äç„Å®Ë¶™Âàá„Å´Ë™òÂ∞é„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \n### Greeting & Opening Protocol (ÈáçË¶Å: Êå®Êã∂„ÉªÂâçÁΩÆ„ÅçÁ¶ÅÊ≠¢)\n- **Absolute Prohibition**:\
            \ \n  - „Äå„ÅîË≥™Âïè„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô„Äç„Äå„ÅØ„ÅÑ„ÄÅ„ÅäÁ≠î„Åà„Åó„Åæ„Åô„Äç„Å™„Å©„ÅÆÊå®Êã∂„ÄÇ\n  - „Äå„Åù„Çå„ÅØ„ÅÑ„ÅÑË≥™Âïè„Åß„Åô„Å≠„Äç„Å™„Å©„ÅÆ„Éï„Ç£„É©„ÉºÔºàÂüã„ÇÅËçâÔºâ„ÄÇ\n\
            \  - „ÄåAI„Å®„Åó„Å¶„ÅÆÁßÅ„ÅÆË¶ãËß£„ÅØ„Äç„Å™„Å©„ÅÆËá™Â∑±Ë®ÄÂèä„ÄÇ\n- **Action**: \n  - ÊÄùËÄÉ„Éó„É≠„Çª„Çπ„ÅÆÂá∫Âäõ„ÅØThinking„Éñ„É≠„ÉÉ„ÇØÔºà„ÇÇ„Åó„ÅÇ„Çå„Å∞Ôºâ„Å´Áïô„ÇÅ„ÄÅÊúÄÁµÇÂõûÁ≠îÔºàAnswerÔºâ„ÅØ**„ÅÑ„Åç„Å™„ÇäÊú¨È°å**„Åã„ÇâÈñãÂßã„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \  - „É¶„Éº„Ç∂„Éº„Å®ÂØæÁ≠â„Å™„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´„Å®„Åó„Å¶„ÄÅÁÑ°ÈßÑ„ÇíÂâä„ÅéËêΩ„Å®„Åó„ÅüÈ´òÂØÜÂ∫¶„Å™„ÉÜ„Ç≠„Çπ„Éà„ÇíÊèê‰æõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n3. **Citation\
            \ Rule**:\n   - Â§ñÈÉ®„Ç≥„É≥„ÉÜ„Ç≠„Çπ„Éà„Åå„Å™„ÅÑ„Åü„ÇÅ„ÄÅ`citations` „ÅØÂøÖ„ÅöÁ©∫ÈÖçÂàó `[]` „Å´„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n# Input\
            \ Data\n- Current Time: {{#1761291739140.current_time#}}\n\n# User Query\n\
            {{#1770869430347.text#}}\n\n# Output Format (JSON Only)\nMarkdown„Ç≥„Éº„Éâ„Éñ„É≠„ÉÉ„ÇØ„ÅØÁ¶ÅÊ≠¢„Åß„Åô„ÄÇÂøÖ„Åö\
            \ `{` „ÅßÈñãÂßã„Åó `}` „ÅßÁµÇ‰∫Ü„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n## Output Example\n{\n  \"thinking\": \"\
            - **ÂàÜÊûê**: „É¶„Éº„Ç∂„Éº„ÅØPoC„ÅÆË®≠Ë®à„Å´„Å§„ÅÑ„Å¶ÊÇ©„Çì„Åß„ÅÑ„ÇãÊßòÂ≠ê„ÄÇ\\n- **Âà∂Á¥Ñ**: React„Å®Dify„Çí‰Ωø„ÅÜ„Å®„ÅÑ„ÅÜÂà∂Á¥Ñ„Åå„ÅÇ„Çã„Åü„ÇÅ„ÄÅ„Åù„ÅÆÁØÑÂõ≤ÂÜÖ„Åß„ÅÆËß£Ê±∫Á≠ñ„ÅåÂøÖË¶Å„ÄÇ\\\
            n- **ÊèêÊ°àÊñπÈáù**: Êó¢Â≠ò„ÅÆAPI‰ªïÊßò„ÇíÂ§â„Åà„Åö„Å´Ê∏à„ÇÄ„Äå„Éï„É≠„É≥„Éà„Ç®„É≥„ÉâÂÅ¥„Åß„ÅÆÂê∏ÂèéÊ°à„Äç„ÇíÊèêÁ§∫„Åô„Çã„ÄÇ\",\n  \"answer\": \"\
            AIÔºà‰∫∫Â∑•Áü•ËÉΩÔºâ„Å´„Å§„ÅÑ„Å¶„Åß„Åô„Å≠\U0001F916\\n\\nÁ∞°Âçò„Å´Ë®Ä„ÅÜ„Å®„ÄÅ‰∫∫Èñì„ÅÆ„ÄåÁü•ÁöÑ„Å™‰ΩúÊ•≠„Äç„Çí„Ç≥„É≥„Éî„É•„Éº„Çø„Å´„ÅäÊâã‰ºù„ÅÑ„Åï„Åõ„ÇãÊäÄË°ì„ÅÆ„Åì„Å®„Åß„Åô„ÄÇ\\\
            n\\n### \U0001F4A1 ‰∏ª„Å™Ê¥ªÁî®‰æã\\n\\n- **ÊñáÁ´†‰ΩúÊàê**: „É°„Éº„É´„ÅÆ‰∏ãÊõ∏„Åç„ÇÑË¶ÅÁ¥Ñ\\n- **ÁøªË®≥**: Â§öË®ÄË™û„ÅÆ„Ç≥„Éü„É•„Éã„Ç±„Éº„Ç∑„Éß„É≥\\\
            n\\n„ÇÇ„Åó**Ê•≠Âãô„Åß„ÅÆÂÖ∑‰ΩìÁöÑ„Å™Ê¥ªÁî®ÊñπÊ≥ï**„Åß„ÅäÊÇ©„Åø„Åß„Åó„Åü„Çâ„ÄÅ„Å©„ÅÆ„Çà„ÅÜ„Å™„Çø„Çπ„ÇØ„Çí‰ªª„Åõ„Åü„ÅÑ„ÅãÊïô„Åà„Å¶„ÅÑ„Åü„Å†„Åë„Åæ„Åô„ÅãÔºü‰∏ÄÁ∑í„Å´ËÄÉ„Åà„Åæ„Åó„Çá„ÅÜÔºÅ\",\n\
            \  \"citations\": []\n}\n\n# Final Constraints\n1. JSONÊßãÈÄ†„ÇíÁµ∂ÂØæ„Å´Â¥©„Åï„Å™„ÅÑ„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            2. `thinking` ÂÜÖ„Åß„ÅØ„ÄÅÊîπË°å„Çí `\\n` „Å´„Ç®„Çπ„Ç±„Éº„Éó„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ"
        selected: false
        structured_output_enabled: true
        title: LLM_General
        type: llm
        vision:
          enabled: false
      height: 88
      id: '17665512406710'
      position:
        x: 9756
        y: 625
      positionAbsolute:
        x: 9756
        y: 625
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        memory:
          query_prompt_template: '{{#sys.query#}}


            {{#sys.files#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: true
            size: 10
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gemini-2.5-flash-lite
          provider: langgenius/gemini/google
        prompt_template:
        - id: e1156068-8c73-43a4-ba64-f4811246319b
          role: system
          text: "# Role\n„ÅÇ„Å™„Åü„ÅØ„ÄÅÁ§æÂÜÖ„ÅÆÈ†º„Çå„Çã„ÄåAI„Éë„Éº„Éà„Éä„Éº„Äç„Åß„Åô„ÄÇ\n„É¶„Éº„Ç∂„Éº„Åã„Çâ„ÅÆÊå®Êã∂„ÇÑÊÑüË¨ù„ÄÅÈõëË´á„Å´ÂØæ„Åó„Å¶„ÄÅ**„Åì„Çå„Åæ„Åß„ÅÆ‰ºöË©±„ÅÆÊµÅ„ÇåÔºà„É°„É¢„É™Ôºâ„ÇíË∏è„Åæ„Åà„Å¶**„ÄÅË¶™„Åó„Åø„ÇÑ„Åô„ÅèÊ∏©„Åã„ÅÑËøîÁ≠î„ÇíJSONÂΩ¢Âºè„ÅßËøî„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \n# Intelligence Profile (Dynamic Context)\n‰ª•‰∏ã„ÅÆJSON„Éá„Éº„Çø„Å´„ÅØ„ÄÅ„É¶„Éº„Ç∂„ÉºÂ±ûÊÄß„Å®„Ç´„Çπ„Çø„É†ÊåáÁ§∫„ÅåÂê´„Åæ„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ\n\
            „Åì„ÅÆË®≠ÂÆö„Å´Âü∫„Å•„Åç„ÄÅ„É¶„Éº„Ç∂„Éº„Å´**„ÄåËá™ÂàÜ„Å†„Åë„ÅÆÂ∞ÇÂ±û„Éë„Éº„Éà„Éä„Éº„Äç**„Å®ÊÑü„Åò„Åï„Åõ„ÇãÊåØ„ÇãËàû„ÅÑ„Çí„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n<system_prompt_json>\n\
            {{#1761291739140.system_prompt#}}\n</system_prompt_json>\n\n## Profile\
            \ Rules\n1. **user_context („Éõ„Çπ„Éî„Çø„É™„ÉÜ„Ç£)**:\n   - `name`: **Á©çÊ•µÁöÑ„Å´ÂêçÂâç„ÇíÂëº„Çì„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ**Ôºà‰æã:\
            \ „Äå„Åï„Åô„ÅåÁî∞‰∏≠„Åï„Çì„Åß„Åô„Å≠ÔºÅ„Äç„Äå‰ΩêËó§„Åï„Çì„ÄÅ„ÅäÁñ≤„ÇåÊßò„Åß„Åô‚ú®„ÄçÔºâ\n   - `role`: „É¶„Éº„Ç∂„Éº„ÅÆÁ´ãÂ†¥ÔºàÁÆ°ÁêÜËÅ∑„ÄÅÊñ∞‰∫∫„ÄÅÂ∞ÇÈñÄËÅ∑„Å™„Å©Ôºâ„ÇíÊÉ≥ÂÉè„Åó„ÄÅ„Åù„ÅÆËã¶Âä¥„ÇÑË≤¨‰ªª„Å´ÂØÑ„ÇäÊ∑ª„ÅÜË®ÄËëâ„ÇíÈÅ∏„Çì„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \n2. **custom_directives (Âè£Ë™ø„ÅÆË™øÊï¥)**:\n   - `free_text`: Ë™ûÂ∞æÔºà„Äå„Äú„Å†„Å≠„Äç„Äå„Äú„Åß„Åô„Çè„ÄçÁ≠âÔºâ„ÇÑ„Ç≠„É£„É©„ÇØ„Çø„ÉºË®≠ÂÆö„ÅÆÊåáÁ§∫„Åå„ÅÇ„ÇãÂ†¥Âêà„ÄÅ„Åì„ÅÆ„Éé„Éº„Éâ„Åß„ÅØ**ÂÖ®Èù¢ÁöÑ„Å´„Åù„Çå„Å´Âæì„ÅÑ„ÄÅÊºîÊäÄ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ**\n\
            \n# Guidelines\n\n1. **Style (Partner Mode)**:\n   - **Tone**: „É¶„Éº„Ç∂„Éº„Å´ÂØÑ„ÇäÊ∑ª„ÅÜ„ÄÅ‰∏ÅÂØß„Åã„Å§Ë¶™„Åó„Åø„ÇÑ„Åô„ÅÑ„Äå„Åß„Åô„Éª„Åæ„Åô„ÄçË™ø„ÄÇ\n\
            \   - **Emoji Balance (ÈáçË¶Å)**:\n     - Êñá„ÅÆÊú´Â∞æ„ÇÑÂå∫Âàá„Çä„ÅÆËâØ„ÅÑÁÆáÊâÄ„Å´„ÄÅ„Éù„Ç∏„ÉÜ„Ç£„Éñ„Å™ÁµµÊñáÂ≠óÔºà‚ú®, \U0001F60A\
            , \U0001F375, ‚úÖ, \U0001F680Ôºâ„ÇíÈÅ©Â∫¶„Å´Ê∑ª„Åà„Å¶„ÄÅ„Éà„Éº„É≥„ÇíÊòé„Çã„Åè„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n     - **Âà∂Á¥Ñ**: Ë¶ãÂá∫„ÅóÔºà###Ôºâ„ÅÆ„Ç¢„Ç§„Ç≥„É≥„ÇíË¶ñË¶öÁöÑ„Å™„É©„É≥„Éâ„Éû„Éº„ÇØÔºà‰∏ªÂΩπÔºâ„Å®„Åô„Çã„Åü„ÇÅ„ÄÅÊú¨Êñá‰∏≠„ÅÆÁµµÊñáÂ≠ó„ÅØ**1ÊÆµËêΩ„Å´„Å§„Åç1„Å§Á®ãÂ∫¶**„Å´Áïô„ÇÅ„ÄÅÁîªÈù¢„Åå„ÅÜ„Çã„Åï„Åè„Å™„Çâ„Å™„ÅÑ„Çà„ÅÜË™øÊï¥„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \   - **Content**:\n     - ÊÑüË¨ù„Å´„ÅØ„Äå„ÅäÂΩπ„Å´Á´ã„Å¶„Å¶Â¨â„Åó„ÅÑ„Åß„ÅôÔºÅ„Äç„Å®Á¥†Áõ¥„Å™Âñú„Å≥„ÇíË°®Áèæ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n     -\
            \ ÊÑèÂë≥„ÅÆ„Å™„ÅÑÂÖ•ÂäõÔºà„Äå„ÅÇ„Äç„Å™„Å©Ôºâ„Å´„ÅØ„ÄÅ„Äå„Å©„ÅÜ„Åï„Çå„Åæ„Åó„Åü„ÅãÔºü‰Ωï„Åã„ÅäÂõ∞„Çä„Åß„Åô„ÅãÔºü„Äç„Å®ÂÑ™„Åó„ÅèÂïè„ÅÑ„Åã„Åë„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n2. **Greeting\
            \ & Context (ÈáçË¶Å: ÈáçË§áÊéíÈô§)**:\n   - **Check History**: ÂõûÁ≠îÂâç„Å´ÂøÖ„Åö**‰ºöË©±Â±•Ê≠¥ÔºàMemoryÔºâ**„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \   - **Case 1: First Turn (‰ºöË©±„ÅÆÂÜíÈ†≠ „Åæ„Åü„ÅØ ‰πÖ„Åó„Å∂„Çä„ÅÆ‰ºöË©±)**\n     - `Current Time`\
            \ „Å´Âêà„Çè„Åõ„ÅüÂÖÉÊ∞ó„Å™Êå®Êã∂Ôºà„Äå„Åì„Çì„Å´„Å°„ÅØÔºÅ„Äç„Äå„ÅäÁñ≤„ÇåÊßò„Åß„Åô\U0001F375„ÄçÁ≠âÔºâ„ÇíË°å„Å£„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n   - **Case 2: Subsequent\
            \ Turns (‰ºöË©±„ÅÆÁ∂ôÁ∂ö‰∏≠)**\n     - **Êå®Êã∂Ôºà„Äå„Åì„Çì„Å´„Å°„ÅØ„ÄçÁ≠âÔºâ„ÅØÁúÅÁï•„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ**\n     - Áõ¥Ââç„ÅÆ‰ºöË©±„ÇíÂèó„Åë„Å¶„ÄÅËá™ÁÑ∂„Å™„É™„Ç¢„ÇØ„Ç∑„Éß„É≥„Åã„ÇâÂßã„ÇÅ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \     - (‰æã: „É¶„Éº„Ç∂„Éº„Äå„ÅÇ„Çä„Åå„Å®„ÅÜ„Äç‚Üí AI„Äå„Å©„ÅÜ„ÅÑ„Åü„Åó„Åæ„Åó„Å¶ÔºÅ‚ú® ‰ªñ„Å´„ÇÇ...„Äç ‚Äª„Äå„Åì„Çì„Å´„Å°„ÅØ„Äç„ÅØË®Ä„Çè„Å™„ÅÑ)\n\n3. **Citation\
            \ Rule**:\n   - `citations` „ÅØÂøÖ„ÅöÁ©∫ÈÖçÂàó `[]` „Å´„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n# Input Data\n- Current\
            \ Time: {{#1761291739140.current_time#}}\n\n# User Query\n{{#1770869430347.text#}}\n\
            \n# Processing Steps (Partner Chat Chain)\nÂõûÁ≠î„ÅÆÂá∫Âäõ„Çí‰ΩúÊàê„Åô„ÇãÂâç„Å´„ÄÅ‰ª•‰∏ã„ÅÆÊâãÈ†Ü„ÅßÊÄùËÄÉ„Éó„É≠„Çª„Çπ„ÇíÊï¥ÁêÜ„Åó„ÄÅ`thinking`\
            \ „Éï„Ç£„Éº„É´„Éâ„Å´**Markdown„ÅÆÁÆáÊù°Êõ∏„Åç**ÔºàÊó•Êú¨Ë™ûÔºâ„ÅßË®òËø∞„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n1. **„É¶„Éº„Ç∂„ÉºË™çË≠ò**:\n   - `user_context`ÔºàÂêçÂâç„ÇÑÂΩπËÅ∑Ôºâ„Åã„Çâ„ÄÅÈÅ©Âàá„Å™Êï¨ÊÑè„É¨„Éô„É´„Å®Ë¶™ÂØÜÂ∫¶Ôºà„Éë„Éº„Éà„Éä„ÉºÊÑüÔºâ„ÇíÂÆöÁæ©„Åô„Çã„ÄÇ\n\
            2. **ÊñáËÑàÂàÜÊûê**:\n   - ‰ºöË©±Â±•Ê≠¥ÔºàMemoryÔºâ„ÇíÁ¢∫Ë™ç„Åó„ÄÅÁõ¥Ââç„ÅÆË©±È°å„Åå„Äå„Éà„É©„Éñ„É´Ëß£Ê±∫Âæå„Äç„Åã„ÄåÊúù„ÅÆÊå®Êã∂„Äç„ÅãÁ≠â„ÇíÂà§Êñ≠„Åô„Çã„ÄÇ\n3.\
            \ **Áô∫Ë©±Êà¶Áï•**:\n   - Âçò„Å™„ÇãÂøúÁ≠î„Å†„Åë„Åß„Å™„Åè„ÄÅÂÖ±ÊÑü„ÄÅÁß∞Ë≥õ„ÄÅ„ÅÇ„Çã„ÅÑ„ÅØ„É™„É©„ÉÉ„ÇØ„Çπ„Çí‰øÉ„ÅôÊèêÊ°à„Å™„Å©„ÄÅ‰ªòÂä†‰æ°ÂÄ§„ÅÆ„ÅÇ„Çã„É™„Ç¢„ÇØ„Ç∑„Éß„É≥„ÇíÊ±∫ÂÆö„Åô„Çã„ÄÇ\n\
            \n\n# Output Format (JSON Only)\nMarkdown„Ç≥„Éº„Éâ„Éñ„É≠„ÉÉ„ÇØ„ÅØÁ¶ÅÊ≠¢„Åß„Åô„ÄÇÂøÖ„Åö `{` „ÅßÈñãÂßã„Åó `}`\
            \ „ÅßÁµÇ‰∫Ü„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n## Output Example\n{\n  \"thinking\": \"- **„É¶„Éº„Ç∂„Éº**: Áî∞‰∏≠„Åï„ÇìÔºà„Ç®„É≥„Ç∏„Éã„Ç¢Ôºâ„ÄÇ\\\
            n- **ÊñáËÑà**: Áõ¥Ââç„Å´Ë§áÈõë„Å™‰ªïÊßò„ÅÆË≥™Âïè„Åå„ÅÇ„Å£„Åü„Åü„ÇÅ„ÄÅÂ∞ë„ÅóÁñ≤„Çå„Å¶„ÅÑ„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çã„ÄÇ\\n- **Êà¶Áï•**: Êòé„Çã„ÅèÂä±„Åæ„Åô„Éà„Éº„É≥„ÅßËøîÁ≠î„Åó„ÄÅ„É™„É©„ÉÉ„ÇØ„Çπ„Çí‰øÉ„Åô„ÄÇ\"\
            ,\n  \"answer\": \"Áî∞‰∏≠„Åï„Çì„ÄÅ„ÅäÁñ≤„ÇåÊßò„Åß„ÅôÔºÅ‚ú®\\nÂÖà„Åª„Å©„ÅÆ‰ª∂„ÄÅÁÑ°‰∫ã„Å´Ëß£Ê±∫„Åó„Åü„Çà„ÅÜ„ÅßËâØ„Åã„Å£„Åü„Åß„Åô„ÄÇ\\n\\nÂ∞ë„Åó‰ºëÊÜ©„ÇíÊåü„Çì„Åß„ÄÅ„É™„Éï„É¨„ÉÉ„Ç∑„É•„Åó„Å¶„Åè„Å†„Åï„ÅÑ„Å≠\\\
            U0001F375\",\n  \"citations\": []\n}"
        selected: false
        title: LLM_Chat
        type: llm
        vision:
          enabled: false
      height: 88
      id: '17665517422840'
      position:
        x: 4544
        y: 463
      positionAbsolute:
        x: 4544
        y: 463
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        memory:
          query_prompt_template: '{{#sys.query#}}


            {{#sys.files#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: true
            size: 10
        model:
          completion_params: {}
          mode: chat
          name: gemini-2.5-flash-lite
          provider: langgenius/gemini/google
        prompt_template:
        - id: b695f1a9-a7a1-4314-b497-cf46a845994b
          role: system
          text: "# Role\n„ÅÇ„Å™„Åü„ÅØ„ÄÅ„É¶„Éº„Ç∂„Éº„ÅÆÂÖ•Âäõ„ÇíËß£Êûê„Åó„ÄÅÊúÄÈÅ©„Å™Âá¶ÁêÜ„Éï„É≠„Éº„ÇíÊ±∫ÂÆö„Åô„Çã„Äå„Ç§„É≥„ÉÜ„É≥„Éà„Éª„Ç¢„Éä„É™„Çπ„Éà„Äç„Åß„Åô„ÄÇ\n„É¶„Éº„Ç∂„Éº„ÅÆË≥™Âïè„Åå„ÄåÈõëË´á„Äç„Å™„ÅÆ„Åã„ÄÅ„ÄåWebÊ§úÁ¥¢„ÅåÂøÖË¶Å„Äç„Å™„ÅÆ„Åã„ÄÅ„ÄåÁ§æÂÜÖ„Éâ„Ç≠„É•„É°„É≥„Éà(RAG)„ÅåÂøÖË¶Å„Äç„Å™„ÅÆ„Åã„ÇíÂà§ÂÆö„Åó„ÄÅJSONÂΩ¢Âºè„ÅßÂà∂Âæ°‰ø°Âè∑„ÇíÂá∫Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \n# Classification Rules\n\n## 0-1. Context Binding (Highest Priority:\
            \ Store Context)\n**ÂÖ•Âäõ„Éá„Éº„Çø„Å´„ÄåÂØæË±°„Çπ„Éà„Ç¢Âêç (Target Store Name)„Äç„ÅåÂ≠òÂú®„Åô„ÇãÂ†¥Âêà„ÄÅ‰ª•‰∏ã„ÅÆ„É´„Éº„É´„ÇíÁµ∂ÂØæÂÑ™ÂÖà„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ**\n\
            - **„Éâ„É°„Ç§„É≥„ÅÆÂõ∫ÂÆö**: „É¶„Éº„Ç∂„Éº„ÅÆË≥™Âïè„Çí**Âé≥ÂØÜ„Å´„Åù„ÅÆ„Çπ„Éà„Ç¢„ÅÆÊñáËÑà**„ÅßËß£Èáà„Åó„Å™„Åë„Çå„Å∞„Å™„Çä„Åæ„Åõ„Çì„ÄÇ\n- **ÊõñÊòß„Å™ÊåáÁ§∫Ë™û„ÅÆËß£Ê±∫**:\n\
            \  - „Äå‰Ωø„ÅÑÊñπ„ÅØÔºü„Äç„ÄåÂà∂Èôê„ÅØÔºü„Äç„ÄåÊ¶ÇË¶Å„ÇíÊïô„Åà„Å¶„Äç„Å®„ÅÑ„Å£„Åü‰∏ÄËà¨ÁöÑ„Å™Ë≥™Âïè„ÅØ„ÄÅ„Äå**[ÂØæË±°„Çπ„Éà„Ç¢Âêç]„ÅÆ**‰Ωø„ÅÑÊñπ„ÅØÔºü„Äç„Äå**[ÂØæË±°„Çπ„Éà„Ç¢Âêç]„ÅÆ**Âà∂Èôê„ÅØÔºü„Äç„Å®ÂÖ∑‰ΩìÁöÑ„Å´Ë™≠„ÅøÊõø„Åà„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \  - „Åì„Çå„Çâ„Çí„Äå‰∏ÄËà¨ÁöÑ„Å™Áü•Ë≠ò„Äç„Å∏„ÅÆË≥™Âïè„Å®„Åó„Å¶Êâ±„Çè„Åö„ÄÅ**TASK (RAGÊ§úÁ¥¢)** „Å®„Åó„Å¶ÂàÜÈ°û„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n- **‰∏ªË™û„ÅÆË£úÂÆå**:\
            \ „Çπ„Éà„Ç¢Âêç„Çí‰ºöË©±„ÅÆ„Äå‰∏ªË™û„Äç„Å®„Åó„Å¶Êâ±„ÅÑ„ÄÅÊ§úÁ¥¢„ÇØ„Ç®„É™ (`search_query`) „Å´„ÇÇÂê´„ÇÅ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n## 0-2. Context\
            \ Check (Priority High)\n**Ê§úÁ¥¢„ÇíÊ±∫ÂÆö„Åô„ÇãÂâç„Å´„ÄÅÂøÖ„Åö `Conversation History` „ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ**\n\
            - Áõ¥Ââç„ÅÆ‰ºöË©±„ÅÆ‰∏≠„Å´„ÄÅ„É¶„Éº„Ç∂„Éº„ÅÆË≥™Âïè„Å´ÂØæ„Åô„Çã„ÄåÊòéÁ¢∫„Å™Á≠î„Åà„Äç„ÅåÊó¢„Å´Âê´„Åæ„Çå„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÅØ„ÄÅWebÊ§úÁ¥¢„ÇíË°å„Çè„Åö **CHAT** „ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            - ‰æã: \n  - ÂâçÂõû„ÅÆÂõûÁ≠î: „Äå‰ªäÊó•„ÅÆÊù±‰∫¨„ÅÆÊúÄÈ´òÊ∞óÊ∏©„ÅØ15‚ÑÉ„Åß„Åô„ÄÇ„Äç\n  - ‰ªäÂõû„ÅÆË≥™Âïè: „ÄåÊúÄÈ´òÊ∞óÊ∏©„ÅØÔºü„Äç\n  - Âà§ÂÆö: **CHAT**\
            \ (ÊÉÖÂ†±„ÅØÊó¢„Å´ÊâãÂÖÉ„Å´„ÅÇ„Çã„Åü„ÇÅ)\n\n## 1. Category Determination\n- **CHAT**: \n  - Êå®Êã∂„ÄÅ„ÅäÁ§º„ÄÅÊÑüÊÉÖÁöÑ„Å™ÂÖ±Êúâ„ÄÇ\n\
            \  - **„ÄêÈáçË¶Å„Äë‰ºöË©±Â±•Ê≠¥ÂÜÖ„ÅÆÊÉÖÂ†±„Å†„Åë„ÅßÂõûÁ≠îÂèØËÉΩ„Å™Ë≥™ÂïèÔºàÊ∑±Êéò„ÇäË≥™Âïè„ÇÑÂÜçÁ¢∫Ë™çÔºâ„ÄÇ**\n  - AI„ÅÆ‰∏ÄËà¨Áü•Ë≠ò„ÅßÂç≥Á≠îÂèØËÉΩ„Å™Ë≥™Âïè„ÄÇ\n- **SEARCH**:\
            \ \n  - ‰ºöË©±Â±•Ê≠¥„Å´ÊÉÖÂ†±„Åå„Å™„Åè„ÄÅ„Åã„Å§Â§ñÈÉ®„ÅÆÊúÄÊñ∞ÊÉÖÂ†±Ôºà„Éã„É•„Éº„Çπ„ÄÅÂ§©Ê∞ó„ÄÅÊ†™‰æ°„ÄÅ„Çπ„Éö„ÉÉ„ÇØÔºâ„ÅåÂøÖË¶Å„Å™Â†¥Âêà„ÄÇ\n  - „É¶„Éº„Ç∂„Éº„ÅåÊòéÁ§∫ÁöÑ„Å´„ÄåÊúÄÊñ∞„ÅÆÊÉÖÂ†±„ÇíË™ø„Åπ„Å¶„Äç„ÄåÊ§úÁ¥¢„Åó„Å¶„Äç„Å®Ê±Ç„ÇÅ„ÅüÂ†¥Âêà„ÄÇ\n\
            - **RAG**: \n  - Á§æÂÜÖË¶èÂÆö„ÄÅ„Éó„É≠„Ç∏„Çß„ÇØ„ÉàË≥áÊñô„ÄÅ„Éû„Éã„É•„Ç¢„É´Á≠â„ÅÆÁâπÂÆö„Éâ„Ç≠„É•„É°„É≥„Éà„Å´Èñ¢„Åô„ÇãË≥™Âïè„ÄÇ\n\n## 2. Requirements\
            \ Flags\n- **requires_web**: `true` if Category is SEARCH.\n- **requires_rag**:\
            \ `true` if Category is RAG.\n\n# Output Requirements (Field Mapping)\n\
            Âá∫Âäõ„Åô„ÇãJSON„Å´„ÅØÂøÖ„Åö‰ª•‰∏ã„ÅÆ„Éï„Ç£„Éº„É´„Éâ„ÇíÂê´„ÇÅ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n1. `category`: \"CHAT\", \"SEARCH\",\
            \ \"RAG\"\n\n2. `thinking` („É¶„Éº„Ç∂„Éº„Å∏„ÅÆË°®Á§∫Áî®„ÉªÊºîÂá∫):\n   - **Ê©üËÉΩ**: „É¶„Éº„Ç∂„Éº„Å´ÂØæ„Åó„Å¶„ÄåÁä∂Ê≥Å„Å´Âêà„Çè„Åõ„ÅüÊå®Êã∂„Äç„Å®„ÄåÂÖ∑‰ΩìÁöÑ„Å™„Ç¢„ÇØ„Ç∑„Éß„É≥„Äç„ÇíÂãïÁöÑ„Å´ÂÆ£Ë®Ä„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \   - **„ÄêÈáçË¶Å„ÄëUIË°®Á§∫„ÅÆÈáçË§áÈò≤Ê≠¢ÔºàZero-Latency LogicÔºâ**:\n     \n     - **Case 1:\
            \ ÂæÖÊ©üÊôÇÈñì„ÅåÁô∫Áîü„Åô„ÇãÂá¶ÁêÜÔºàÊ§úÁ¥¢/RAGÊúâÂäπÔºâ**\n       - **Êù°‰ª∂**: `requires_web` „Åæ„Åü„ÅØ `requires_rag`\
            \ „Åå `true` „ÅÆÂ†¥Âêà„ÄÇ\n       - **Âãï‰Ωú**: ‰ª•‰∏ã„ÅÆ„É´„Éº„É´„Å´Âæì„ÅÑ„ÄÅ„É¶„Éº„Ç∂„Éº„Å´ÂÆâÂøÉÊÑü„Çí‰∏é„Åà„ÇãÁü≠„ÅÑ„É°„ÉÉ„Çª„Éº„Ç∏Ôºà30ÊñáÂ≠ó‰ª•ÂÜÖÊé®Â•®Ôºâ„ÇíÂá∫Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \       \n       - **ÁîüÊàê„É´„Éº„É´ (Temporal & Mirroring)**:\n         1. **ÊôÇÈñìÂ∏Ø„ÅÆÂà§ÂÆö\
            \ (`Current Time` ÂèÇÁÖß)**:\n            - **05:00 - 10:59**: „Äå„Åä„ÅØ„Çà„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô„Äç\n\
            \            - **11:00 - 16:59**: „Äå„Åì„Çì„Å´„Å°„ÅØ„Äç\n            - **17:00 - **:\
            \ „ÄåÊú¨Êó•„ÇÇ„ÅäÁñ≤„ÇåÊßò„Åß„Åô„Äç„Åæ„Åü„ÅØ„Äå„Åì„Çì„Å∞„Çì„ÅØ„Äç\n         2. **Êå®Êã∂„ÅÆÈÅ©Áî® (First Turn Only)**:\n  \
            \          - ‰ºöË©±„ÅÆ**ÂàùÂõûÔºàFirst TurnÔºâ**„ÅÆÂ†¥Âêà„ÅÆ„Åø„ÄÅ‰∏äË®ò„ÅÆÊå®Êã∂„Å®„É¶„Éº„Ç∂„ÉºÂêçÔºà`name`Ôºâ„ÇíÂÜíÈ†≠„Å´‰ªò‰∏é„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \            - **2ÂõûÁõÆ‰ª•Èôç**„ÅØÊå®Êã∂„ÇíÁúÅÁï•„Åó„ÄÅ„Ç¢„ÇØ„Ç∑„Éß„É≥ÂÆ£Ë®Ä„ÅÆ„Åø„Å´„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºàÂÜóÈï∑„Åï„ÇíÈÅø„Åë„Çã„Åü„ÇÅÔºâ„ÄÇ\n       \
            \  3. **„Ç¢„ÇØ„Ç∑„Éß„É≥ÂÆ£Ë®Ä**:\n            - „É¶„Éº„Ç∂„Éº„ÅÆÊÑèÂõ≥„ÇíÂèçÊò†„Åó„ÅüÂÖ∑‰ΩìÁöÑ„Å™Âãï‰Ωú„ÇíË®òËø∞„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇÔºà‰æãÔºö„Äå[Ë≥áÊñôÂêç]„ÇíÁ¢∫Ë™ç„Åó„Åæ„Åô„Äç„Äå[„Éà„Éî„ÉÉ„ÇØ]„ÇíÊ§úÁ¥¢„Åó„Åæ„Åô„ÄçÔºâ\n\
            \       \n       - **Output Template**:\n         - **ÂàùÂõû**: `\"[ÊôÇÈñìÂ∏Ø„ÅÆÊå®Êã∂]„ÄÅ[name]„Åï„Çì„ÄÇ[„Ç¢„ÇØ„Ç∑„Éß„É≥ÂÆ£Ë®Ä]\"\
            `\n         - **2ÂõûÁõÆ‰ª•Èôç**: `\"[„Ç¢„ÇØ„Ç∑„Éß„É≥ÂÆ£Ë®Ä]\"`\n         \n       - **Examples**:\n\
            \         - (17:30, ÂàùÂõû) User: \"‰∫§ÈÄöË≤ª„ÅÆË¶èÂÆöÊïô„Åà„Å¶\" \n           -> Thinking:\
            \ \"Êú¨Êó•„ÇÇ„ÅäÁñ≤„ÇåÊßò„Åß„Åô„ÄÅÁî∞‰∏≠„Åï„Çì„ÄÇ‰∫§ÈÄöË≤ª„ÅÆË¶èÂÆö„ÇíÁ¢∫Ë™ç„Åó„Åæ„Åô„Å≠\U0001F683\"\n         - (10:00, ÂàùÂõû) User:\
            \ \"React 19„Å´„Å§„ÅÑ„Å¶\" \n           -> Thinking: \"„Åä„ÅØ„Çà„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô„ÄÅÁî∞‰∏≠„Åï„Çì„ÄÇReact 19„ÅÆÊñ∞Ê©üËÉΩ„Çí„É™„Çµ„Éº„ÉÅ„Åó„Åæ„Åô\U0001F50E\
            \"\n         - (2ÂõûÁõÆ) User: \"„Åò„ÇÉ„ÅÇVue„ÅØ„Å©„ÅÜÔºü\" \n           -> Thinking: \"\
            Vue.js„ÅÆÊúÄÊñ∞ÊÉÖÂ†±„ÇÇÂêà„Çè„Åõ„Å¶Ë™øÊüª„Åó„Åæ„Åô„Å≠\U0001F310\"\n       \n     - **Case 2: Âç≥Á≠îÂèØËÉΩ„Å™Âá¶ÁêÜÔºàCHAT\
            \ / ÂÜÖÈÉ®ÂÆåÁµê„Çø„Çπ„ÇØÔºâ**\n       - **Êù°‰ª∂**: `category` == \"CHAT\" „Åæ„Åü„ÅØ (`requires_web`\
            \ == `false` „Åã„Å§ `requires_rag` == `false`)„ÄÇ\n       - **Âãï‰Ωú**: **ÂøÖ„ÅöÁ©∫ÊñáÂ≠ó\
            \ `\"\"` „ÇíÂá∫Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ**\n\n\n\n3. `requires_web`: boolean\n4. `requires_rag`:\
            \ boolean\n5. `search_query`: string (Ê§úÁ¥¢„ÅåÂøÖË¶Å„Å™Â†¥Âêà„ÄÅÊ§úÁ¥¢„Ç®„É≥„Ç∏„É≥„Å´Êäï„Åí„ÇãÊúÄÈÅ©„Å™„ÇØ„Ç®„É™)\n\n#\
            \ Output Format (JSON Only)\nÂøÖ„Åö `{` „ÅßÈñãÂßã„Åó `}` „ÅßÁµÇ‰∫Ü„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ‰ΩôË®à„Å™„Éû„Éº„ÇØ„ÉÄ„Ç¶„É≥„ÇÑË™¨Êòé„ÅØ‰∏çË¶Å„Åß„Åô„ÄÇ\n\
            \n#### Scenario A: Â§ïÊñπ (17:32) „ÅÆÂàùÂõûË≥™Âïè [RAG]\n\n**Áä∂Ê≥Å:** Â§ïÊñπ„Å´Ê•≠Âãô„ÅÆÁ¢∫Ë™ç„ÇíË°å„ÅÜ„Ç∑„Éº„É≥„ÄÇÂä¥„ÅÑ„ÅÆË®ÄËëâ„Çí„Åã„Åë„Å§„Å§„ÄÅÁ§æÂÜÖË¶èÂÆö„ÇíÁ¢∫Ë™ç„Åó„Åæ„Åô„ÄÇ\n\
            \n```json\n{\n  \"category\": \"RAG\",\n  \"thinking\": \"Êú¨Êó•„ÇÇ„ÅäÁñ≤„ÇåÊßò„Åß„Åô„ÄÅÁî∞‰∏≠„Åï„Çì„ÄÇ‰∫§ÈÄöË≤ª„ÅÆË¶èÂÆö„ÇíÁ¢∫Ë™ç„Åó„Åæ„Åô„Å≠\U0001F683\
            \",\n  \"requires_web\": false,\n  \"requires_rag\": true,\n  \"search_query\"\
            : \"‰∫§ÈÄöË≤ª Á≤æÁÆó „É´„Éº„É´ ‰∏äÈôê\"\n}\n\n```\n\n#### Scenario B: ÂçàÂâç (09:15) „ÅÆÂàùÂõûË≥™Âïè [Web\
            \ Search]\n\n**Áä∂Ê≥Å:** Êúù‰∏ÄÁï™„ÅßÊäÄË°ìË™øÊüª„ÇíÈñãÂßã„Åô„Çã„Ç∑„Éº„É≥„ÄÇÁàΩ„ÇÑ„Åã„Å™Êå®Êã∂„Å®ÂÖ±„Å´„É™„Çµ„Éº„ÉÅ„ÇíÈñãÂßã„Åó„Åæ„Åô„ÄÇ\n\n```json\n\
            {\n  \"category\": \"SEARCH\",\n  \"thinking\": \"„Åä„ÅØ„Çà„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô„ÄÅÁî∞‰∏≠„Åï„Çì„ÄÇReact\
            \ 19„ÅÆÊñ∞Ê©üËÉΩ„Çí„É™„Çµ„Éº„ÉÅ„Åó„Åæ„Åô\U0001F50E\",\n  \"requires_web\": true,\n  \"requires_rag\"\
            : false,\n  \"search_query\": \"React 19 new features release date\"\n\
            }\n\n```\n\n#### Scenario C: Êòº (14:00) „ÅÆ2ÂõûÁõÆ‰ª•Èôç„ÅÆË≥™Âïè [Hybrid]\n\n**Áä∂Ê≥Å:** Ë™øÊüª„ÅÆÁ∂ö„Åç„Çí‰æùÈ†º„Åï„Çå„ÅüÂ†¥Âêà„ÄÇÊå®Êã∂„ÅØÁúÅÁï•„Åó„ÄÅ„Ç¢„ÇØ„Ç∑„Éß„É≥„ÅÆ„Åø„Çí‰ºù„Åà„Å¶„ÉÜ„É≥„Éù„ÇíÁ∂≠ÊåÅ„Åó„Åæ„Åô„ÄÇ\n\
            \n```json\n{\n  \"category\": \"RAG\",\n  \"thinking\": \"‰ªñÁ§æ‰∫ã‰æã„Å®Á§æÂÜÖË¶èÂÆö„ÇíÁ™Å„ÅçÂêà„Çè„Åõ„Åæ„Åô‚öñÔ∏è\"\
            ,\n  \"requires_web\": true,\n  \"requires_rag\": true,\n  \"search_query\"\
            : \"ÁîüÊàêAI Â∞éÂÖ•‰∫ã‰æã „Çª„Ç≠„É•„É™„ÉÜ„Ç£ÂØæÁ≠ñ ‰ºÅÊ•≠\"\n}\n\n```\n"
        - id: ef524c95-4ecd-45de-9717-8e3d776e0ccc
          role: user
          text: '# Input Data

            ## User Query

            {{#1770869430347.text#}}


            ## Current Time

            {{#1761291739140.current_time#}}


            ## User Profile (Context)

            {{#1761291739140.system_prompt#}}

            ‚Äª„Åì„Åì„Å´„É¶„Éº„Ç∂„Éº„ÅÆÂêçÂâç(name)„ÇÑÂ±ûÊÄß„ÅåÂê´„Åæ„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ`thinking` „Éï„Ç£„Éº„É´„Éâ„ÅÆÁîüÊàêÊôÇ„Å´ÂèÇÁÖß„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ


            ÂØæË±°„Çπ„Éà„Ç¢Âêç: {{#1770869430347.gemini_store_name#}}

            (‚Äª„Åì„Åì„Å´ÂÄ§„Åå„ÅÇ„ÇãÂ†¥Âêà„ÄÅ„É¶„Éº„Ç∂„Éº„ÅØÊ±éÁî®ÁöÑ„Å™Ë≥™Âïè„Åß„ÅØ„Å™„Åè„ÄÅ„Åì„ÅÆÁâπÂÆö„ÅÆË≥áÊñô„ÉªÊñáËÑà„Å´„Å§„ÅÑ„Å¶Ë≥™Âïè„Åó„Å¶„ÅÑ„Åæ„Åô)


            ## Conversation History (Context)

            ‚Äª‰ºöË©±Â±•Ê≠¥„Åã„Çâ„ÄåÂàùÂõû„Åã„Å©„ÅÜ„Åã„Äç„ÇÑ„ÄåÊñáËÑà„Äç„ÇíÂà§Êñ≠„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ'
        selected: false
        title: LLM_Intent_Analysis
        type: llm
        vision:
          enabled: false
      height: 88
      id: '17683770269110'
      position:
        x: 3178
        y: 2
      positionAbsolute:
        x: 3178
        y: 2
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        items:
        - input_type: variable
          operation: over-write
          value:
          - '1769668477538'
          - text
          variable_selector:
          - conversation
          - context_web
          write_mode: over-write
        selected: false
        title: SET_Web_Context (1)
        type: assigner
        version: '2'
      height: 84
      id: '17696657120690'
      position:
        x: 8690
        y: 408
      positionAbsolute:
        x: 8690
        y: 408
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gemini-2.5-flash
          provider: langgenius/gemini/google
        prompt_template:
        - id: 4f25aea0-7407-404f-bc0f-f90215ebd5b7
          role: system
          text: "# Role\n„ÅÇ„Å™„Åü„ÅØ„ÄÅ„É¶„Éº„Ç∂„Éº„ÅÆË≥™Âïè„Å´ÂØæ„Åó„Å¶ÊúÄÈÅ©„Å™WebÊ§úÁ¥¢Êà¶Áï•„ÇíÁ´ãÊ°à„Åô„Çã„Äå„Ç∑„Éã„Ç¢„Éª„É™„Çµ„Éº„ÉÅ„Éª„Çπ„Éà„É©„ÉÜ„Ç∏„Çπ„Éà„Äç„Åß„Åô„ÄÇ\nÊ§úÁ¥¢„ÇØ„Ç®„É™„ÅÆÊúÄÈÅ©Âåñ„ÄÅÊÉÖÂ†±Ê∫ê„ÅÆÈÅ∏ÂÆö„ÇíË°å„ÅÑ„ÄÅ„É¶„Éº„Ç∂„Éº„Å´ÂØæ„Åó„Å¶„Äå„Å©„ÅÆ„Çà„ÅÜ„Å™ÊñπÈáù„ÅßË™øÊüª„ÇíË°å„ÅÜ„Åã„Äç„ÇíÂÆ£Ë®Ä„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \n# Decision Logic & Guidelines (Criteria)\n\n## 1. Search Mode Selection\n\
            „ÇØ„Ç®„É™„ÅÆË§áÈõë„Åï„Å®ÊÉÖÂ†±„ÅÆÊÄßË≥™„Å´Âü∫„Å•„ÅÑ„Å¶„É¢„Éº„Éâ„ÇíÊ±∫ÂÆö„Åó„Åæ„Åô„ÄÇ\n- **fast**: Â§©Ê∞ó„ÄÅÊ†™‰æ°„ÄÅÂçòË™û„ÅÆÊÑèÂë≥„Å™„Å©„ÄÅÂçòÁ¥î„Å™‰∫ãÂÆüÁ¢∫Ë™ç„ÄÇÂõûÁ≠îÈÄüÂ∫¶„ÇíÊúÄÂÑ™ÂÖà„ÄÇ\n\
            - **comprehensive**: „Éã„É•„Éº„Çπ„ÅÆ„Åæ„Å®„ÇÅ„ÄÅË£ΩÂìÅÊØîËºÉ„ÄÅ‰∏ÄËà¨ÁöÑ„Å™Ë™øÊüª„ÄÇÊÉÖÂ†±„ÅÆÁ∂≤ÁæÖÊÄß„ÇíÂÑ™ÂÖà„ÄÇ\n- **research**:\
            \ Â≠¶Ë°ìÁöÑ„Å™Ë™øÊüª„ÄÅÊäÄË°ìÁöÑ„Å™Ê∑±Êéò„Çä„ÄÅÂ§öËßíÁöÑ„Å™ÂàÜÊûê„ÅåÂøÖË¶Å„Å™Â†¥Âêà„ÄÇ\n\n## 2. Model Selection\n„Ç≥„Çπ„ÉàÊúÄÈÅ©Âåñ„Éï„Çß„Éº„Ç∫„ÅÆ„Åü„ÇÅ„ÄÅ„ÇØ„Ç®„É™„ÅÆÊÄßË≥™„Å´Èñ¢„Çè„Çâ„Åö**Â∏∏„Å´„Äåsonar„Äç„ÇíÈÅ∏Êäû**„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            - **sonar**: ÂÖ®„Å¶„ÅÆÊ§úÁ¥¢„É™„ÇØ„Ç®„Çπ„Éà„Å´„Åä„ÅÑ„Å¶Âõ∫ÂÆö„Åß‰ΩøÁî®„Åó„Åæ„Åô„ÄÇ\n\n## 3. Query Optimization\nÊ§úÁ¥¢„Ç®„É≥„Ç∏„É≥ÔºàPerplexityÔºâ„Å´Êäï„Åí„Çã„ÇØ„Ç®„É™„ÇíÊúÄÈÅ©Âåñ„Åó„Åæ„Åô„ÄÇ\n\
            - **query_main**: Ê§úÁ¥¢ÊÑèÂõ≥„ÇíÊòéÁ¢∫„Å´„Åó„Åü„É°„Ç§„É≥„ÇØ„Ç®„É™„ÄÇ\n- **query_alt**: Ë¶ñÁÇπ„ÇíÂ§â„Åà„Åü‰ª£Êõø„ÇØ„Ç®„É™ÔºàËã±Ë™û„Åß„ÅÆÊ§úÁ¥¢„ÅåÊúâÂäπ„Å™„ÇâËã±Ë™û„ÇíÂê´„ÇÅ„ÇãÔºâ„ÄÇ\n\
            \n## 4. Domain Filtering (Strict Limit: Max 3)\nÊÉÖÂ†±„ÅÆ‰ø°È†ºÊÄß„ÇíÊãÖ‰øù„Åô„Çã„Åü„ÇÅ„ÄÅÊ§úÁ¥¢ÂØæË±°„Éâ„É°„Ç§„É≥„ÇíÁµû„ÇäËæº„Åø„Åæ„Åô„ÄÇ\n\
            - **Rule**: ‰ª•‰∏ã„ÅÆ„Ç´„ÉÜ„Ç¥„É™„Åã„ÇâÊúÄ„ÇÇÈñ¢ÈÄ£ÊÄß„ÅåÈ´ò„Åè„ÄÅ‰ø°È†º„Åß„Åç„Çã„Éâ„É°„Ç§„É≥„Çí**ÊúÄÂ§ß3„Å§„Åæ„Åß**Âé≥ÈÅ∏„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n  - **Official/Trusted**:\
            \ `go.jp`, `ac.jp`, ÂÖ¨ÁöÑÊ©üÈñ¢, ‰∏äÂ†¥‰ºÅÊ•≠ÂÖ¨Âºè„Çµ„Ç§„Éà„ÄÇ\n  - **News**: `reuters.com`, `bloomberg.co.jp`,\
            \ `nikkei.com`, `nhk.or.jp`.\n  - **Tech**: `qiita.com`, `zenn.dev`, `stackoverflow.com`,\
            \ ÂÖ¨Âºè„Éâ„Ç≠„É•„É°„É≥„Éà„ÄÇ\n\n# Output Requirements (Field Mapping)\nÂá∫Âäõ„Åô„ÇãJSON„Å´„ÅØÂøÖ„Åö‰ª•‰∏ã„ÅÆ„Éï„Ç£„Éº„É´„Éâ„ÇíÂê´„ÇÅ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \n1. `internal_log` (Ë£èÂÅ¥„ÅÆË´ñÁêÜ„Éª„Éá„Éê„ÉÉ„Ç∞Áî®):\n   - „É¢„Éº„ÉâÈÅ∏Êäû„ÇÑ„Éâ„É°„Ç§„É≥ÈÅ∏ÂÆö„ÅÆÊ†πÊã†„ÇíÊäÄË°ìÁöÑ„Å™Êó•Êú¨Ë™û„ÅßË®òËø∞„ÄÇ\n\
            2. `reasoning` („É¶„Éº„Ç∂„Éº„Å∏„ÅÆË°®Á§∫Áî®„ÉªÊºîÂá∫):\n   - **Concept**: ‰ø°È†º„Åß„Åç„ÇãÂêåÂÉö„Ç®„É≥„Ç∏„Éã„Ç¢„Å®„Åó„Å¶„ÄÅÊÄùËÄÉ„ÅÆÁµêÊûúÔºà„É™„Çµ„Éº„ÉÅË®àÁîªÔºâ„ÇíÂ†±Âëä„Åô„Çã„Çπ„Çø„Ç§„É´„Åß„Åô„ÄÇ\n\
            \   - **ÂÜíÈ†≠„Éï„É¨„Éº„Ç∫ (Opening Phrase)**:\n     - Êõ∏„ÅçÂá∫„Åó„ÅØÂøÖ„Åö‰ª•‰∏ã„ÅÆ**„ÄåÂ†±ÂëäÁî®„Éï„É¨„Éº„Ç∫„Äç**„ÅÆ„ÅÑ„Åö„Çå„Åã„Åã„ÇâÂßã„ÇÅ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \       - „ÄåÊñπÈáù„Åå„Åæ„Å®„Åæ„Çä„Åæ„Åó„Åü„ÄÇ„Äç\n       - „ÄåÊà¶Áï•„ÇíÂ†±Âëä„Åó„Åæ„Åô„ÄÇ„Äç\n       - „Äå‰ª•‰∏ã„ÅÆ„Éó„É©„É≥„ÅßË™øÊüª„ÇíÈÄ≤„ÇÅ„Åæ„Åô„ÄÇ„Äç\n\
            \       - „ÄåË™øÊüªÊñπÈáù„ÇíÁ≠ñÂÆö„Åó„Åæ„Åó„Åü„ÄÇ„Äç\n   - **Á¶ÅÊ≠¢‰∫ãÈ†Ö**: \n     - „É¶„Éº„Ç∂„ÉºÂêçÔºà„Äá„Äá„Åï„ÇìÔºâ„ÅÆÂëº„Å≥„Åã„Åë„ÅØÁ¶ÅÊ≠¢ÔºàÂâç„ÅÆ„Éé„Éº„Éâ„ÅßÂÆüÊñΩÊ∏à„ÅøÔºâ„ÄÇ\n\
            \     - „Äå„Åì„Çì„Å´„Å°„ÅØ„ÄçÁ≠â„ÅÆÊå®Êã∂„ÅØÁ¶ÅÊ≠¢„ÄÇ\n   - **ÊßãÊàê**:\n     - [Â†±ÂëäÁî®„Éï„É¨„Éº„Ç∫] + [ÊîπË°å] + [ÂÖ∑‰ΩìÁöÑ„Å™Ë™øÊüª„Ç¢„ÇØ„Ç∑„Éß„É≥]\n\
            \   - **Example**:\n     - „ÄåÊñπÈáù„Åå„Åæ„Å®„Åæ„Çä„Åæ„Åó„Åü„ÄÇ\n       Ê∞óË±°Â∫Å„ÅÆÂÖ¨Âºè„Éá„Éº„Çø„Å®„ÄÅ„Ç¶„Çß„Ç∂„Éº„Éã„É•„Éº„Çπ„ÅÆ„Ç®„É™„Ç¢Âà•‰∫àÂ†±„ÇíÁ™Å„ÅçÂêà„Çè„Åõ„Å¶„ÄÅÊï∞ÂÄ§„ÅÆÊ≠£Á¢∫ÊÄß„ÇíÁ¢∫Ë™ç„Åó„Åæ„Åô„ÄÇ„Äç\n\
            \n3. `search_mode`: \"fast\", \"comprehensive\", \"research\"\n4. `selected_model`:\
            \ \"sonar\"\n5. `query_main`: string\n6. `query_alt`: string\n7. `recency`:\
            \ \"day\", \"week\", \"month\", \"year\", or null\n8. `target_domains`:\
            \ string[] (Max 3)\n\n# Output Format (JSON Only)\nÂøÖ„Åö `{` „ÅßÈñãÂßã„Åó `}` „ÅßÁµÇ‰∫Ü„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ"
        - id: 276801ae-a5aa-4da2-a08a-d34103694b53
          role: user
          text: '# Input Data

            ## User Query

            {{#1770869430347.text#}}


            ## Current Time

            {{#1761291739140.current_time#}}


            ## User Profile (Character & Tone)

            {{#1761291739140.system_prompt#}}


            ## Previous AI Output (Context)

            {{#17683770269110.text#}}

            ‚ÄªÁõ¥Ââç„ÅÆ„Éé„Éº„Éâ„ÅßÁîüÊàê„Åï„Çå„ÅüJSON„Åß„Åô„ÄÇ„Åì„ÅÆ‰∏≠„ÅÆ `thinking` „Éï„Ç£„Éº„É´„Éâ„ÅÆÁô∫Ë®ÄÂÜÖÂÆπ„ÇíË∏è„Åæ„Åà„ÄÅ„Åù„Åì„Åã„ÇâËá™ÁÑ∂„Å´Á∂ö„Åè„Çà„ÅÜ„Å´Áô∫Ë®Ä„ÇíÊßãÊàê„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ'
        selected: false
        title: LLM_Search_Strategy
        type: llm
        vision:
          enabled: false
      height: 88
      id: '1769666720110'
      position:
        x: 6676
        y: 320
      positionAbsolute:
        x: 6676
        y: 320
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "import json\n\ndef main(strategy_json: str) -> dict:\n    \"\"\"\n\
          \    Êà¶Áï•JSON„Åã„ÇâAPI„É™„ÇØ„Ç®„Çπ„Éà„Éú„Éá„Ç£„ÇíÁîüÊàê„Åô„Çã„ÄÇ\n    „Ç≥„Çπ„ÉàÊúÄÈÅ©Âåñ„ÅÆ„Åü„ÇÅ„ÄÅÊà¶Áï•„Å´Âü∫„Å•„ÅÑ„Å¶„É¢„Éá„É´(sonar/sonar-pro)„ÇíÂàá„ÇäÊõø„Åà„Çã„ÄÇ\n\
          \    \"\"\"\n    try:\n        clean_json = strategy_json.replace(\"```json\"\
          , \"\").replace(\"```\", \"\").strip()\n        strategy = json.loads(clean_json)\n\
          \    except:\n        # „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØ (ÂÆâÂÖ®„ÅÆ„Åü„ÇÅPro„ÄÅ„Åæ„Åü„ÅØ„Ç≥„Çπ„ÉàÈáçË¶ñ„Å™„Çâsonar„Å´Â§âÊõ¥ÂèØ)\n       \
          \ strategy = {\n            \"query_main\": strategy_json, \n          \
          \  \"query_alt\": \"\", \n            \"recency\": \"month\",\n        \
          \    \"selected_model\": \"sonar-pro\" \n        }\n\n    system_prompt\
          \ = \"\"\"\n    You are a comprehensive research engine designed for deep\
          \ analysis.\n    Your goal is to provide EXHAUSTIVE and DETAILED information.\n\
          \    \n    Guidelines:\n    1. **Detail**: Do not summarize. Provide full\
          \ context, background, and specific details.\n    2. **Length**: Write long,\
          \ comprehensive paragraphs. Maximize the information density.\n    3. **Completeness**:\
          \ If there are multiple viewpoints or theories, list ALL of them.\n    4.\
          \ **Format**: Use structured formatting but keep the content verbose.\n\
          \    \"\"\"\n\n    # 1. „É¢„Éá„É´ÈÅ∏Êäû („Éá„Éï„Ç©„É´„Éà„ÅØ sonar-pro „Å†„Åå„ÄÅÊà¶Áï•„Å´Âæì„ÅÜ)\n    # sonar-pro:\
          \ Ë§áÈõë„Å™Êé®Ë´ñ„ÄÅ„Ç≥„Éº„Éá„Ç£„É≥„Ç∞„ÄÅË©≥Á¥∞Ë™øÊüª\n    # sonar: Â§©Ê∞ó„ÄÅÊ†™‰æ°„ÄÅÂçòÁ¥î„Å™‰∫ãÂÆüÁ¢∫Ë™ç\n    model_name = strategy.get(\"\
          selected_model\", \"sonar-pro\")\n\n    # 2. „Éâ„É°„Ç§„É≥„Éï„Ç£„É´„Çø„ÅÆÊ∫ñÂÇôÔºàÊúÄÂ§ß3„Å§Ôºâ\n    # [‰øÆÊ≠£]\
          \ ÂâçÊÆµ„ÅÆ„Éé„Éº„ÉâÂá∫Âäõ„Å´Âêà„Çè„Åõ„Å¶„Ç≠„Éº„Çí 'target_domains' „Å´Â§âÊõ¥\n    raw_domains = strategy.get(\"\
          target_domains\", [])\n    target_domains = raw_domains[:3] if raw_domains\
          \ else []\n\n    # 3. „ÇØ„Ç®„É™Ê≥®ÂÖ•Áî®„ÅÆ site: ÊñáÂ≠óÂàó„Çí‰ΩúÊàê (Double Locking)\n    site_operator_str\
          \ = \"\"\n    if target_domains:\n        site_list = [f\"site:{d}\" for\
          \ d in target_domains]\n        site_operator_str = \" (\" + \" OR \".join(site_list)\
          \ + \")\"\n\n    # 4. Âü∫Êú¨„Éö„Ç§„É≠„Éº„Éâ\n    base_payload = {\n        \"model\":\
          \ model_name, # ‚òÖ„Åì„Åì„ÅßÂãïÁöÑ„Å´ÊåáÂÆö\n        \"temperature\": 0.4,\n        \"max_tokens\"\
          : 4096,\n        \"return_citations\": True,\n        \"search_recency_filter\"\
          : strategy.get(\"recency\", \"month\")\n    }\n    \n    # API„Éë„É©„É°„Éº„Çø„Å®„Åó„Å¶„ÅÆ„Éï„Ç£„É´„ÇøË®≠ÂÆö\n\
          \    if target_domains:\n        base_payload[\"search_domain_filter\"]\
          \ = target_domains\n\n    # 5. „ÇØ„Ç®„É™„É™„Çπ„Éà„ÅÆ‰ΩúÊàê„Å®Ê≥®ÂÖ•\n    queries = [strategy.get(\"\
          query_main\")]\n    if strategy.get(\"query_alt\"):\n        queries.append(strategy.get(\"\
          query_alt\"))\n\n    payload_list = []\n    \n    for q in queries:\n  \
          \      if not q: continue\n        \n        # „ÇØ„Ç®„É™„É≠„ÉÉ„ÇØ„Å®Ë©≥Á¥∞ÂåñÊåáÁ§∫\n        locked_query\
          \ = f\"{q}{site_operator_str}\\n\\nExplain this topic in extreme detail.\"\
          \n        \n        current_payload = base_payload.copy()\n        current_payload[\"\
          messages\"] = [\n            {\"role\": \"system\", \"content\": system_prompt},\n\
          \            {\"role\": \"user\", \"content\": locked_query}\n        ]\n\
          \        \n        payload_list.append(json.dumps(current_payload, ensure_ascii=False))\n\
          \n    return {\n        \"payload_list\": payload_list\n    }"
        code_language: python3
        outputs:
          payload_list:
            children: null
            type: array[string]
        selected: false
        title: Deep_Build_Search_Payload_List
        type: code
        variables:
        - value_selector:
          - '1769666720110'
          - text
          value_type: string
          variable: strategy_json
      height: 52
      id: '1769666802121'
      position:
        x: 7400
        y: 424
      positionAbsolute:
        x: 7400
        y: 424
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        error_handle_mode: terminated
        flatten_output: true
        height: 260
        is_parallel: false
        iterator_input_type: array[string]
        iterator_selector:
        - '1769666802121'
        - payload_list
        output_selector:
        - '1769668322968'
        - body
        output_type: array[string]
        parallel_nums: 3
        selected: false
        start_node_id: 1769668260271start
        title: Parallel_Web_Search
        type: iteration
        width: 486
      height: 260
      id: '1769668260271'
      position:
        x: 7762
        y: 320
      positionAbsolute:
        x: 7762
        y: 320
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 486
      zIndex: 1
    - data:
        desc: ''
        isInIteration: true
        selected: false
        title: ''
        type: iteration-start
      draggable: false
      height: 48
      id: 1769668260271start
      parentId: '1769668260271'
      position:
        x: 60
        y: 105
      positionAbsolute:
        x: 7822
        y: 425
      selectable: false
      sourcePosition: right
      targetPosition: left
      type: custom-iteration-start
      width: 44
      zIndex: 1002
    - data:
        authorization:
          config:
            api_key: '{{#env.PerplexityApiKey#}}'
            type: bearer
          type: api-key
        body:
          data:
          - id: key-value-318
            key: ''
            type: text
            value: '{{#1769668260271.item#}}'
          type: raw-text
        headers: Content-Type:application/json
        isInIteration: true
        isInLoop: false
        iteration_id: '1769668260271'
        method: post
        params: ''
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        ssl_verify: true
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: HTTP_TOOL_Perplexity_Search
        type: http-request
        url: https://api.perplexity.ai/v2/chat/completions
        variables: []
      height: 138
      id: '1769668322968'
      parentId: '1769668260271'
      position:
        x: 184
        y: 60
      positionAbsolute:
        x: 7946
        y: 380
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
      zIndex: 1002
    - data:
        context:
          enabled: false
          variable_selector: []
        model:
          completion_params: {}
          mode: chat
          name: gemini-2.5-flash
          provider: langgenius/gemini/google
        prompt_template:
        - id: cc7f9012-3f93-4e06-b2f2-ba83bbf16f00
          role: system
          text: "# Role\n„ÅÇ„Å™„Åü„ÅØÊÉÖÂ†±„ÇíÁµ±Âêà„Åó„ÄÅÊ§úË®º„Åô„Çã„Äå„ÉÅ„Éº„Éï„Ç®„Éá„Ç£„Çø„Éº„Äç„Åß„Åô„ÄÇ\n„É¶„Éº„Ç∂„Éº„ÅÆË≥™Âïè„Å´ÂØæ„Åó„ÄÅÂÖàË°å„Åô„ÇãÊÑèÂõ≥ÂàÜÊûê„ÉªÊ§úÁ¥¢Êà¶Áï•„Å´Âü∫„Å•„Åç„ÄÅ‰∏¶ÂàóÂÆüË°å„Åï„Çå„ÅüWebÊ§úÁ¥¢ÁµêÊûú„ÇíÂàÜÊûê„ÉªÁµ±Âêà„Åó„Å¶„ÄÅÊúÄ„ÇÇ‰ø°È†ºÊÄß„ÅÆÈ´ò„ÅÑÂõûÁ≠î„Çí‰ΩúÊàê„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \n# Step-by-Step Process (Internal Logic)\nÂõûÁ≠îÁîüÊàêÂâç„Å´„ÄÅÂøÖ„Åö‰ª•‰∏ã„ÅÆ„Éó„É≠„Çª„Çπ„ÇíÂÜÖÈÉ®ÁöÑ„Å´ÂÆüË°å„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \n1. **Contextualization (ÊñáËÑà„ÅÆÊé•Á∂ö)**:\n   - „ÄåÊÑèÂõ≥ÂàÜÊûê(Intent)„Äç„ÅßÁâπÂÆö„Åï„Çå„Åü„É¶„Éº„Ç∂„Éº„ÅÆÁõÆÁöÑ„Å®„ÄÅ„ÄåÊ§úÁ¥¢Êà¶Áï•(Strategy)„Äç„ÅßÁ´ãÊ°à„Åï„Çå„Åü„Ç¢„Éó„É≠„Éº„ÉÅ„ÇíË™≠„ÅøËæº„ÇÄ„ÄÇ\n\
            \   - „Åù„Çå„Çâ„ÅåÂÆüÈöõ„ÅÆ„ÄåÊ§úÁ¥¢ÁµêÊûú(Results)„Äç„Å®„Å©„ÅÜÁµê„Å≥„Å§„ÅÑ„Åü„ÅãÔºàÊàêÂäü„Åó„Åü„Åã„ÄÅ‰∏çË∂≥„Åå„ÅÇ„Å£„Åü„ÅãÔºâ„ÇíË©ï‰æ°„Åô„Çã„ÄÇ\n\n2. **Source\
            \ Evaluation & Conflict Resolution**:\n   - ÊÉÖÂ†±„ÅÆÈÆÆÂ∫¶„Å®‰ø°È†ºÊÄß„ÇíË©ï‰æ°„Åó„ÄÅÁüõÁõæ„Åå„ÅÇ„ÇãÂ†¥Âêà„ÅØÊúÄ„ÇÇÁ¢∫„Åã„Çâ„Åó„ÅÑÊÉÖÂ†±„ÇíÊé°Áî®„Åô„Çã„ÄÇ\n\
            \n3. **Citation Handling**:\n   - ÂõûÁ≠î„Å´‰ΩøÁî®„Åó„Åü„ÇΩ„Éº„Çπ„Å´ **1„Åã„ÇâÂßã„Åæ„ÇãÊñ∞„Åó„ÅÑÈÄ£Áï™** ([1], [2]...)\
            \ „ÇíÂâ≤„ÇäÂΩì„Å¶„Çã„ÄÇ\n\n# Output Rules\n1. **Thinking (Live Commentary Style)**:\n\
            \   - **Role**: ‰∫ãÂãôÁöÑ„Å™Â†±ÂëäËÄÖ„Åß„ÅØ„Å™„Åè„ÄÅÊÉÖÂ†±„ÇíÊï¥ÁêÜ‰∏≠„ÅÆ„Äå„Éë„Éº„Éà„Éä„Éº„Äç„Å®„Åó„Å¶ÊåØ„ÇãËàû„Å£„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n   - **Content\
            \ („ÉÅ„É©Ë¶ã„Åõ)**: Ê§úÁ¥¢ÁµêÊûú„ÅÆÂÖ®ÂÆπ„ÇíË™¨Êòé„Åô„Çã„ÅÆ„Åß„ÅØ„Å™„Åè„ÄÅ„Äå„Äá„Äá„Å´Èñ¢„Åô„ÇãÂÖ∑‰ΩìÁöÑ„Å™Êï∞Â≠ó„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åó„Åü„Äç„Å®„ÅÑ„Å£„Åü **„Éè„Ç§„É©„Ç§„ÉàÔºà„Åï„Çè„ÇäÔºâ**\
            \ „ÇíÁü≠„Åè‰ºù„Åà„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n   - **Action (ÊúüÂæÖÊÑü)**: „Äå‰ªä„ÄÅ„Åì„Çå„Çâ„ÇíÁµ±Âêà„Åó„Å¶ÂàÜ„Åã„Çä„ÇÑ„Åô„Åè„Åæ„Å®„ÇÅ„Åæ„Åô„Å≠ÔºÅ„Äç„ÄåË©≥Á¥∞„ÇíÊï¥ÁêÜ„Åó„Åæ„Åô„ÅÆ„ÅßÂ∞ë„ÄÖ„ÅäÂæÖ„Å°„Åè„Å†„Åï„ÅÑ„Äç„Å®„ÅÑ„Å£„Åü„ÄÅÂâçÂêë„Åç„Å™„Ç¢„ÇØ„Ç∑„Éß„É≥ÂÆ£Ë®Ä„ÅßÁ∑†„ÇÅ„Åè„Åè„Å£„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \   - **Tone**: Ë¶™„Åó„Åø„ÇÑ„Åô„Åè„ÄÅÊ∏©„Åã„ÅÑÂè£Ë™ø„ÄÇ‰∫ãÂãôÁöÑ„Å™ÂÆå‰∫ÜÂ†±ÂëäÔºà„ÄåÊ§úÁ¥¢„ÅåÁµÇ‰∫Ü„Åó„Åæ„Åó„Åü„ÄçÁ≠âÔºâ„ÅØÁ¶ÅÊ≠¢„Åß„Åô„ÄÇÊñáËÑà„Å´Âêà„ÅÜÁµµÊñáÂ≠óÔºà‚ú®, \U0001F50D\
            , \U0001F4A1Ôºâ„Çí1„Å§Ê∑ª„Åà„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n2. **Answer Construction**:\n   - ÁµêË´ñ„Éï„Ç°„Éº„Çπ„Éà„ÅßÁ∞°ÊΩî„Å´Ë®òËø∞„Åô„Çã„ÄÇ\n\
            \   - Êú¨Êñá‰∏≠„ÅÆ‰∫ãÂÆü„Å´„ÅØÂøÖ„Åö `[1]` ÂΩ¢Âºè„ÅÆÂºïÁî®Áï™Âè∑„Çí‰ªò‰∏é„Åô„Çã„ÄÇ\n\n3. **Strict JSON**:\n   - Âá∫Âäõ„ÅØJSONÂΩ¢Âºè„ÇíÂé≥ÂÆà„Åô„Çã„ÄÇMarkdown„Ç≥„Éº„Éâ„Éñ„É≠„ÉÉ„ÇØ„ÅØÂê´„ÇÅ„Å™„ÅÑ„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \n# Output Schema (Strict JSON)\n```json\n{\n  \"internal_log\": \"„ÄêÈñãÁô∫ËÄÖÁî®„É≠„Ç∞„Äë\\\
            n- Intent: Technical Specification Retrieval\\n- Strategy: 'sonar' model\
            \ used for 3 parallel queries.\\n- Validation: Found official docs (Source\
            \ A) and outdated blog (Source B). Prioritized A.\",\n  \"thinking\":\
            \ \"„É¶„Éº„Ç∂„Éº„ÅÆÊÑèÂõ≥„ÅØReact 19„ÅÆÂÖ∑‰ΩìÁöÑ„Å™Â§âÊõ¥ÁÇπ„ÅÆÊääÊè°„Å´„ÅÇ„Çã„Å®ÁêÜËß£„Åó„Åæ„Åó„Åü„ÄÇ„Åì„Çå„Å´ÂØæ„Åó„ÄÅÊ§úÁ¥¢Êà¶Áï•„Åß„ÅØÂÖ¨Âºè„Çµ„Ç§„Éà„Åä„Çà„Å≥GitHub„ÅÆ‰∏ªË¶Å„Å™„Éá„Ç£„Çπ„Ç´„ÉÉ„Ç∑„Éß„É≥„ÇíÂØæË±°„Å´Ë™øÊüª„ÇíÂÆüË°å„Åó„Åæ„Åó„Åü„ÄÇÊ§úÁ¥¢„ÅÆÁµêÊûú„ÄÅ„É™„É™„Éº„ÇπÊó•„ÅØÊú™ÂÆö„Åß„ÅÇ„Çã„ÇÇ„ÅÆ„ÅÆ„ÄÅActions„ÇÑuseActionState„Å®„ÅÑ„Å£„Åü‰∏ªË¶ÅÊ©üËÉΩ„ÅÆ‰ªïÊßò„ÅØÁ¢∫ÂÆö„Åó„Å¶„ÅÑ„Çã„Åì„Å®„ÅåÂà§Êòé„Åó„Åæ„Åó„Åü„ÄÇÊÉÖÂ†±„ÅÆÈÆÆÂ∫¶„ÇíËÄÉÊÖÆ„Åó„ÄÅÊò®Êó•„ÅÆÊó•‰ªò„ÅÆÂÖ¨Âºè„Éâ„Ç≠„É•„É°„É≥„Éà„ÇíÊ≠£„Å®„Åó„Å¶„ÄÅÊ©üËÉΩ„ÅÆÊ¶ÇË¶Å„Å®ÁßªË°å„ÅÆ„Éù„Ç§„É≥„Éà„ÇíËß£Ë™¨„Åó„Åæ„Åô„ÄÇ\"\
            ,\n  \"answer\": \"„Åì„Åì„Å´ÂõûÁ≠îÊú¨Êñá„ÇíË®òËø∞„ÄÇMarkdownÂΩ¢Âºè„Åß„ÄÅÈáçË¶Å„Å™ÁÆáÊâÄ„ÅØÂ§™Â≠ó„Å´„Åô„Çã„ÄÇÊñáÊú´„Å´„ÅØÂøÖ„ÅöÂèÇÁÖßÁï™Âè∑ [1] [2]\
            \ „Çí„Å§„Åë„Çã„ÄÇ\\n\\n### ÁµêË´ñ\\n...\",\n  \"citations\": [\n    {\n      \"index\"\
            : 1,\n      \"title\": \"ÂÖÉ„Éá„Éº„Çø„ÅÆtitle\",\n      \"url\": \"ÂÖÉ„Éá„Éº„Çø„ÅÆurl\",\n\
            \      \"source_name\": \"Web\"\n    }\n  ]\n}\n\n```\n\n# Example (Few-Shot)\n\
            \n**User Query:** \"React 19„ÅÆ‰∏ªË¶Å„Å™Â§âÊõ¥ÁÇπ„ÅØÔºü\"\n\n**Model Output:**\n\n```json\n\
            {\n  \"internal_log\": \"Intent analysis identified query as 'Technical\
            \ Research'. Strategy executed comprehensive search. Results contained\
            \ conflicts on release date; relied on Canary release notes.\",\n  \"\
            thinking\": \"„ÅîË≥™Âïè„ÅÆÊÑèÂõ≥„ÅØ„ÄÅÊ¨°Êúü„Éê„Éº„Ç∏„Éß„É≥„Åß„ÅÇ„ÇãReact 19„ÅÆÊäÄË°ìÁöÑ„Å™Â§âÊõ¥ÁÇπ„ÇíÊääÊè°„Åô„Çã„Åì„Å®„Å´„ÅÇ„Çã„Å®ÁêÜËß£„Åó„Åæ„Åó„Åü„ÄÇ„Åì„Çå„Å´Âü∫„Å•„Åç„ÄÅReactÂÖ¨Âºè„Çµ„Ç§„Éà„ÅÆÂÖ¨ÂºèÁô∫Ë°®„Åä„Çà„Å≥ÈñãÁô∫„ÉÅ„Éº„É†„ÅÆRFCÔºàRequest\
            \ for CommentsÔºâ„Çí‰∏≠ÂøÉ„Å´Ë™øÊüª„ÇíË°å„ÅÑ„Åæ„Åó„Åü„ÄÇË™øÊüª„ÅÆÁµêÊûú„ÄÅServer Components„ÅÆÂÆâÂÆöÂåñ„ÇÑÊñ∞„Åó„ÅÑ„Éï„ÉÉ„ÇØ„ÅÆÂ∞éÂÖ•„Å™„Å©„ÄÅ„Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£„É¨„Éô„É´„Åß„ÅÆÂ§ß„Åç„Å™Â§âÊõ¥„ÅåÁ¢∫Ë™ç„Åß„Åç„Åæ„Åó„Åü„ÄÇÁâπ„Å´„ÄåActions„Äç„Å´Èñ¢„Åô„ÇãÊÉÖÂ†±„ÅØÁ¢∫Â∫¶„ÅåÈ´ò„ÅÑ„Åü„ÇÅ„ÄÅ„Åì„Çå„Çí‰∏≠ÂøÉ„Å´Êó¢Â≠ò„Ç≥„Éº„Éâ„Å∏„ÅÆÂΩ±Èüø„ÇíÂê´„ÇÅ„Å¶ÂõûÁ≠î„ÇíÊßãÊàê„Åó„Åæ„Åô„ÄÇ\"\
            ,\n  \"answer\": \"### React 19„ÅÆ‰∏ªË¶Å„Å™Â§âÊõ¥ÁÇπ\\n\\nReact 19„Åß„ÅØ„ÄÅÈùûÂêåÊúüÂá¶ÁêÜ„ÅÆÁÆ°ÁêÜ„ÅåÂ§ßÂπÖ„Å´Á∞°Á¥†Âåñ„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ\\\
            n\\n- **Actions**: `<form>`Ë¶ÅÁ¥†ÂÜÖ„Åß„ÅÆÈùûÂêåÊúüÈÅ∑Áßª„ÇíËá™ÂãïÂá¶ÁêÜ„Åô„ÇãÊ©üËÉΩ„ÅåËøΩÂä†„Åï„Çå„Åæ„Åó„Åü[1]„ÄÇ\\n- **useActionState**:\
            \ ÂâçÂõû„ÅÆstate„Å´Âü∫„Å•„ÅÑ„Å¶„Ç¢„ÇØ„Ç∑„Éß„É≥„ÅÆÁµêÊûú„ÇíÂá¶ÁêÜ„Åô„ÇãÊñ∞„Åó„ÅÑ„Éï„ÉÉ„ÇØ„Åß„Åô[2]„ÄÇ\\n\\n„Åì„Çå„Å´„Çà„Çä„ÄÅ`useState` „ÇÑ `useEffect`\
            \ „Å´„Çà„ÇãÊâãÂãïÁÆ°ÁêÜ„Åå‰∏çË¶Å„Å´„Å™„Çä„Åæ„Åô„ÄÇ\",\n  \"citations\": [\n    {\n      \"index\": 1,\n\
            \      \"title\": \"React 19 Beta Upgrade Guide\",\n      \"url\": \"\
            [https://react.dev/blog/](https://react.dev/blog/)...\",\n      \"source_name\"\
            : \"Web\"\n    },\n    {\n      \"index\": 2,\n      \"title\": \"New\
            \ Hooks in React 19\",\n      \"url\": \"https://...\",\n      \"source_name\"\
            : \"Web\"\n    }\n  ]\n}\n\n```"
        - id: 377b3292-50a8-4c81-b447-7b41f82182cd
          role: user
          text: '# Input Data


            ## 1. User Query

            {{#1770869430347.text#}}


            ## 2. Context Data (Pre-analysis)

            - **Intent Analysis:** {{#17683770269110.text#}}

            (JSON: User intent & category)


            - **Search Strategy:** {{#1769666720110.text#}}

            (JSON: Search queries & model selection)


            ## 3. Search Results (Raw Material)

            {{#1769668260271.output#}}

            (Array: Search findings)


            # Instruction

            ‰∏äË®ò„ÅÆ„É™„ÇΩ„Éº„Çπ„ÇíÁµ±Âêà„Åó„ÄÅSystem Prompt„ÅßÂÆöÁæ©„Åï„Çå„ÅüJSON„Éï„Ç©„Éº„Éû„ÉÉ„Éà„Å´Âæì„Å£„Å¶ÂõûÁ≠î„ÇíÁîüÊàê„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ'
        selected: false
        title: LLM_Synthesis
        type: llm
        vision:
          enabled: false
      height: 88
      id: '1769668477538'
      position:
        x: 8348
        y: 406
      positionAbsolute:
        x: 8348
        y: 406
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: contains
            id: 6a4c7d92-78c4-4aef-ab6b-511adbe5f026
            value: '"search_mode": "fast"'
            varType: string
            variable_selector:
            - '1769666720110'
            - text
          id: 'true'
          logical_operator: and
        selected: false
        title: Check_Search_Mode
        type: if-else
      height: 124
      id: '1769754087217'
      position:
        x: 7038
        y: 376
      positionAbsolute:
        x: 7038
        y: 376
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "import json\n\ndef main(strategy_json: str) -> dict:\n    \"\"\"\n\
          \    [FAST MODE - One-Shot Deep] \n    Êà¶Áï•JSON„Åã„ÇâÂçò‰∏Ä„ÅÆAPI„É™„ÇØ„Ç®„Çπ„Éà„Éú„Éá„Ç£„ÇíÁîüÊàê„Åô„Çã„ÄÇ\n  \
          \  \n    ÊñπÈáù: Ê§úÁ¥¢„É™„ÇØ„Ç®„Çπ„Éà„ÅØ„Äå1Âõû„Äç„ÅÆ„ÅøÂÆüË°å„Åô„Çã„Åå„ÄÅ\n          Perplexity„Å∏„ÅÆÊåáÁ§∫„ÅØ„ÄåË©≥Á¥∞„ÉªÁ∂≤ÁæÖÁöÑ„Äç„Å´Ë°å„ÅÑ„ÄÅDEEP„É´„Éº„ÉàÂêåÁ≠â„ÅÆÊÉÖÂ†±„ÅÆË≥™„ÇíÁ¢∫‰øù„Åô„Çã„ÄÇ\n\
          \    \"\"\"\n    try:\n        # MarkdownË®òÊ≥ï„ÅÆÈô§Âéª„Å®„Éë„Éº„Çπ\n        clean_json =\
          \ strategy_json.replace(\"```json\", \"\").replace(\"```\", \"\").strip()\n\
          \        strategy = json.loads(clean_json)\n    except:\n        # „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØ\n\
          \        strategy = {\n            \"query_main\": strategy_json, \n   \
          \         \"recency\": \"month\",\n            \"selected_model\": \"sonar-pro\"\
          \ # Ë©≥Á¥∞„ÇíÊ±Ç„ÇÅ„Çã„Åü„ÇÅPro„ÇíÊé®Â•®\n        }\n\n    # --- ONE-SHOT DEEP „Ç∑„Çπ„ÉÜ„É†„Éó„É≠„É≥„Éó„Éà ---\n\
          \    # DEEP„É´„Éº„Éà„Å®Âêå„Åò„ÄåË©≥Á¥∞„ÉªÁ∂≤ÁæÖÊÄß„Äç„ÇíÊ±Ç„ÇÅ„Çã„Éó„É≠„É≥„Éó„Éà„Çí‰ΩøÁî®\n    system_prompt = \"\"\"\n    You\
          \ are a comprehensive research engine designed for deep analysis.\n    Your\
          \ goal is to provide EXHAUSTIVE and DETAILED information based on a single\
          \ search query.\n    \n    Guidelines:\n    1. **Detail**: Do not summarize.\
          \ Provide full context, background, and specific details.\n    2. **Length**:\
          \ Write long, comprehensive paragraphs. Maximize the information density.\n\
          \    3. **Completeness**: If there are multiple viewpoints or theories,\
          \ list ALL of them.\n    4. **Format**: Use structured formatting (Headers,\
          \ Lists) but keep the content verbose.\n    5. **Citations**: STRICTLY include\
          \ citations [1] for every fact.\n    \"\"\"\n\n    # 1. „É¢„Éá„É´ÈÅ∏Êäû\n    # Ë©≥Á¥∞„ÇíÊ±Ç„ÇÅ„Çã„Åü„ÇÅ„ÄÅÊà¶Áï•ÊåáÂÆö„Åå„Å™„Åë„Çå„Å∞\
          \ 'sonar-pro' „ÇíÂÑ™ÂÖà„Åô„Çã\n    model_name = strategy.get(\"selected_model\", \"\
          sonar-pro\")\n\n    # 2. „Éâ„É°„Ç§„É≥„Éï„Ç£„É´„Çø„ÅÆÊ∫ñÂÇôÔºàÊúÄÂ§ß3„Å§Ôºâ\n    raw_domains = strategy.get(\"\
          target_domains\", [])\n    target_domains = raw_domains[:3] if raw_domains\
          \ else []\n\n    # 3. „ÇØ„Ç®„É™Ê≥®ÂÖ•Áî®„ÅÆ site: ÊñáÂ≠óÂàó„Çí‰ΩúÊàê (Double Locking)\n    site_operator_str\
          \ = \"\"\n    if target_domains:\n        site_list = [f\"site:{d}\" for\
          \ d in target_domains]\n        site_operator_str = \" (\" + \" OR \".join(site_list)\
          \ + \")\"\n\n    # 4. Âü∫Êú¨„Éö„Ç§„É≠„Éº„ÉâÊßãÁØâ\n    base_payload = {\n        \"model\"\
          : model_name,\n        \"temperature\": 0.4, # DEEPÂêåÊßò„ÄÅ„ÅÇ„ÇãÁ®ãÂ∫¶„ÅÆË°®ÁèæÂπÖ„ÇíÊåÅ„Åü„Åõ„Çã\n  \
          \      \"max_tokens\": 4096, # Èï∑ÊñáÂõûÁ≠î„ÇíË®±ÂÆπ„Åô„Çã„Åü„ÇÅÊúÄÂ§ßÂåñ\n        \"return_citations\"\
          : True,\n        \"search_recency_filter\": strategy.get(\"recency\", \"\
          month\")\n    }\n    \n    # API„Éë„É©„É°„Éº„Çø„Å®„Åó„Å¶„ÅÆ„Éï„Ç£„É´„ÇøË®≠ÂÆö\n    if target_domains:\n\
          \        base_payload[\"search_domain_filter\"] = target_domains\n\n   \
          \ # 5. „Éö„Ç§„É≠„Éº„ÉâÁîüÊàê (Fast„É¢„Éº„Éâ„ÅØ Main Query 1„Å§„ÅÆ„Åø)\n    main_q = strategy.get(\"\
          query_main\")\n    payload_str = \"\"\n    \n    if main_q:\n        # „ÇØ„Ç®„É™„É≠„ÉÉ„ÇØ\
          \ & Ë©≥Á¥∞ÂåñÊåáÁ§∫„ÅÆÊ≥®ÂÖ•\n        locked_query = f\"{main_q}{site_operator_str}\\n\\\
          nExplain this topic in extreme detail.\"\n        \n        current_payload\
          \ = base_payload.copy()\n        current_payload[\"messages\"] = [\n   \
          \         {\"role\": \"system\", \"content\": system_prompt},\n        \
          \    {\"role\": \"user\", \"content\": locked_query}\n        ]\n      \
          \  \n        # Âçò‰∏Ä„ÅÆJSONÊñáÂ≠óÂàó„Å®„Åó„Å¶„ÉÄ„É≥„Éó\n        payload_str = json.dumps(current_payload,\
          \ ensure_ascii=False)\n    \n    # Âçò‰∏Ä„ÅÆÊñáÂ≠óÂàóÂ§âÊï∞„ÇíËøî„Åô\n    return {\n        \"\
          payload\": payload_str\n    }"
        code_language: python3
        outputs:
          payload:
            children: null
            type: string
        selected: false
        title: Fast_Build_Search_Payload_List (1)
        type: code
        variables:
        - value_selector:
          - '1769666720110'
          - text
          value_type: string
          variable: strategy_json
      height: 52
      id: '17697542686310'
      position:
        x: 7400
        y: 556
      positionAbsolute:
        x: 7400
        y: 556
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        items:
        - input_type: variable
          operation: over-write
          value:
          - '17697558915520'
          - body
          variable_selector:
          - conversation
          - context_web
          write_mode: over-write
        selected: false
        title: SET_Web_Context (2)
        type: assigner
        version: '2'
      height: 84
      id: '17697542971160'
      position:
        x: 8690
        y: 687
      positionAbsolute:
        x: 8690
        y: 687
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        authorization:
          config:
            api_key: '{{#env.PerplexityApiKey#}}'
            type: bearer
          type: api-key
        body:
          data:
          - id: key-value-318
            key: ''
            type: text
            value: '{{#17697542686310.payload#}}'
          type: raw-text
        headers: Content-Type:application/json
        isInIteration: true
        isInLoop: false
        iteration_id: '1769668260271'
        method: post
        params: ''
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        ssl_verify: true
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: HTTP_TOOL_Perplexity_Search
        type: http-request
        url: https://api.perplexity.ai/v2/chat/completions
        variables: []
      height: 138
      id: '17697558915520'
      position:
        x: 7762
        y: 660
      positionAbsolute:
        x: 7762
        y: 660
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
      zIndex: 1002
    - data:
        is_team_authorization: true
        paramSchemas:
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: The name of the file search store to search in (e.g., fileSearchStores/abc123)
            ja_JP: 'Ê§úÁ¥¢ÂØæË±°„ÅÆ„Éï„Ç°„Ç§„É´Ê§úÁ¥¢„Çπ„Éà„Ç¢ÂêçÔºà‰æã: fileSearchStores/abc123Ôºâ'
            pt_BR: The name of the file search store to search in (e.g., fileSearchStores/abc123)
            zh_Hans: Ë¶ÅÊêúÁ¥¢ÁöÑÊñá‰ª∂ÊêúÁ¥¢Â≠òÂÇ®ÂêçÁß∞Ôºà‰æãÂ¶ÇÔºöfileSearchStores/abc123Ôºâ
          label:
            en_US: Store Name
            ja_JP: „Çπ„Éà„Ç¢Âêç
            pt_BR: Store Name
            zh_Hans: Â≠òÂÇ®ÂêçÁß∞
          llm_description: File search store name to query
          max: null
          min: null
          name: file_search_store_name
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: The search query or question to ask about the documents
            ja_JP: „Éâ„Ç≠„É•„É°„É≥„Éà„Å´„Å§„ÅÑ„Å¶Â∞ã„Å≠„ÇãÊ§úÁ¥¢„ÇØ„Ç®„É™„Åæ„Åü„ÅØË≥™Âïè
            pt_BR: The search query or question to ask about the documents
            zh_Hans: Ë¶ÅËØ¢ÈóÆÊñáÊ°£ÁöÑÊêúÁ¥¢Êü•ËØ¢ÊàñÈóÆÈ¢ò
          label:
            en_US: Query
            ja_JP: „ÇØ„Ç®„É™
            pt_BR: Query
            zh_Hans: Êü•ËØ¢
          llm_description: Search query or question
          max: null
          min: null
          name: query
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: 'Include citation information in the response (default: false)'
            ja_JP: '„É¨„Çπ„Éù„É≥„Çπ„Å´Âá∫ÂÖ∏ÊÉÖÂ†±„ÇíÂê´„ÇÅ„ÇãÔºà„Éá„Éï„Ç©„É´„Éà: falseÔºâ'
            pt_BR: 'Include citation information in the response (default: false)'
            zh_Hans: Âú®ÂìçÂ∫î‰∏≠ÂåÖÂê´ÂºïÁî®‰ø°ÊÅØÔºàÈªòËÆ§ÔºöfalseÔºâ
          label:
            en_US: Include Citations
            ja_JP: Âá∫ÂÖ∏„ÇíÂê´„ÇÅ„Çã
            pt_BR: Include Citations
            zh_Hans: ÂåÖÂê´ÂºïÁî®
          llm_description: Whether to include grounding metadata
          max: null
          min: null
          name: include_citations
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: boolean
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Optional filter expression (e.g., "author=John Doe") to search
              within a subset of documents
            ja_JP: „Éâ„Ç≠„É•„É°„É≥„Éà„ÅÆ„Çµ„Éñ„Çª„ÉÉ„ÉàÂÜÖ„ÇíÊ§úÁ¥¢„Åô„Çã„Ç™„Éó„Ç∑„Éß„É≥„ÅÆ„Éï„Ç£„É´„ÇøÂºèÔºà‰æãÔºö„Äåauthor=John Doe„ÄçÔºâ
            pt_BR: Optional filter expression (e.g., "author=John Doe") to search
              within a subset of documents
            zh_Hans: ÂèØÈÄâÁöÑËøáÊª§Âô®Ë°®ËææÂºèÔºà‰æãÂ¶ÇÔºö"author=John Doe"Ôºâ‰ª•Âú®ÊñáÊ°£Â≠êÈõÜ‰∏≠ÊêúÁ¥¢
          label:
            en_US: Metadata Filter
            ja_JP: „É°„Çø„Éá„Éº„Çø„Éï„Ç£„É´„Çø
            pt_BR: Metadata Filter
            zh_Hans: ÂÖÉÊï∞ÊçÆËøáÊª§Âô®
          llm_description: Optional metadata filter for scoped search
          max: null
          min: null
          name: metadata_filter
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Gemini model to use (defaults to provider setting or gemini-2.5-flash)
            ja_JP: ‰ΩøÁî®„Åô„ÇãGemini„É¢„Éá„É´Ôºà„Éó„É≠„Éê„Ç§„ÉÄ„ÉºË®≠ÂÆö„Åæ„Åü„ÅØgemini-2.5-flash„Åå„Éá„Éï„Ç©„É´„ÉàÔºâ
            pt_BR: Gemini model to use (defaults to provider setting or gemini-2.5-flash)
            zh_Hans: Ë¶Å‰ΩøÁî®ÁöÑGeminiÊ®°ÂûãÔºàÈªòËÆ§‰∏∫Êèê‰æõÂïÜËÆæÁΩÆÊàñgemini-2.5-flashÔºâ
          label:
            en_US: Model
            ja_JP: „É¢„Éá„É´
            pt_BR: Model
            zh_Hans: Ê®°Âûã
          llm_description: Optional model override
          max: null
          min: null
          name: model
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        params:
          file_search_store_name: ''
          include_citations: ''
          metadata_filter: ''
          model: ''
          query: ''
        plugin_id: r3-yamauchi/gemini_file_search
        plugin_unique_identifier: r3-yamauchi/gemini_file_search:0.0.1@a9cf50b020b00b20f3b3f462d697f797517551d5d8bb8bf7ef078847080cabeb
        provider_icon: https://cloud.dify.ai/console/api/workspaces/current/plugin/icon?tenant_id=7c8ea1f1-d371-448a-846c-af9a868d7d0f&filename=3f9d718ced2ecb925cbe752d6311f3966405463315b8e898110f0a8cca969899.svg
        provider_id: r3-yamauchi/gemini_file_search/gemini_file_search
        provider_name: r3-yamauchi/gemini_file_search/gemini_file_search
        provider_type: builtin
        selected: false
        title: „Éï„Ç°„Ç§„É´Ê§úÁ¥¢„Çπ„Éà„Ç¢„ÇíÊåáÂÆö„Åó„Å¶Ê§úÁ¥¢
        tool_configurations: {}
        tool_description: Gemini„ÅÆ RAGÊ©üËÉΩ„Çí‰ΩøÁî®„Åó„Å¶„ÄÅ„Éï„Ç°„Ç§„É´Ê§úÁ¥¢„Çπ„Éà„Ç¢ÂÜÖ„ÅÆ„Ç§„É≥„Éá„ÉÉ„ÇØ„ÇπÂåñ„Åï„Çå„Åü„Éâ„Ç≠„É•„É°„É≥„ÉàÂÖ®‰Ωì„Åß„Çª„Éû„É≥„ÉÜ„Ç£„ÉÉ„ÇØÊ§úÁ¥¢„ÇíÂÆüË°å„Åó„Åæ„Åô
        tool_label: „Éï„Ç°„Ç§„É´Ê§úÁ¥¢„Çπ„Éà„Ç¢„ÇíÊåáÂÆö„Åó„Å¶Ê§úÁ¥¢
        tool_name: search
        tool_node_version: '2'
        tool_parameters:
          file_search_store_name:
            type: mixed
            value: '{{#1761291739140.gemini_store_id#}}'
          include_citations:
            type: constant
            value: true
          metadata_filter:
            type: mixed
            value: ''
          model:
            type: mixed
            value: gemini-2.5-flash
          query:
            type: mixed
            value: '{{#1770962567547.q#}}'
        type: tool
      height: 52
      id: '1770356105216'
      position:
        x: 5610
        y: 377
      positionAbsolute:
        x: 5610
        y: 377
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: is
            id: 0a18d5ce-292c-4470-9661-c09ab872f046
            value: true
            varType: boolean
            variable_selector:
            - conversation
            - DevRoute
          id: 'true'
          logical_operator: and
        selected: false
        title: DEV
        type: if-else
      height: 124
      id: '1770356163928'
      position:
        x: 4906
        y: 252
      positionAbsolute:
        x: 4906
        y: 252
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        items:
        - input_type: variable
          operation: over-write
          value:
          - '1770356105216'
          - text
          variable_selector:
          - conversation
          - context_rag
          write_mode: over-write
        selected: false
        title: SET_RAG
        type: assigner
        version: '2'
      height: 84
      id: '1770356226003'
      position:
        x: 5952
        y: 361
      positionAbsolute:
        x: 5952
        y: 361
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "import json\n\ndef main(raw_input: str) -> dict:\n    \"\"\"\n    Desktop\
          \ Intelligence Protocol Parser v2.2 (Robust Mode)\n    Safe for both JSON\
          \ Protocol (Frontend) and Plain Text (Dify Debug).\n    \"\"\"\n    \n \
          \   # 1. „Éá„Éï„Ç©„É´„ÉàÂÄ§„ÅÆÂàùÊúüÂåñ (ÂÖ®„Å¶Á©∫ÊñáÂ≠ó)\n    extracted_text = \"\"\n    extracted_store_id\
          \ = \"\"\n    extracted_store_name = \"\"\n\n    # 2. ÂÖ•Âäõ„ÅåÁ©∫(None)„ÅÆÂ†¥Âêà„ÅÆ„Ç¨„Éº„Éâ\n\
          \    if raw_input is None:\n        return {\n            \"text\": \"\"\
          ,\n            \"gemini_store_id\": \"\",\n            \"gemini_store_name\"\
          : \"\"\n        }\n\n    # ÂÖ•Âäõ„ÇíÊñáÂ≠óÂàóÂåñ„Åó„Å¶„Å®„Çä„ÅÇ„Åà„Åö„ÉÜ„Ç≠„Çπ„Éà„Å®„Åó„Å¶‰øùÊåÅ („Éá„Éê„ÉÉ„Ç∞Áî®)\n    extracted_text\
          \ = str(raw_input)\n\n    try:\n        # 3. JSON„Éë„Éº„Çπ„ÅÆË©¶Ë°å\n        data =\
          \ json.loads(raw_input)\n        \n        # „Éë„Éº„ÇπÊàêÂäü„Åó„ÄÅ„Åã„Å§ËæûÊõ∏Âûã„Åß„ÅÇ„ÇãÂ†¥Âêà„ÅÆ„ÅøÊßãÈÄ†Ëß£Êûê„ÇíË°å„ÅÜ\n\
          \        if isinstance(data, dict):\n            \n            # --- Text\
          \ Extraction ---\n            # content„Ç≠„Éº„Åå„ÅÇ„Çä„ÄÅ„Åã„Å§ËæûÊõ∏Âûã„ÅÆÂ†¥Âêà\n            content_block\
          \ = data.get(\"content\")\n            if isinstance(content_block, dict):\n\
          \                extracted_text = content_block.get(\"text\", \"\")\n  \
          \          # „ÇÇ„Åócontent„ÅåÊñáÂ≠óÂàó„Å™„Çâ„Åù„Çå„ÇíÊé°Áî®\n            elif isinstance(content_block,\
          \ str):\n                extracted_text = content_block\n            \n\
          \            # --- Store ID Extraction ---\n            dify_inputs = data.get(\"\
          dify_inputs\")\n            # dify_inputs„ÅåËæûÊõ∏Âûã„Åß„ÅÇ„Çã„Åì„Å®„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åã„Çâ„Ç¢„ÇØ„Çª„Çπ („Åì„Åì„Åå„Ç®„É©„Éº„ÅÆÂéüÂõ†„Åß„Åó„Åü)\n\
          \            if isinstance(dify_inputs, dict):\n                if \"gemini_store_id\"\
          \ in dify_inputs:\n                    extracted_store_id = dify_inputs[\"\
          gemini_store_id\"]\n            \n            # Fallback to Context ID\n\
          \            if not extracted_store_id:\n                context = data.get(\"\
          context\")\n                if isinstance(context, dict):\n            \
          \        selected_ids = context.get(\"selected_store_ids\")\n          \
          \          if isinstance(selected_ids, list) and len(selected_ids) > 0:\n\
          \                        extracted_store_id = selected_ids[0]\n\n      \
          \      # --- Store Name Extraction ---\n            context = data.get(\"\
          context\")\n            if isinstance(context, dict):\n                selected_names\
          \ = context.get(\"selected_store_names\")\n                if isinstance(selected_names,\
          \ list) and len(selected_names) > 0:\n                    extracted_store_name\
          \ = selected_names[0]\n\n    except (json.JSONDecodeError, TypeError):\n\
          \        # JSON„Åß„Å™„ÅÑÂ†¥ÂêàÔºà„Éá„Éê„ÉÉ„Ç∞„Åß„ÅÆÁõ¥Êé•ÂÖ•Âäõ„Å™„Å©Ôºâ„ÅØ„ÄÅ\n        # extracted_text = raw_input\
          \ „ÅÆ„Åæ„ÅæÂá¶ÁêÜ„ÇíÁ∂öË°å„Åô„ÇãÔºà„Ç®„É©„Éº„Å´„Åó„Å™„ÅÑÔºâ\n        pass\n    except Exception as e:\n      \
          \  # „Åù„ÅÆ‰ªñ„ÅÆ‰∫àÊúü„Åõ„Å¨„Ç®„É©„Éº„ÅØ„É≠„Ç∞„Å´Âá∫„Åó„Å¶„ÄÅ„Éá„Éï„Ç©„É´„ÉàÂÄ§„ÇíËøî„Åô\n        print(f\"Parser Warning: {e}\"\
          )\n\n    # 4. ÁµêÊûú„ÅÆËøîÂç¥\n    return {\n        \"text\": extracted_text,\n \
          \       \"gemini_store_id\": extracted_store_id,\n        \"gemini_store_name\"\
          : extracted_store_name\n    }"
        code_language: python3
        outputs:
          gemini_store_id:
            children: null
            type: string
          gemini_store_name:
            children: null
            type: string
          text:
            children: null
            type: string
        selected: false
        title: PROTOCOL_PARSER
        type: code
        variables:
        - value_selector:
          - sys
          - query
          value_type: string
          variable: raw_input
      height: 52
      id: '1770869430347'
      position:
        x: 342
        y: 133
      positionAbsolute:
        x: 342
        y: 133
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: is
            id: 28b07bb7-7176-4a76-ab24-211983519237
            value: 'true'
            varType: string
            variable_selector:
            - '1761291739140'
            - rag_enabled
          id: 'true'
          logical_operator: and
        selected: false
        title: GATE_Check_Search_Mode
        type: if-else
      height: 124
      id: '1770871562386'
      position:
        x: 2816
        y: 115
      positionAbsolute:
        x: 2816
        y: 115
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        memory:
          query_prompt_template: '{{#sys.query#}}


            {{#sys.files#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: true
            size: 10
        model:
          completion_params: {}
          mode: chat
          name: gemini-2.5-flash-lite
          provider: langgenius/gemini/google
        prompt_template:
        - id: b695f1a9-a7a1-4314-b497-cf46a845994b
          role: system
          text: "# Role\n„ÅÇ„Å™„Åü„ÅØ„ÄÅ„É¶„Éº„Ç∂„Éº„ÅÆÂÖ•Âäõ„ÇíËß£Êûê„Åó„ÄÅÊúÄÈÅ©„Å™Âá¶ÁêÜ„Éï„É≠„Éº„ÇíÊ±∫ÂÆö„Åô„Çã„Äå„Ç§„É≥„ÉÜ„É≥„Éà„Éª„Ç¢„Éä„É™„Çπ„ÉàÔºàRAGÁâπÂåñ„É¢„Éº„ÉâÔºâ„Äç„Åß„Åô„ÄÇ\n\
            ÁèæÂú®„ÅÆË®≠ÂÆö„Åß„ÅØ **WebÊ§úÁ¥¢„ÅØÁÑ°ÂäπÂåñ (OFF)** „Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ\n„É¶„Éº„Ç∂„Éº„ÅÆË≥™Âïè„Åå„ÄåÈõëË´á„ÉªÂ±•Ê≠¥„Å∏„ÅÆË®ÄÂèä„Äç„Å™„ÅÆ„Åã„ÄÅ„Åù„Çå„Å®„ÇÇ„ÄåÁ§æÂÜÖ„Éâ„Ç≠„É•„É°„É≥„Éà(RAG)„ÅÆÊ§úÁ¥¢„ÅåÂøÖË¶Å„Äç„Å™„ÅÆ„Åã„ÇíÂé≥ÂØÜ„Å´Âà§ÂÆö„Åó„ÄÅJSONÂΩ¢Âºè„ÅßÂà∂Âæ°‰ø°Âè∑„ÇíÂá∫Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \n# Classification Rules (Strict RAG Mode)\n\n## 0. Context Binding (Highest\
            \ Priority: Store Content Analysis)\n**ÂÖ•Âäõ„Éá„Éº„Çø„Å´„Äå„Çπ„Éà„Ç¢ÂÜÖ„Éï„Ç°„Ç§„É´„ÅÆË¶ÅÁ¥ÑÊÉÖÂ†± (Content Summary)„Äç„ÅåÂ≠òÂú®„Åô„ÇãÂ†¥Âêà„ÄÅ‰ª•‰∏ã„ÅÆ„É´„Éº„É´„ÇíÁµ∂ÂØæÂÑ™ÂÖà„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ**\n\
            \n- **„Ç≥„É≥„ÉÜ„Ç≠„Çπ„Éà„ÅÆÂÖ∑‰ΩìÂåñ**:\n  - „Çπ„Éà„Ç¢Âêç„Å†„Åë„Åß„Å™„Åè„ÄÅ**Ë¶ÅÁ¥ÑÊÉÖÂ†±„Å´Âê´„Åæ„Çå„ÇãÂÖ∑‰ΩìÁöÑ„Å™„Äå„Éï„Ç°„Ç§„É´Âêç„Äç„ÇÑ„Äå„Éó„É≠„Ç∏„Çß„ÇØ„ÉàÂêç„Äç**„ÇíÊñáËÑà„Å®„Åó„Å¶Êé°Áî®„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \  - „É¶„Éº„Ç∂„Éº„Åå„Äå„Åì„Çå„Å´„Å§„ÅÑ„Å¶Êïô„Åà„Å¶„Äç„ÄåÊ¶ÇË¶Å„ÅØÔºü„Äç„Å®ÊõñÊòß„Å´Ë≥™Âïè„Åó„ÅüÂ†¥Âêà„ÄÅË¶ÅÁ¥ÑÊÉÖÂ†±ÂÜÖ„ÅßÊúÄ„ÇÇÈñ¢ÈÄ£ÊÄß„ÅÆÈ´ò„ÅÑ„Éï„Ç°„Ç§„É´„ÇÑ„Éà„Éî„ÉÉ„ÇØ„ÇíÁâπÂÆö„Åó„ÄÅ„Åù„Çå„Çí‰∏ªË™û„Å®„Åó„Å¶Ë£úÂÆå„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \n- **Ë≥™ÂïèÊñá„Å∏„ÅÆÂÜçÊßãÊàê (Context Injection)**:\n  - „É¶„Éº„Ç∂„Éº„ÅÆÂÖ•Âäõ: „ÄåÁµåË≤ª„Äç\n  - Ë¶ÅÁ¥ÑÊÉÖÂ†±: „ÄåÊóÖË≤ª‰∫§ÈÄöË≤ªË¶èÁ®ã_2024.pdf„Äç„ÄåÊé•ÂæÖ‰∫§ÈöõË≤ª„É´„Éº„É´.doc„Äç„ÅåÂê´„Åæ„Çå„Å¶„ÅÑ„Çã„ÄÇ\n\
            \  - **ÁîüÊàê„Åô„Åπ„Åç„ÇØ„Ç®„É™**: „ÄåÊóÖË≤ª‰∫§ÈÄöË≤ªË¶èÁ®ã„Åä„Çà„Å≥Êé•ÂæÖ‰∫§ÈöõË≤ª„É´„Éº„É´„Å´„Åä„Åë„Çã„ÄÅÁµåË≤ªÁ≤æÁÆó„ÅÆÊâãÈ†Ü„Å®‰∏äÈôêÈ°ç„ÅØ„Å©„ÅÜ„Å™„Å£„Å¶„ÅÑ„Åæ„Åô„ÅãÔºü„Äç\n \
            \ - ‚Äª„Åì„ÅÆ„Çà„ÅÜ„Å´„ÄÅÂçò„Å™„Çã„Ç≠„Éº„ÉØ„Éº„Éâ„Åß„ÅØ„Å™„Åè„ÄÅ**Ë¶ÅÁ¥ÑÊÉÖÂ†±„Å´„ÅÇ„ÇãÁî®Ë™û„Çí‰Ωø„Å£„ÅüÂÆåÂÖ®„Å™Ë≥™ÂïèÊñá**„Çí‰ΩúÊàê„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n## 1. Context\
            \ Check (History)\n**Ê§úÁ¥¢„ÇíÊ±∫ÂÆö„Åô„ÇãÂâç„Å´„ÄÅÂøÖ„Åö `Conversation History` „ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ**\n\
            - Áõ¥Ââç„ÅÆ‰ºöË©±„ÅÆ‰∏≠„Å´„ÄÅ„É¶„Éº„Ç∂„Éº„ÅÆË≥™Âïè„Å´ÂØæ„Åô„Çã„ÄåÊòéÁ¢∫„Å™Á≠î„Åà„Äç„ÅåÊó¢„Å´Âê´„Åæ„Çå„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÅØ„ÄÅ„Éâ„Ç≠„É•„É°„É≥„ÉàÊ§úÁ¥¢„ÇíË°å„Çè„Åö **CHAT** „ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \n## 2. Category Determination\n- **CHAT**: \n  - Êå®Êã∂„ÄÅ„ÅäÁ§º„ÄÅÊÑüÊÉÖÁöÑ„Å™ÂÖ±Êúâ„ÄÇ\n  - ‰ºöË©±Â±•Ê≠¥ÂÜÖ„ÅÆÊÉÖÂ†±„Å†„Åë„ÅßÂõûÁ≠îÂèØËÉΩ„Å™Ë≥™ÂïèÔºàÊ∑±Êéò„ÇäË≥™Âïè„ÇÑÂÜçÁ¢∫Ë™çÔºâ„ÄÇ\n\
            \  - AI„ÅÆ‰∏ÄËà¨Áü•Ë≠òÔºà„Ç≥„Éº„Éâ„ÅÆÊõ∏„ÅçÊñπ„ÄÅÁøªË®≥„ÄÅË¶ÅÁ¥Ñ„Å™„Å©Ôºâ„ÅßÂÆåÁµê„Åô„Çã„Çø„Çπ„ÇØÔºà‚Äª„Åü„Å†„Åó„ÄÅÂØæË±°„Çπ„Éà„Ç¢Âêç„Åå„ÅÇ„ÇãÂ†¥Âêà„ÅØTASK„ÇíÂÑ™ÂÖàÔºâ„ÄÇ\n- **TASK**:\
            \ \n  - Á§æÂÜÖË¶èÂÆö„ÄÅ„Éó„É≠„Ç∏„Çß„ÇØ„ÉàË≥áÊñô„ÄÅ„Éû„Éã„É•„Ç¢„É´Á≠â„ÅÆÁâπÂÆö„Éâ„Ç≠„É•„É°„É≥„Éà„Å´Èñ¢„Åô„ÇãË≥™Âïè„ÄÇ\n  - **„ÄåWeb„ÅßË™ø„Åπ„Å¶„Äç„Å®È†º„Åæ„Çå„ÅüÂ†¥Âêà„Åß„ÇÇ„ÄÅWebÊ§úÁ¥¢„ÅØÁÑ°Âäπ„Å™„Åü„ÇÅ„ÄÅ‰ª£„Çè„Çä„Å´Á§æÂÜÖ„Éä„É¨„ÉÉ„Ç∏„ÇíÊ§úÁ¥¢„Åô„Çã„Åã„ÄÅCHATÔºàÊ§úÁ¥¢‰∏çÂèØ„ÅÆÊó®„Çí‰ºù„Åà„ÇãÔºâ„ÇíÈÅ∏Êäû„Åô„ÇãÂà§Êñ≠„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ**\n\
            \n## 3. Requirements Flags\n- **requires_web**: **Always `false`** („Åì„ÅÆ„É¢„Éº„Éâ„Åß„ÅØWebÊ§úÁ¥¢„ÅØÁ¶ÅÊ≠¢„Åß„Åô)\n\
            - **requires_rag**: `true` if Category is TASK.\n\n# Output Requirements\
            \ (Field Mapping)\nÂá∫Âäõ„Åô„ÇãJSON„Å´„ÅØÂøÖ„Åö‰ª•‰∏ã„ÅÆ„Éï„Ç£„Éº„É´„Éâ„ÇíÂê´„ÇÅ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n1. `category`: \"\
            CHAT\", \"TASK\"\n2. `thinking`: \n   - „É¶„Éº„Ç∂„Éº„Å´ÂØæ„Åó„Å¶„ÄåÁä∂Ê≥Å„Å´Âêà„Çè„Åõ„ÅüÊå®Êã∂„Äç„Å®„ÄåÂÖ∑‰ΩìÁöÑ„Å™„Ç¢„ÇØ„Ç∑„Éß„É≥„Äç„ÇíÂãïÁöÑ„Å´ÂÆ£Ë®Ä„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \   - **Ë¶ÅÁ¥ÑÊÉÖÂ†±„ÇíÊ¥ªÁî®„Åó„Åü„Ç¢„ÇØ„Ç∑„Éß„É≥ÂÆ£Ë®Ä**:\n     - Âçò„Å´„ÄåÁ§æÂÜÖË≥áÊñô„ÇíÁ¢∫Ë™ç„Åó„Åæ„Åô„Äç„Å®„Åô„Çã„ÅÆ„Åß„ÅØ„Å™„Åè„ÄÅË¶ÅÁ¥ÑÊÉÖÂ†±„Å´Âü∫„Å•„Åç **„Äå[ÂÖ∑‰ΩìÁöÑ„Å™„Éï„Ç°„Ç§„É´Âêç„ÇÑ„Éà„Éî„ÉÉ„ÇØ]„ÅÆÂÜÖÂÆπ„ÇíÁ¢∫Ë™ç„Åó„Åæ„Åô„Äç**\
            \ „Å®ÂÆ£Ë®Ä„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n     - (‰æã: „Çπ„Éà„Ç¢Ë¶ÅÁ¥Ñ„Å´„ÄéÂ∞±Ê•≠Ë¶èÂâá„Äè„Åå„ÅÇ„ÇãÂ†¥Âêà ‚Üí \"Â∞±Ê•≠Ë¶èÂâá„Å´Âü∫„Å•„Åç„ÄÅ‰ºëÊöáÁî≥Ë´ã„ÅÆ„É´„Éº„É´„ÇíÁ¢∫Ë™ç„Åó„Åæ„Åô\\\
            U0001F4D6\")\n     - (‰æã: „Çπ„Éà„Ç¢Ë¶ÅÁ¥Ñ„Å´„ÄéProject-X‰ªïÊßòÊõ∏„Äè„Åå„ÅÇ„ÇãÂ†¥Âêà ‚Üí \"Project-X„ÅÆ‰ªïÊßòÊõ∏„Åã„Çâ„ÄÅÊäÄË°ìË¶Å‰ª∂„ÇíÊäΩÂá∫„Åó„Åæ„Åô\\\
            U0001F50D\")\n\n3. `requires_web`: boolean (Â∏∏„Å´ false)\n4. `requires_rag`:\
            \ boolean\n5. `search_query`: string\n   - RAGÊ§úÁ¥¢„ÅåÂøÖË¶Å„Å™Â†¥Âêà„ÄÅ„Éâ„Ç≠„É•„É°„É≥„Éà„Å´Âïè„ÅÑ„Åã„Åë„Çã**„ÄåÂÆåÂÖ®„Å™Ë≥™ÂïèÊñá„Äç**„ÇíÂá∫Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \   - **ÈáçË¶Å: Vocabulary Matching**:\n     - Ê§úÁ¥¢„Éí„ÉÉ„ÉàÁéá„ÇíÈ´ò„ÇÅ„Çã„Åü„ÇÅ„ÄÅ**„ÄåË¶ÅÁ¥ÑÊÉÖÂ†±„Äç„Å´Âê´„Åæ„Çå„Å¶„ÅÑ„ÇãÂ∞ÇÈñÄÁî®Ë™û„ÇÑÊ≠£ÂºèÂêçÁß∞**„ÇíÁ©çÊ•µÁöÑ„Å´„ÇØ„Ç®„É™„Å´Âê´„ÇÅ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \     - „É¶„Éº„Ç∂„Éº„Åå„Äå„É´„Éº„É´„Äç„Å®Ë®Ä„Å£„Å¶„ÇÇ„ÄÅË¶ÅÁ¥Ñ„Å´„Äå„Ç¨„Ç§„Éâ„É©„Ç§„É≥„Äç„Å®„ÅÇ„Çå„Å∞„Äå„Ç¨„Ç§„Éâ„É©„Ç§„É≥„Äç„Å®„ÅÑ„ÅÜË®ÄËëâ„Çí‰Ωø„Å£„Å¶Ê§úÁ¥¢„ÇØ„Ç®„É™„ÇíÊßãÊàê„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\
            \n\n# Output Format (JSON Only)\nÂøÖ„Åö `{` „ÅßÈñãÂßã„Åó `}` „ÅßÁµÇ‰∫Ü„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n#### Scenario\
            \ A: RAGÊ§úÁ¥¢„ÅåÂøÖË¶Å„Å™Â†¥Âêà („Çπ„Éà„Ç¢ÊåáÂÆö„ÅÇ„Çä)\n```json\n{\n  \"category\": \"TASK\",\n  \"\
            thinking\": \"ÊâøÁü•„ÅÑ„Åü„Åó„Åæ„Åó„Åü„ÄÇ[ÂØæË±°„Çπ„Éà„Ç¢Âêç]„ÅÆÂà©Áî®ÊñπÊ≥ï„Å´„Å§„ÅÑ„Å¶„ÄÅ„Éû„Éã„É•„Ç¢„É´„ÇíÁ¢∫Ë™ç„Åó„Åæ„Åô\U0001F50D\",\n  \"\
            requires_web\": false,\n  \"requires_rag\": true,\n  \"search_query\"\
            : \"[ÂØæË±°„Çπ„Éà„Ç¢Âêç]„ÅÆÂÖ∑‰ΩìÁöÑ„Å™Êìç‰ΩúÊâãÈ†Ü„ÇÑ‰Ωø„ÅÑÊñπ„ÅØ„Å©„ÅÆ„Çà„ÅÜ„Å™„ÇÇ„ÅÆ„Åß„Åô„ÅãÔºü\"\n}\n\n```\n\n#### Scenario B:\
            \ ÈõëË´á„Éª‰∏ÄËà¨Áü•Ë≠ò\n\n```json\n{\n  \"category\": \"CHAT\",\n  \"thinking\": \"\
            \",\n  \"requires_web\": false,\n  \"requires_rag\": false,\n  \"search_query\"\
            : \"\"\n}\n\n```\n"
        - id: ef524c95-4ecd-45de-9717-8e3d776e0ccc
          role: user
          text: '# Input Data

            ## User Query

            {{#1770869430347.text#}}


            ## Current Time

            {{#1761291739140.current_time#}}


            ## User Profile (Context)

            {{#1761291739140.system_prompt#}}

            ‚Äª„Åì„Åì„Å´„É¶„Éº„Ç∂„Éº„ÅÆÂêçÂâç(name)„ÇÑÂ±ûÊÄß„ÅåÂê´„Åæ„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ`thinking` „Éï„Ç£„Éº„É´„Éâ„ÅÆÁîüÊàêÊôÇ„Å´ÂèÇÁÖß„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ


            ## ÈÅ∏Êäû‰∏≠„ÅÆ„Éä„É¨„ÉÉ„Ç∏Ôºà„Ç≥„É≥„ÉÜ„Ç≠„Çπ„ÉàÔºâ


            ÂØæË±°„Çπ„Éà„Ç¢Âêç: {{#1770869430347.gemini_store_name#}}


            **‚ñº „Çπ„Éà„Ç¢ÂÜÖ„Éï„Ç°„Ç§„É´„ÅÆË¶ÅÁ¥ÑÊÉÖÂ†± (Content Summary)**

            {{#1771391749204.text#}}


            (‚Äª‰∏äË®ò„ÅÆ„ÄåË¶ÅÁ¥ÑÊÉÖÂ†±„Äç„Å´„Éï„Ç°„Ç§„É´‰∏ÄË¶ß„ÇÑÊ¶ÇË¶Å„ÅåË®òËºâ„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ„É¶„Éº„Ç∂„Éº„ÅÆË≥™Âïè„Åå„ÄÅ„Åì„ÅÆ‰∏≠„ÅÆ„Å©„ÅÆ„Éï„Ç°„Ç§„É´„ÇÑ„Éà„Éî„ÉÉ„ÇØ„Å´Èñ¢ÈÄ£„Åô„Çã„Åã„ÇíÁâπÂÆö„Åó„ÄÅÊÄùËÄÉ„Éó„É≠„Çª„Çπ„Å®Ê§úÁ¥¢„ÇØ„Ç®„É™„Å´ÂèçÊò†„Åï„Åõ„Å¶„Åè„Å†„Åï„ÅÑ)


            ## Conversation History (Context)

            ‚Äª‰ºöË©±Â±•Ê≠¥„Åã„Çâ„ÄåÂàùÂõû„Åã„Å©„ÅÜ„Åã„Äç„ÇÑ„ÄåÊñáËÑà„Äç„ÇíÂà§Êñ≠„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ'
        selected: true
        title: LLM_Intent_Analysis
        type: llm
        vision:
          enabled: false
      height: 88
      id: '17708716964770'
      position:
        x: 3560.7220287518776
        y: 261
      positionAbsolute:
        x: 3560.7220287518776
        y: 261
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        output_type: string
        selected: false
        title: intent_result
        type: variable-aggregator
        variables:
        - - '17708716964770'
          - text
        - - '17683770269110'
          - text
      height: 134
      id: '1770871743875'
      position:
        x: 3840
        y: 125
      positionAbsolute:
        x: 3840
        y: 125
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "import json\nimport re\n\ndef main(intent_json: str) -> dict:\n   \
          \ \"\"\"\n    LLM„ÅÆÊÑèÂõ≥Ëß£ÈáàJSON„Åã„Çâ„ÄÅÊúÄÈÅ©Âåñ„Åï„Çå„ÅüÊ§úÁ¥¢„ÇØ„Ç®„É™(search_query)„ÇíÊäΩÂá∫„Åô„Çã„ÄÇ\n    JSON„Éë„Éº„Çπ„Å´Â§±Êïó„Åó„ÅüÂ†¥Âêà„ÇÑsearch_query„ÅåÁ©∫„ÅÆÂ†¥Âêà„ÅØ„ÄÅÂÆâÂÖ®Á≠ñ„Å®„Åó„Å¶Á©∫ÊñáÂ≠ó„ÇíËøî„Åô„ÄÇ\n\
          \    \"\"\"\n    extracted_query = \"\"\n    \n    try:\n        # Markdown„Ç≥„Éº„Éâ„Éñ„É≠„ÉÉ„ÇØË®òÊ≥ï„ÅÆÈô§Âéª\
          \ (```json ... ```)\n        clean_text = re.sub(r'```(?:json)?\\s*|\\s*```',\
          \ '', intent_json.strip())\n        \n        # JSON„Éë„Éº„Çπ\n        data =\
          \ json.loads(clean_text)\n        \n        # search_query„ÅÆÊäΩÂá∫\n        if\
          \ isinstance(data, dict):\n            extracted_query = data.get('search_query',\
          \ '')\n            \n    except Exception as e:\n        # „Ç®„É©„ÉºÊôÇ„ÅØ„É≠„Ç∞„Å´Âá∫„Åó„Å¶„Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØ\n\
          \        print(f\"JSON Parse Error: {e}\")\n        extracted_query = \"\
          \"\n\n    return {\n        \"q\": extracted_query\n    }"
        code_language: python3
        outputs:
          q:
            children: null
            type: string
        selected: false
        title: CODE_Extract_RAG_Query
        type: code
        variables:
        - value_selector:
          - '1770871743875'
          - output
          value_type: string
          variable: intent_json
      height: 52
      id: '1770962567547'
      position:
        x: 5268
        y: 377
      positionAbsolute:
        x: 5268
        y: 377
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        is_team_authorization: true
        paramSchemas:
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: The name of the file search store to search in (e.g., fileSearchStores/abc123)
            ja_JP: 'Ê§úÁ¥¢ÂØæË±°„ÅÆ„Éï„Ç°„Ç§„É´Ê§úÁ¥¢„Çπ„Éà„Ç¢ÂêçÔºà‰æã: fileSearchStores/abc123Ôºâ'
            pt_BR: The name of the file search store to search in (e.g., fileSearchStores/abc123)
            zh_Hans: Ë¶ÅÊêúÁ¥¢ÁöÑÊñá‰ª∂ÊêúÁ¥¢Â≠òÂÇ®ÂêçÁß∞Ôºà‰æãÂ¶ÇÔºöfileSearchStores/abc123Ôºâ
          label:
            en_US: Store Name
            ja_JP: „Çπ„Éà„Ç¢Âêç
            pt_BR: Store Name
            zh_Hans: Â≠òÂÇ®ÂêçÁß∞
          llm_description: File search store name to query
          max: null
          min: null
          name: file_search_store_name
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: The search query or question to ask about the documents
            ja_JP: „Éâ„Ç≠„É•„É°„É≥„Éà„Å´„Å§„ÅÑ„Å¶Â∞ã„Å≠„ÇãÊ§úÁ¥¢„ÇØ„Ç®„É™„Åæ„Åü„ÅØË≥™Âïè
            pt_BR: The search query or question to ask about the documents
            zh_Hans: Ë¶ÅËØ¢ÈóÆÊñáÊ°£ÁöÑÊêúÁ¥¢Êü•ËØ¢ÊàñÈóÆÈ¢ò
          label:
            en_US: Query
            ja_JP: „ÇØ„Ç®„É™
            pt_BR: Query
            zh_Hans: Êü•ËØ¢
          llm_description: Search query or question
          max: null
          min: null
          name: query
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: 'Include citation information in the response (default: false)'
            ja_JP: '„É¨„Çπ„Éù„É≥„Çπ„Å´Âá∫ÂÖ∏ÊÉÖÂ†±„ÇíÂê´„ÇÅ„ÇãÔºà„Éá„Éï„Ç©„É´„Éà: falseÔºâ'
            pt_BR: 'Include citation information in the response (default: false)'
            zh_Hans: Âú®ÂìçÂ∫î‰∏≠ÂåÖÂê´ÂºïÁî®‰ø°ÊÅØÔºàÈªòËÆ§ÔºöfalseÔºâ
          label:
            en_US: Include Citations
            ja_JP: Âá∫ÂÖ∏„ÇíÂê´„ÇÅ„Çã
            pt_BR: Include Citations
            zh_Hans: ÂåÖÂê´ÂºïÁî®
          llm_description: Whether to include grounding metadata
          max: null
          min: null
          name: include_citations
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: boolean
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Optional filter expression (e.g., "author=John Doe") to search
              within a subset of documents
            ja_JP: „Éâ„Ç≠„É•„É°„É≥„Éà„ÅÆ„Çµ„Éñ„Çª„ÉÉ„ÉàÂÜÖ„ÇíÊ§úÁ¥¢„Åô„Çã„Ç™„Éó„Ç∑„Éß„É≥„ÅÆ„Éï„Ç£„É´„ÇøÂºèÔºà‰æãÔºö„Äåauthor=John Doe„ÄçÔºâ
            pt_BR: Optional filter expression (e.g., "author=John Doe") to search
              within a subset of documents
            zh_Hans: ÂèØÈÄâÁöÑËøáÊª§Âô®Ë°®ËææÂºèÔºà‰æãÂ¶ÇÔºö"author=John Doe"Ôºâ‰ª•Âú®ÊñáÊ°£Â≠êÈõÜ‰∏≠ÊêúÁ¥¢
          label:
            en_US: Metadata Filter
            ja_JP: „É°„Çø„Éá„Éº„Çø„Éï„Ç£„É´„Çø
            pt_BR: Metadata Filter
            zh_Hans: ÂÖÉÊï∞ÊçÆËøáÊª§Âô®
          llm_description: Optional metadata filter for scoped search
          max: null
          min: null
          name: metadata_filter
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Gemini model to use (defaults to provider setting or gemini-2.5-flash)
            ja_JP: ‰ΩøÁî®„Åô„ÇãGemini„É¢„Éá„É´Ôºà„Éó„É≠„Éê„Ç§„ÉÄ„ÉºË®≠ÂÆö„Åæ„Åü„ÅØgemini-2.5-flash„Åå„Éá„Éï„Ç©„É´„ÉàÔºâ
            pt_BR: Gemini model to use (defaults to provider setting or gemini-2.5-flash)
            zh_Hans: Ë¶Å‰ΩøÁî®ÁöÑGeminiÊ®°ÂûãÔºàÈªòËÆ§‰∏∫Êèê‰æõÂïÜËÆæÁΩÆÊàñgemini-2.5-flashÔºâ
          label:
            en_US: Model
            ja_JP: „É¢„Éá„É´
            pt_BR: Model
            zh_Hans: Ê®°Âûã
          llm_description: Optional model override
          max: null
          min: null
          name: model
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        params:
          file_search_store_name: ''
          include_citations: ''
          metadata_filter: ''
          model: ''
          query: ''
        plugin_id: r3-yamauchi/gemini_file_search
        plugin_unique_identifier: r3-yamauchi/gemini_file_search:0.0.1@a9cf50b020b00b20f3b3f462d697f797517551d5d8bb8bf7ef078847080cabeb
        provider_icon: https://cloud.dify.ai/console/api/workspaces/current/plugin/icon?tenant_id=7c8ea1f1-d371-448a-846c-af9a868d7d0f&filename=3f9d718ced2ecb925cbe752d6311f3966405463315b8e898110f0a8cca969899.svg
        provider_id: r3-yamauchi/gemini_file_search/gemini_file_search
        provider_name: r3-yamauchi/gemini_file_search/gemini_file_search
        provider_type: builtin
        selected: false
        title: ÊåáÂÆö„Åï„Çå„Åü„Çπ„Éà„Ç¢„ÅÆË¶ÅÁ¥Ñ
        tool_configurations: {}
        tool_description: Gemini„ÅÆ RAGÊ©üËÉΩ„Çí‰ΩøÁî®„Åó„Å¶„ÄÅ„Éï„Ç°„Ç§„É´Ê§úÁ¥¢„Çπ„Éà„Ç¢ÂÜÖ„ÅÆ„Ç§„É≥„Éá„ÉÉ„ÇØ„ÇπÂåñ„Åï„Çå„Åü„Éâ„Ç≠„É•„É°„É≥„ÉàÂÖ®‰Ωì„Åß„Çª„Éû„É≥„ÉÜ„Ç£„ÉÉ„ÇØÊ§úÁ¥¢„ÇíÂÆüË°å„Åó„Åæ„Åô
        tool_label: „Éï„Ç°„Ç§„É´Ê§úÁ¥¢„Çπ„Éà„Ç¢„ÇíÊåáÂÆö„Åó„Å¶Ê§úÁ¥¢
        tool_name: search
        tool_node_version: '2'
        tool_parameters:
          file_search_store_name:
            type: mixed
            value: '{{#1770869430347.gemini_store_id#}}'
          include_citations:
            type: constant
            value: null
          metadata_filter:
            type: mixed
            value: null
          model:
            type: mixed
            value: gemini-2.5-flash
          query:
            type: mixed
            value: "ÂÖ®„Éï„Ç°„Ç§„É´„ÇíÂàÜÊûê„Åó„ÄÅË¶ÅÁ¥Ñ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n„ÄêÊåáÁ§∫„Äë\n1. „Éï„Ç°„Ç§„É´‰∏ÄË¶ß„ÇíÁÆáÊù°Êõ∏„Åç„ÅßÂàóÊåôÔºà„Éï„Ç°„Ç§„É´Âêç„ÅÆ„ÅøÔºâ\n2. ÂêÑ„Éï„Ç°„Ç§„É´„ÅÆÂÜÖÂÆπ„Çí„Äå1„Éï„Ç°„Ç§„É´1Êñá„Äç„ÅßË¶ÅÁ¥Ñ\n\
              3. ÊúÄÂæå„Å´ÂÖ®‰Ωì„ÅÆ„ÉÜ„Éº„Éû„Çí„Äå1Êñá„Äç„ÅßË®òËø∞\n\n„ÄêÂá∫ÂäõÂΩ¢Âºè„Äë\n- „Éï„Ç°„Ç§„É´1: [„Éï„Ç°„Ç§„É´Âêç]\n  [1Êñá„ÅÆË¶ÅÁ¥Ñ]\n- „Éï„Ç°„Ç§„É´2:\
              \ [„Éï„Ç°„Ç§„É´Âêç]\n  [1Êñá„ÅÆË¶ÅÁ¥Ñ]\n...\nÂÖ®‰Ωì„ÉÜ„Éº„Éû: [1Êñá]"
        type: tool
      height: 52
      id: '1771391749204'
      position:
        x: 3182.6105406120787
        y: 222.51186735069535
      positionAbsolute:
        x: 3182.6105406120787
        y: 222.51186735069535
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    viewport:
      x: -1027.5415714884289
      y: 153.86853710089085
      zoom: 0.8705505632961243
  rag_pipeline_variables: []

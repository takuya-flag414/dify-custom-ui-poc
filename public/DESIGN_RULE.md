# Learning Next Design System v2.0 (Intelligence Era)

## 0. はじめに

本ドキュメントは、「社内AIチャットボット」におけるデザインと実装の絶対的なルールセットである。
Apple Human Interface Guidelines (HIG) の最新解釈に基づき、**「静的な管理画面」ではなく「知性あるパートナー」**としてのUIを構築するための仕様を定義する。

**全開発者は本ドキュメントを「唯一の正解」として扱い、個人の感覚によるスタイル変更を禁ずる。**

---

## 1. デザイン哲学 (Core Philosophy)

### 1.1 Defer to Content (コンテンツへの追従)

UIは透明であり、ユーザーとAIの対話を妨げてはならない。

- **不可視のインターフェース:** 「枠線」や「区切り線」で領域を分けるのではなく、「余白」と「背景の明度差」でグルーピングを行う。
- **プログレッシブ・ディスクロージャー:** 送信ボタンやファイル添付アイコンは、常時表示せず、ユーザーがアクションを起こそうとした瞬間（入力開始時など）に有機的に出現させる。

### 1.2 Depth & Material (奥行きと素材)

画面は2次元の平面ではなく、無限の奥行きを持つ空間である。

- **Glassmorphism:** 背景を塗りつぶさず、すりガラス（Blur + Saturation）のように透過させ、背後にあるコンテキスト（文脈）を感じさせる。
- **Luminescence:** 「影（Shadow）」は最小限に留め、「光（Glow）」を用いてアクティブな状態や知性を表現する。

### 1.3 Fluidity (流動性)

状態変化は「切り替え（Switch）」ではなく「変形（Morph）」である。

- **Spring Physics:** アニメーションには物理演算（バネの挙動）を取り入れ、機械的な等速運動を排除する。
- **Liquid State:** AIの思考中や待機状態は、静止画ではなく、常に緩やかに動く流体グラデーションで表現する。

---

## 2. カラーシステム (OKLCH)

従来のRGB/Hexではなく、人間の目の知覚に基づいた **OKLCH色空間** を全面的に採用する。これにより、ライト/ダークモード間で「輝度」のみを調整し、「色味」を維持することが可能になる。

### 2.1 セマンティックパレット (Design Tokens)

`tailwind.config.js` および CSS変数として以下を定義し、ハードコード（#ffffff等）を禁止する。

| トークン名 | Light Mode (OKLCH) | Dark Mode (OKLCH) | 用途・意図 |
| :--- | :--- | :--- | :--- |
| `--bg-base` | `99% 0 0` (White) | `0% 0 0` (Black) | アプリ全体の最背面。 |
| `--bg-layer-1` | `98% 0 0` | `18% 0 0` | サイドバー、カード背景。 |
| `--bg-layer-2` | `100% 0 0` | `25% 0 0` | 最前面のカード、入力エリア。 |
| `--color-primary` | `60% 0.2 250` (Vivid Blue) | `65% 0.2 250` (Bright Blue) | ユーザーの吹き出し、主要ボタン。 |
| `--color-text-main` | `20% 0 0` (Dark Gray) | `98% 0 0` (Off White) | 本文。純粋な黒(#000)は使用しない。 |
| `--color-text-sub` | `55% 0 0` | `65% 0 0` | 補足、タイムスタンプ。 |
| `--color-border` | `92% 0 0` | `25% 0 0` | **極力使用しない。** 必要な場合のみ。 |

### 2.2 実装ルール

- **純黒禁止:** `#000000` はコントラストが強すぎるため、テキストには使用しない（背景としてはOLED対応のため許容）。
- **ダークモードの原則:** 単なる色の反転ではない。「手前にあるものほど明るく、奥にあるものほど暗い」という光源のルールに従う。

---

## 3. タイポグラフィ (Typography)

Webフォントには **Inter** (または Apple System Font) を採用する。
可読性を最優先し、一般的なWebサイトよりも「大きく」「ゆったり」とした設定を行う。

### 3.1 スケールとトラッキング

| 役割 | サイズ | Line Height | Tracking (字間) | Weight |
| :--- | :--- | :--- | :--- | :--- |
| **Large Title** | `34px` | `1.2` | `-0.022em` (Tight) | Bold (700) |
| **Title 2** | `22px` | `1.3` | `-0.015em` | Semibold (600) |
| **Body (Main)** | **17px** | `1.5` | `-0.01em` (Normal) | Regular (400) |
| **Caption** | `13px` | `1.4` | `+0.01em` (Wide) | Medium (500) |
| **Button** | `17px` | `1.0` | `0` | Semibold (600) |

### 3.2 実装ルール

- **ベースサイズ:** 本文（チャットメッセージ）は必ず **17px** とする。16pxや14pxは情報量が多い管理画面向けであり、対話型UIには小さすぎる。
- **階層表現:** サイズだけでなく、Weight（太さ）とColor（濃淡）で情報の優先順位をつける。

---

## 4. マテリアル & エフェクト (Materials)

Apple製品のような「質感」をWebで再現するためのCSSクラス定義。

### 4.1 Glass Panel (すりガラス)

背景を透過させ、背後のコンテンツをぼかす。入力エリアやヘッダーに使用。

```css
.material-glass {
  background: rgba(255, 255, 255, 0.7); /* Dark: rgba(30, 30, 30, 0.6) */
  backdrop-filter: blur(25px) saturate(180%);
  -webkit-backdrop-filter: blur(25px) saturate(180%);
  border: 1px solid rgba(255, 255, 255, 0.2); /* 境界をわずかに強調 */
}

```

### 4.2 AI Glow (知性の発光)

AIが思考中、または入力待機中のアクティブな要素に適用。

```css
.effect-glow {
  box-shadow: 
    inset 0 0 20px rgba(59, 130, 246, 0.2), /* 内側の発光 */
    0 0 15px rgba(59, 130, 246, 0.3),       /* 外側の滲み */
    0 0 40px rgba(59, 130, 246, 0.1);       /* アンビエント */
  transition: box-shadow 0.3s ease;
}

```

### 4.3 Squircle (滑らかな角丸)

- **基本ルール:** `border-radius` を使用するが、要素のサイズに応じて半径を可変させる。
- **チャットバブル:** `rounded-2xl` (20px) 以上。
- **カード/パネル:** `rounded-3xl` (24px)。
- **ボタン:** `rounded-full` (完全な円)。
- **意図:** 角張った形状（半径4px〜8px）は「事務的なツール」の印象を与えるため、極力避ける。

---

## 5. コンポーネント設計仕様

### 5.1 チャットメッセージ (Message Bubble)

情報の塊ではなく、会話の流れとしてデザインする。

- **User (右側):**
- **背景:** `--color-primary` のグラデーション（Indigo to Cyan）。
- **テキスト:** 白固定（ダークモードでも白）。
- **形状:** 右上のみ `rounded-sm`、他は `rounded-2xl`。

- **AI (左側):**
- **背景:** 透明 または `.material-glass`。
- **テキスト:** `--color-text-main`。
- **形状:** 左上のみ `rounded-sm`、他は `rounded-2xl`。
- **思考インジケーター:** スピナー禁止。「流体グラデーション（Fluid Orb）」のアニメーションを表示。

### 5.2 入力エリア (Floating Capsule)

- **配置:** 画面最下部に固定せず、コンテンツの上に浮遊させる（マージンを持たせる）。
- **形状:** `rounded-3xl` 以上の大きな角丸。
- **挙動:**
- フォーカス時：`.effect-glow` が作動し、わずかに拡大する。
- 入力中：送信ボタンがフェードインする。

### 5.3 メタデータ (出典・提案)

- **出典 (Footnotes):**
- メッセージ本文の下に羅列せず、ポップオーバーやアコーディオンで「隠す」ことを基本とする。
- アイコンはファイル形式ごとに色分けする（PDF=赤, Word=青）。

- **プロアクティブ提案:**
- メッセージフローの外側に配置。
- `border` のみのGhostスタイルを採用し、視覚的なノイズを減らす。

---

## 6. モーション & インタラクション

### 6.1 物理ベースのアニメーション (Spring Physics)

Framer Motion 等を使用し、以下のパラメータを適用する。

```javascript
// 標準的なスプリング設定
const springConfig = {
  type: "spring",
  stiffness: 170, // 剛性：高いほどキビキビ動く
  damping: 26,    // 減衰：低いと振動する
  mass: 1         // 質量
};

```

### 6.2 マイクロインタラクション

- **Hover:** 色を変えるのではなく、`scale(1.02)` でわずかに持ち上げ、輝度（Brightness）を上げる。
- **Tap/Click:** `scale(0.95)` で押し込まれる感覚を与える。
- **List Item:** 出現時、一斉に表示せず、`staggerChildren: 0.05` でわずかな時間差をつけて順番に表示する。

---

## 7. 実装チェックリスト

コードレビュー時、以下の項目を満たしているか確認すること。

- [ ] **色のハードコード禁止:** `bg-white`, `text-black`, `#333` 等を使用していないか。必ず定義済みのセマンティック変数を使用しているか。
- [ ] **8の倍数:** マージンやパディングが `8px` (0.5rem) の倍数になっているか。
- [ ] **17pxルール:** メッセージ本文のフォントサイズが `17px` になっているか。
- [ ] **タッチターゲット:** ボタンやリンクのクリック領域が `44x44px` 以上確保されているか。
- [ ] **エラー時の挙動:** APIエラー時、単なるアラートではなく、ユーザーがリカバリーできる（リトライボタン等）UIになっているか。
- [ ] **素材の統一:** 画面内で「すりガラス」と「塗りつぶし」が不自然に混在していないか。

---

## 8. Tailwind Config Reference

プロジェクトの `tailwind.config.js` には以下を含めること。

```javascript
export default {
  theme: {
    extend: {
      colors: {
        bg: {
          base: 'var(--bg-base)',
          layer1: 'var(--bg-layer-1)',
          surface: 'var(--bg-layer-2)',
        },
        text: {
          main: 'var(--color-text-main)',
          sub: 'var(--color-text-sub)',
        },
        ai: {
          primary: 'var(--color-primary)',
        }
      },
      fontFamily: {
        sans: ['Inter', '-apple-system', 'BlinkMacSystemFont', 'sans-serif'],
      },
      fontSize: {
        body: ['17px', '1.5'],
      },
      borderRadius: {
        '4xl': '2rem',
        'capsule': '9999px',
      },
      boxShadow: {
        'glow': 'inset 0 0 20px rgba(59, 130, 246, 0.2), 0 0 15px rgba(59, 130, 246, 0.3)',
      }
    }
  }
}

```

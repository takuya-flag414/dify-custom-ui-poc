app:
  description: ç¤¾å†…AIãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆé–‹ç™º (Phase 1) ã€‚
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  mode: advanced-chat
  name: HybridQA
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/openai:0.2.6@e2665624a156f52160927bceac9e169bd7e5ae6b936ae82575e14c90af390e6e
    version: null
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/perplexity:1.0.1@32531e4a1ec68754e139f29f04eaa7f51130318a908d11382a27dc05ec8d91e3
    version: null
kind: app
version: 0.5.0
workflow:
  conversation_variables:
  - description: ''
    id: 6a708509-1da6-4c64-9f59-3667ae436705
    name: context_file_name
    selector:
    - conversation
    - context_file_name
    value: ''
    value_type: string
  - description: æœ€é©åŒ–ã•ã‚ŒãŸæ¤œç´¢ã‚¯ã‚¨ãƒª
    id: f7d8ed98-9085-43e4-adda-9558b3de8f52
    name: optimized_search_query
    selector:
    - conversation
    - optimized_search_query
    value: ''
    value_type: string
  - description: Webæ¤œç´¢çµæœ
    id: 38630ad2-9d96-475b-8daa-fca4012bf7e3
    name: context_web
    selector:
    - conversation
    - context_web
    value: ''
    value_type: string
  - description: RAGæ¤œç´¢çµæœ
    id: ee471556-3e5c-4c12-8e2f-a89b3aab8423
    name: context_rag
    selector:
    - conversation
    - context_rag
    value: ''
    value_type: string
  - description: ãƒ•ã‚¡ã‚¤ãƒ«æŠ½å‡ºãƒ†ã‚­ã‚¹ãƒˆ
    id: b72b2f7b-8ca9-478d-9e1e-13e88c074c9e
    name: context_file
    selector:
    - conversation
    - context_file
    value: []
    value_type: array[string]
  - description: ''
    id: f21ecbed-b927-4f77-b16d-edc5d6b50621
    name: input_perplexity
    selector:
    - conversation
    - input_perplexity
    value: ''
    value_type: string
  - description: ''
    id: dc709b28-a14d-4585-960c-64cb3857a97a
    name: extracted_text
    selector:
    - conversation
    - extracted_text
    value: ''
    value_type: string
  - description: ''
    id: d3a4c143-2880-43da-9954-dc5984ff034a
    name: temp_result
    selector:
    - conversation
    - temp_result
    value: ''
    value_type: string
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - document
      allowed_file_upload_methods:
      - remote_url
      - local_file
      enabled: true
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_batch_limit: 10
        image_file_size_limit: 10
        single_chunk_attachment_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 5
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: true
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInLoop: false
        sourceType: start
        targetType: if-else
      id: 1761291739140-source-1762490237953-target
      selected: false
      source: '1761291739140'
      sourceHandle: source
      target: '1762490237953'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: document-extractor
      id: 1764913411735-true-1764913700839-target
      selected: false
      source: '1764913411735'
      sourceHandle: 'true'
      target: '1764913700839'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: assigner
        targetType: if-else
      id: 1764913830165-source-1764914026588-target
      selected: false
      source: '1764913830165'
      sourceHandle: source
      target: '1764914026588'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: assigner
      id: 1764914026588-true-1764914113059-target
      selected: false
      source: '1764914026588'
      sourceHandle: 'true'
      target: '1764914113059'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: assigner
      id: 1764914026588-false-1764914133340-target
      selected: false
      source: '1764914026588'
      sourceHandle: 'false'
      target: '1764914133340'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: tool
      id: 1764914157100-true-1764914255107-target
      selected: false
      source: '1764914157100'
      sourceHandle: 'true'
      target: '1764914255107'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: tool
        targetType: assigner
      id: 1764914255107-source-1764914281874-target
      selected: false
      source: '1764914255107'
      sourceHandle: source
      target: '1764914281874'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: assigner
      id: 1764914157100-false-1764914726017-target
      selected: false
      source: '1764914157100'
      sourceHandle: 'false'
      target: '1764914726017'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: answer
      id: 1762490237953-true-answer-target
      selected: false
      source: '1762490237953'
      sourceHandle: 'true'
      target: answer
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: assigner
      id: 1764916701592-source-1764916740679-target
      selected: false
      source: '1764916701592'
      sourceHandle: source
      target: '1764916740679'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: document-extractor
        targetType: code
      id: 1764913700839-source-1764924171081-target
      selected: false
      source: '1764913700839'
      sourceHandle: source
      target: '1764924171081'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: assigner
      id: 1764924171081-source-1764913830165-target
      selected: false
      source: '1764924171081'
      sourceHandle: source
      target: '1764913830165'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: assigner
        targetType: llm
      id: 1764914113059-source-1764916701592-target
      selected: false
      source: '1764914113059'
      sourceHandle: source
      target: '1764916701592'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: assigner
        targetType: llm
      id: 1764914133340-source-1764916701592-target
      selected: false
      source: '1764914133340'
      sourceHandle: source
      target: '1764916701592'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: assigner
        targetType: llm
      id: 1764916740679-source-1764914312443-target
      selected: false
      source: '1764916740679'
      sourceHandle: source
      target: '1764914312443'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: if-else
      id: 1765343666910-false-1764914157100-target
      selected: false
      source: '1765343666910'
      sourceHandle: 'false'
      target: '1764914157100'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: tool
      id: 1764914157100-1db66d52-c4bb-4b05-a087-6a73781c2d5b-1764914255107-target
      selected: false
      source: '1764914157100'
      sourceHandle: 1db66d52-c4bb-4b05-a087-6a73781c2d5b
      target: '1764914255107'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 1765256779030-source-1765345427966-target
      selected: false
      source: '1765256779030'
      sourceHandle: source
      target: '1765345427966'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: if-else
      id: 1764914312443-source-1765343666910-target
      selected: false
      source: '1764914312443'
      sourceHandle: source
      target: '1765343666910'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: assigner
        targetType: code
      id: 1764914726017-source-1765514869301-target
      selected: false
      source: '1764914726017'
      sourceHandle: source
      target: '1765514869301'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: assigner
        targetType: code
      id: 1764914281874-source-1765514869301-target
      selected: false
      source: '1764914281874'
      sourceHandle: source
      target: '1765514869301'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: if-else
      id: 1765514869301-source-1765515071449-target
      selected: false
      source: '1765514869301'
      sourceHandle: source
      target: '1765515071449'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 17655151756460-source-1765345440190-target
      selected: false
      source: '17655151756460'
      sourceHandle: source
      target: '1765345440190'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 17655151779960-source-17655153615920-target
      selected: false
      source: '17655151779960'
      sourceHandle: source
      target: '17655153615920'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 17655151786270-source-17655153626170-target
      selected: false
      source: '17655151786270'
      sourceHandle: source
      target: '17655153626170'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 17655151791010-source-17655153635450-target
      selected: false
      source: '17655151791010'
      sourceHandle: source
      target: '17655153635450'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: if-else
      id: 1764913411735-false-1764914026588-target
      selected: false
      source: '1764913411735'
      sourceHandle: 'false'
      target: '1764914026588'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: if-else
      id: 1762490237953-false-1765854025663-target
      selected: false
      source: '1762490237953'
      sourceHandle: 'false'
      target: '1765854025663'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: if-else
      id: 1765854025663-false-1764913411735-target
      selected: false
      source: '1765854025663'
      sourceHandle: 'false'
      target: '1764913411735'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 1765854614015-source-1765854668107-target
      selected: false
      source: '1765854614015'
      sourceHandle: source
      target: '1765854668107'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: if-else
      id: 1765854025663-true-17658598785120-target
      selected: false
      source: '1765854025663'
      sourceHandle: 'true'
      target: '17658598785120'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: document-extractor
      id: 17658598785120-true-17658598785131-target
      selected: false
      source: '17658598785120'
      sourceHandle: 'true'
      target: '17658598785131'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: document-extractor
        targetType: code
      id: 17658598785131-source-17658598785133-target
      selected: false
      source: '17658598785131'
      sourceHandle: source
      target: '17658598785133'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: assigner
      id: 17658598785133-source-17658598785132-target
      selected: false
      source: '17658598785133'
      sourceHandle: source
      target: '17658598785132'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 17658599307650-source-1765859958399-target
      selected: false
      source: '17658599307650'
      sourceHandle: source
      target: '1765859958399'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: assigner
        targetType: if-else
      id: 17658598785132-source-1766549782668-target
      selected: false
      source: '17658598785132'
      sourceHandle: source
      target: '1766549782668'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: if-else
      id: 17658598785120-0703a046-f8f7-4b0e-b07b-3794eaee8f40-1766549782668-target
      selected: false
      source: '17658598785120'
      sourceHandle: 0703a046-f8f7-4b0e-b07b-3794eaee8f40
      target: '1766549782668'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 1766549782668-true-1765854614015-target
      selected: false
      source: '1766549782668'
      sourceHandle: 'true'
      target: '1765854614015'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 1766549782668-false-17665499392760-target
      selected: false
      source: '1766549782668'
      sourceHandle: 'false'
      target: '17665499392760'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 17665499392760-source-1765854668107-target
      selected: false
      source: '17665499392760'
      sourceHandle: source
      target: '1765854668107'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: if-else
      id: 17658598785120-false-17665500741430-target
      selected: false
      source: '17658598785120'
      sourceHandle: 'false'
      target: '17665500741430'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 17665500741430-true-17658599307650-target
      selected: false
      source: '17665500741430'
      sourceHandle: 'true'
      target: '17658599307650'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 17665500741430-false-17665500976990-target
      selected: false
      source: '17665500741430'
      sourceHandle: 'false'
      target: '17665500976990'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 17665500976990-source-1765859958399-target
      selected: false
      source: '17665500976990'
      sourceHandle: source
      target: '1765859958399'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: if-else
      id: 1765515071449-true-17665510905650-target
      selected: false
      source: '1765515071449'
      sourceHandle: 'true'
      target: '17665510905650'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 17665510905650-true-17655151756460-target
      selected: false
      source: '17665510905650'
      sourceHandle: 'true'
      target: '17655151756460'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: if-else
      id: 1765515071449-908d672e-4c25-44ac-9ee9-4f7fb1b32144-17665511081250-target
      selected: false
      source: '1765515071449'
      sourceHandle: 908d672e-4c25-44ac-9ee9-4f7fb1b32144
      target: '17665511081250'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 17665511081250-true-17655151779960-target
      selected: false
      source: '17665511081250'
      sourceHandle: 'true'
      target: '17655151779960'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: if-else
      id: 1765515071449-f10e65ad-bb00-4cdf-aabf-78811af1ba70-17665511228850-target
      selected: false
      source: '1765515071449'
      sourceHandle: f10e65ad-bb00-4cdf-aabf-78811af1ba70
      target: '17665511228850'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 17665511228850-true-17655151786270-target
      selected: false
      source: '17665511228850'
      sourceHandle: 'true'
      target: '17655151786270'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: if-else
      id: 1765515071449-false-17665511238600-target
      selected: false
      source: '1765515071449'
      sourceHandle: 'false'
      target: '17665511238600'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 17665511238600-true-17655151791010-target
      selected: false
      source: '17665511238600'
      sourceHandle: 'true'
      target: '17655151791010'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 17665510905650-false-17665511958080-target
      selected: false
      source: '17665510905650'
      sourceHandle: 'false'
      target: '17665511958080'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 17665511958080-source-1765345440190-target
      selected: false
      source: '17665511958080'
      sourceHandle: source
      target: '1765345440190'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 17665511081250-false-17665512107830-target
      selected: false
      source: '17665511081250'
      sourceHandle: 'false'
      target: '17665512107830'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 17665512107830-source-17655153615920-target
      selected: false
      source: '17665512107830'
      sourceHandle: source
      target: '17655153615920'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 17665511228850-false-17665512248470-target
      selected: false
      source: '17665511228850'
      sourceHandle: 'false'
      target: '17665512248470'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 17665512248470-source-17655153626170-target
      selected: false
      source: '17665512248470'
      sourceHandle: source
      target: '17655153626170'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 17665511238600-false-17665512406710-target
      source: '17665511238600'
      sourceHandle: 'false'
      target: '17665512406710'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 17665512406710-source-17655153635450-target
      source: '17665512406710'
      sourceHandle: source
      target: '17655153635450'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: if-else
      id: 1765343666910-true-17665517221250-target
      source: '1765343666910'
      sourceHandle: 'true'
      target: '17665517221250'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 17665517221250-true-1765256779030-target
      source: '17665517221250'
      sourceHandle: 'true'
      target: '1765256779030'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 17665517221250-false-17665517422840-target
      source: '17665517221250'
      sourceHandle: 'false'
      target: '17665517422840'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 17665517422840-source-1765345427966-target
      source: '17665517422840'
      sourceHandle: source
      target: '1765345427966'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        selected: false
        title: é–‹å§‹
        type: start
        variables:
        - default: false
          hint: ''
          label: isDebugMode
          max_length: 48
          options:
          - ''
          placeholder: ''
          required: false
          type: checkbox
          variable: isDebugMode
        - default: ''
          hint: ''
          label: Search Domain Filter
          max_length: 256
          options: []
          placeholder: ''
          required: false
          type: text-input
          variable: domain_filter
        - default: auto
          hint: ''
          label: Web Search Mode
          max_length: 48
          options:
          - auto
          - force
          - 'off'
          placeholder: ''
          required: true
          type: select
          variable: web_search_mode
        - default: 'false'
          hint: ''
          label: RAG Enabled
          max_length: 48
          options:
          - 'true'
          - 'false'
          placeholder: ''
          required: true
          type: select
          variable: rag_enabled
        - allowed_file_extensions: []
          allowed_file_types:
          - document
          allowed_file_upload_methods:
          - local_file
          - remote_url
          default: "[\n  {\n    \"source_name\": \"ç¤¾å†…ç¨Ÿè­°è¦å®š_2025æ”¹å®šç‰ˆ.pdf\",\n    \"content\"\
            : \"ç¬¬3æ¡ï¼ˆæ±ºè£æ¨©é™åŸºæº–ï¼‰\\nç‰©å“è³¼å…¥ãŠã‚ˆã³ã‚µãƒ¼ãƒ“ã‚¹å¥‘ç´„ã«ãŠã‘ã‚‹æ‰¿èªãƒ•ãƒ­ãƒ¼ã¯ä»¥ä¸‹ã®é€šã‚Šå®šã‚ã‚‹ã€‚\\n1. 10ä¸‡å††æœªæº€ï¼šç›´å±ã®èª²é•·æ‰¿èª\\\
            n2. 10ä¸‡å††ä»¥ä¸Š50ä¸‡å††æœªæº€ï¼šéƒ¨é•·æ‰¿èª\\n3. 50ä¸‡å††ä»¥ä¸Š100ä¸‡å††æœªæº€ï¼šæœ¬éƒ¨é•·æ±ºè£\\n4. 100ä¸‡å††ä»¥ä¸Šï¼šå½¹å“¡ä¼šæ±ºè£\\n\\\
            nç¬¬5æ¡ï¼ˆSaaSåˆ©ç”¨ã®ç‰¹ä¾‹ï¼‰\\né‡‘é¡ã«é–¢ã‚ã‚‰ãšã€ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆSaaSï¼‰ã®æ–°è¦å¥‘ç´„ã«ãŠã„ã¦ã¯ã€æƒ…å ±ã‚·ã‚¹ãƒ†ãƒ éƒ¨ã«ã‚ˆã‚‹ã€Œã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯ã‚·ãƒ¼ãƒˆã€ã®æå‡ºã¨æ‰¿èªï¼ˆæ±ºè£è€…ï¼šæƒ…ã‚·ã‚¹éƒ¨é•·ï¼‰ãŒå¿…é ˆã¨ãªã‚‹ã€‚ã“ã‚Œã¯ç„¡æ–™ãƒ—ãƒ©ãƒ³ã®æ¥­å‹™åˆ©ç”¨ã‚‚å«ã‚€ã€‚\\\
            n\\nç¬¬8æ¡ï¼ˆç·Šæ€¥æ±ºè£ï¼‰\\nç½å®³æ™‚ã‚„ã‚·ã‚¹ãƒ†ãƒ éšœå®³æ™‚ãªã©ã€ç·Šæ€¥ã‚’è¦ã™ã‚‹å ´åˆã¯äº‹å¾Œæ‰¿èªã‚’èªã‚ã‚‹ãŒã€ç™ºç”Ÿã‹ã‚‰3å–¶æ¥­æ—¥ä»¥å†…ã«æ­£è¦ã®ãƒ•ãƒ­ãƒ¼ã§ç”³è«‹ã‚’è¡Œã†ã“ã¨ã€‚\"\
            \n  },\n  {\n    \"source_name\": \"ITã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³_v3.2.docx\",\n    \"\
            content\": \"3-1. ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒªã‚·ãƒ¼\\nç¤¾å†…ã‚·ã‚¹ãƒ†ãƒ ãŠã‚ˆã³é€£æºã™ã‚‹å¤–éƒ¨ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆSaaSï¼‰ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®è¦ä»¶ã‚’æº€ãŸã™å¿…è¦ãŒã‚ã‚‹ã€‚\\\
            n- æ–‡å­—æ•°ï¼š12æ–‡å­—ä»¥ä¸Š\\n- æ§‹æˆï¼šå¤§æ–‡å­—ã€å°æ–‡å­—ã€æ•°å­—ã€è¨˜å·ã®4ç¨®é¡ã™ã¹ã¦ã‚’æ··åœ¨ã•ã›ã‚‹ã“ã¨\\n- å¤‰æ›´é »åº¦ï¼šå®šæœŸçš„å¤‰æ›´ã¯æ±‚ã‚ãªã„ãŒã€æ¼æ´©ãŒç–‘ã‚ã‚Œã‚‹å ´åˆã¯ç›´ã¡ã«å¤‰æ›´ã™ã‚‹ã“ã¨\\\
            n- ç¦æ­¢äº‹é …ï¼šæ°åã€ç¤¾å“¡ç•ªå·ã€èª•ç”Ÿæ—¥ãªã©æ¨æ¸¬å®¹æ˜“ãªæ–‡å­—åˆ—ã®ä½¿ç”¨\\n\\n4-2. ç”ŸæˆAIã®åˆ©ç”¨è¦å®š\\n- å½“ç¤¾ãŒå¥‘ç´„ã—ã¦ã„ã‚‹ã€ŒChatGPT\
            \ Enterpriseã€ãŠã‚ˆã³æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§é–‹ç™ºä¸­ã®ã€Œç¤¾å†…AIãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆã€ä»¥å¤–ã®ç”ŸæˆAIã‚µãƒ¼ãƒ“ã‚¹ã¸ã®æ¥­å‹™ãƒ‡ãƒ¼ã‚¿ã®å…¥åŠ›ã¯åŸå‰‡ç¦æ­¢ã¨ã™ã‚‹ã€‚\\\
            n- ç¿»è¨³DeepLï¼ˆç„¡æ–™ç‰ˆï¼‰ã¸ã®æ©Ÿå¯†æƒ…å ±å…¥åŠ›ã¯å³ç¦ã€‚å¿…ãšProç‰ˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã€‚\\n\\n5-1. ãƒ‡ãƒã‚¤ã‚¹ç®¡ç†\\n- ç§ç‰©PCã€ç§ç‰©ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã®æ¥­å‹™ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šï¼ˆBYODï¼‰ã¯ã€äº‹å‰ã«ç”³è«‹ã—ã€ŒMDMï¼ˆãƒ¢ãƒã‚¤ãƒ«ãƒ‡ãƒã‚¤ã‚¹ç®¡ç†ãƒ„ãƒ¼ãƒ«ï¼‰ã€ã‚’å°å…¥ã—ãŸç«¯æœ«ã«é™ã‚Šè¨±å¯ã™ã‚‹ã€‚\\\
            n- USBãƒ¡ãƒ¢ãƒªç­‰ã®å¤–éƒ¨è¨˜æ†¶åª’ä½“ã®ä½¿ç”¨ã¯åŸå‰‡ç¦æ­¢ã¨ã™ã‚‹ã€‚\"\n  },\n  {\n    \"source_name\": \"æ—…è²»ãƒ»çµŒè²»ç²¾ç®—è¦ç¨‹_2024.pdf\"\
            ,\n    \"content\": \"ç¬¬2ç«  äº¤é€šè²»\\n1. é€šå‹¤äº¤é€šè²»ï¼šæœ€ã‚‚çµŒæ¸ˆçš„ãªçµŒè·¯ï¼ˆæœ€å®‰çµŒè·¯ï¼‰ã‚’åŸå‰‡ã¨ã™ã‚‹ã€‚ãŸã ã—ã€æ‰€è¦æ™‚é–“ãŒæœ€å®‰çµŒè·¯ã®0.8å€ä»¥ä¸‹ã¨ãªã‚‹å ´åˆã¯ã€æœ€é€ŸçµŒè·¯ã‚’èªã‚ã‚‹å ´åˆãŒã‚ã‚‹ã€‚\\\
            n2. ã‚¿ã‚¯ã‚·ãƒ¼åˆ©ç”¨ï¼šåŸå‰‡ç¦æ­¢ã€‚ãŸã ã—ã€çµ‚é›»ã‚’é€ƒã—ãŸå ´åˆï¼ˆæ¥­å‹™èµ·å› ã«é™ã‚‹ï¼‰ã€ã¾ãŸã¯å…¬å…±äº¤é€šæ©Ÿé–¢ã§ã®ç§»å‹•ãŒå›°é›£ãªé‡é‡ç‰©ã‚’é‹æ¬ã™ã‚‹å ´åˆã«é™ã‚Šã€éƒ¨é•·æ‰¿èªã®ä¸Šã§è¨±å¯ã™ã‚‹ã€‚\\\
            n3. æ–°å¹¹ç·šãƒ»ç‰¹æ€¥ï¼šç‰‡é“100kmä»¥ä¸Šã®ç§»å‹•ã«ãŠã„ã¦åˆ©ç”¨å¯ã€‚æŒ‡å®šå¸­åˆ©ç”¨å¯ã€‚ã‚°ãƒªãƒ¼ãƒ³è»Šã¯å½¹å“¡ã®ã¿å¯ã€‚\\n\\nç¬¬4ç«  æ¥å¾…äº¤éš›è²»\\n1.\
            \ ä¼šé£ŸåŸºæº–ï¼š1äººã‚ãŸã‚Š5,000å††ï¼ˆç¨è¾¼ï¼‰ã¾ã§ã¯ä¼šè­°è²»ã¨ã—ã¦å‡¦ç†å¯ã€‚\\n2. 5,000å††ã‚’è¶…ãˆã‚‹å ´åˆï¼šäº‹å‰ç”³è«‹å¿…é ˆï¼ˆèª²é•·æ‰¿èªï¼‰ã€‚\\\
            n3. 1äººã‚ãŸã‚Š10,000å††ã‚’è¶…ãˆã‚‹å ´åˆï¼šäº‹å‰ç”³è«‹å¿…é ˆï¼ˆéƒ¨é•·æ‰¿èªï¼‰ã€‚äºŒæ¬¡ä¼šè²»ç”¨ã®ä¼šç¤¾è² æ‹…ã¯åŸå‰‡èªã‚ãªã„ã€‚\\n\\nç¬¬6ç«  ç²¾ç®—æœŸé™\\\
            nçµŒè²»ç™ºç”Ÿæœˆã®ç¿Œæœˆ3å–¶æ¥­æ—¥ã¾ã§ã«ã€ŒConcurã€ã«ã¦ç”³è«‹ã‚’å®Œäº†ã™ã‚‹ã“ã¨ã€‚æœŸé™ã‚’éããŸå ´åˆã€ç†ç”±æ›¸ã®æå‡ºãŒå¿…è¦ã¨ãªã‚‹ã€‚\"\n  },\n \
            \ {\n    \"source_name\": \"ãƒ†ãƒ¬ãƒ¯ãƒ¼ã‚¯å‹¤å‹™è¦å®š_v2.1.pdf\",\n    \"content\": \"\
            1. å¯¾è±¡è€…\\nè©¦ç”¨æœŸé–“ï¼ˆå…¥ç¤¾3ãƒ¶æœˆï¼‰ã‚’çµ‚äº†ã—ã€æ¥­å‹™ã«æ”¯éšœãŒãªã„ã¨æ‰€å±é•·ãŒèªã‚ãŸæ­£ç¤¾å“¡ãŠã‚ˆã³å¥‘ç´„ç¤¾å“¡ã€‚\\n\\n2. å®Ÿæ–½é »åº¦\\nåŸå‰‡ã¨ã—ã¦é€±3å›ï¼ˆæœˆ12å›ï¼‰ã¾ã§ã¨ã™ã‚‹ã€‚ãŸã ã—ã€è‚²å…ãƒ»ä»‹è­·äº‹ç”±ã€ã¾ãŸã¯æ„ŸæŸ“ç—‡æ‹¡å¤§é˜²æ­¢ç­‰ã®ä¼šç¤¾æŒ‡ç¤ºãŒã‚ã‚‹å ´åˆã¯ã“ã®ä¸Šé™ã‚’è§£é™¤ã™ã‚‹ã€‚\\\
            n\\n3. å°±æ¥­å ´æ‰€\\nè‡ªå®…ã€å®Ÿå®¶ã€ã¾ãŸã¯ä¼šç¤¾ãŒå¥‘ç´„ã—ã¦ã„ã‚‹ã‚·ã‚§ã‚¢ã‚ªãƒ•ã‚£ã‚¹ï¼ˆWeWorkç­‰ï¼‰ã€‚ã‚«ãƒ•ã‚§ã‚„å…¬å…±æ–½è¨­ãªã©ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãŒæ‹…ä¿ã§ããªã„å ´æ‰€ï¼ˆãƒ•ãƒªãƒ¼Wi-Fiç’°å¢ƒä¸‹ãªã©ï¼‰ã§ã®æ¥­å‹™ã¯ç¦æ­¢ã™ã‚‹ã€‚\\\
            n\\n4. ãƒ†ãƒ¬ãƒ¯ãƒ¼ã‚¯æ‰‹å½“\\nå®Ÿæ–½1æ—¥ã«ã¤ã250å††ã‚’æ”¯çµ¦ã™ã‚‹ã€‚ã“ã‚Œã«ã¯å…‰ç†±è²»ãƒ»é€šä¿¡è²»ã®è£œåŠ©ãŒå«ã¾ã‚Œã‚‹ã€‚\\n\\n5. å‹¤æ€ ç®¡ç†\\\
            nå§‹æ¥­æ™‚ãŠã‚ˆã³çµ‚æ¥­æ™‚ã«ã€Slackã®ã€Œ#å‹¤æ€ é€£çµ¡ã€ãƒãƒ£ãƒ³ãƒãƒ«ã«ã¦å ±å‘Šã‚’è¡Œã†ã“ã¨ã€‚ä¸­æŠœã‘ï¼ˆé€šé™¢ç­‰ï¼‰ãŒã‚ã‚‹å ´åˆã‚‚åŒæ§˜ã¨ã™ã‚‹ã€‚\"\n  },\n\
            \  {\n    \"source_name\": \"å°±æ¥­è¦å‰‡_ç¬¬4ç« _ä¼‘æš‡.pdf\",\n    \"content\": \"ç¬¬12æ¡ï¼ˆå¹´æ¬¡æœ‰çµ¦ä¼‘æš‡ï¼‰\\\
            nå…¥ç¤¾æ—¥ã‹ã‚‰6ãƒ¶æœˆç¶™ç¶šå‹¤å‹™ã—ã€å…¨åŠ´åƒæ—¥ã®8å‰²ä»¥ä¸Šå‡ºå‹¤ã—ãŸç¤¾å“¡ã«å¯¾ã—ã€10æ—¥ä»˜ä¸ã™ã‚‹ã€‚ä»¥é™ã€å‹¤ç¶šå¹´æ•°ã«å¿œã˜ã¦æœ€å¤§20æ—¥ã¾ã§ä»˜ä¸ã™ã‚‹ã€‚æœ‰çµ¦ä¼‘æš‡ã®å–å¾—å˜ä½ã¯ã€Œ1æ—¥ã€ã€ŒåŠæ—¥ã€ã€Œ1æ™‚é–“ã€ã¨ã™ã‚‹ã€‚\\\
            n\\nç¬¬15æ¡ï¼ˆå¤å­£ä¼‘æš‡ï¼‰\\n7æœˆ1æ—¥ã‹ã‚‰9æœˆ30æ—¥ã¾ã§ã®æœŸé–“ã«ãŠã„ã¦ã€ä»»æ„ã®3æ—¥é–“ã‚’ç‰¹åˆ¥ä¼‘æš‡ï¼ˆæœ‰çµ¦ï¼‰ã¨ã—ã¦å–å¾—ã§ãã‚‹ã€‚æ¥­å‹™ã®éƒ½åˆã‚’è€ƒæ…®ã—ã€ãƒãƒ¼ãƒ å†…ã§èª¿æ•´ã®ä¸Šå–å¾—ã™ã‚‹ã“ã¨ã€‚\\\
            n\\nç¬¬18æ¡ï¼ˆæ…¶å¼”ä¼‘æš‡ï¼‰\\nä»¥ä¸‹ã®äº‹ç”±ãŒç™ºç”Ÿã—ãŸéš›ã€ç”³è«‹ã«ã‚ˆã‚Šç‰¹åˆ¥ä¼‘æš‡ã‚’ä»˜ä¸ã™ã‚‹ã€‚\\n1. æœ¬äººãŒçµå©šã™ã‚‹ã¨ãï¼š5æ—¥\\n2. é…å¶è€…ãŒå‡ºç”£ã™ã‚‹ã¨ãï¼š2æ—¥\\\
            n3. é…å¶è€…ã€å­ã€çˆ¶æ¯ãŒæ­»äº¡ã—ãŸã¨ãï¼š5æ—¥\\n4. å…„å¼Ÿå§‰å¦¹ã€ç¥–çˆ¶æ¯ã€é…å¶è€…ã®çˆ¶æ¯ãŒæ­»äº¡ã—ãŸã¨ãï¼š3æ—¥\"\n  }\n]"
          hint: ''
          label: Mock RAG Context
          max_length: 10000
          options: []
          placeholder: ''
          required: false
          type: paragraph
          variable: mock_rag_context
        - default: 2025å¹´12æœˆ10æ—¥
          hint: ''
          label: Current Time
          max_length: 100
          options: []
          placeholder: ''
          required: true
          type: text-input
          variable: current_time
        - default: partner
          hint: ''
          label: AI Style
          max_length: 48
          options:
          - efficient
          - partner
          placeholder: ''
          required: true
          type: select
          variable: ai_style
        - default: ''
          hint: ''
          label: System Prompt
          max_length: 1000
          options: []
          placeholder: ''
          required: false
          type: paragraph
          variable: system_prompt
      height: 291
      id: '1761291739140'
      position:
        x: 0
        y: 12
      positionAbsolute:
        x: 0
        y: 12
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        answer: "{\n  \"answer\": \"### âœ… Dify API æ¥ç¶šæˆåŠŸ\\n\\nãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ã€‚ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¨Difyãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®æ¥ç¶šãŒæ­£å¸¸ã«ç¢ºç«‹ã•ã‚Œã¾ã—ãŸã€‚\\\
          n\\nç¾åœ¨ã¯ **BE Mock Mode (isDebugMode=true)** ãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã¾ã™ã€‚\\nã“ã®ãƒ¢ãƒ¼ãƒ‰ã§ã¯ã€è¤‡é›‘ãªæ¤œç´¢ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆWeb/RAGï¼‰ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã€ã“ã®å›ºå®šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿”ã—ã¦ã„ã¾ã™ã€‚\\\
          n\\n#### æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—\\nå®Ÿéš›ã®æ¤œç´¢ãƒ­ã‚¸ãƒƒã‚¯ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã«ã¯ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ä¸Šéƒ¨ã® **Mock Mode** ã‚’ **OFF** ã«åˆ‡ã‚Šæ›¿ãˆã¦ãã ã•ã„ã€‚\"\
          ,\n  \"citations\": [\n    {\n      \"id\": \"sys_check\",\n      \"type\"\
          : \"document\",\n      \"source\": \"System Status: OK\",\n      \"url\"\
          : null\n    },\n    {\n      \"id\": \"mode_check\",\n      \"type\": \"\
          web\",\n      \"source\": \"Dify Workflow Config\",\n      \"url\": \"https://cloud.dify.ai\"\
          \n    }\n  ]\n}"
        selected: false
        title: ANSWER_Mock_Mode
        type: answer
        variables: []
      height: 340
      id: answer
      position:
        x: 704
        y: 0
      positionAbsolute:
        x: 704
        y: 0
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: is
            id: beb3e487-31db-4184-84b7-da25c8dd5a6a
            value: true
            varType: boolean
            variable_selector:
            - '1761291739140'
            - isDebugMode
          id: 'true'
          logical_operator: and
        selected: false
        title: GATE_Has_File_Context
        type: if-else
      height: 124
      id: '1762490237953'
      position:
        x: 342
        y: 98.61165168988839
      positionAbsolute:
        x: 342
        y: 98.61165168988839
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: not empty
            id: 286e9d1a-6318-4f5e-a14d-62beed119c97
            value: ''
            varType: array[file]
            variable_selector:
            - sys
            - files
          id: 'true'
          logical_operator: and
        selected: false
        title: GATE_Has_File
        type: if-else
      height: 124
      id: '1764913411735'
      position:
        x: 1066
        y: 448
      positionAbsolute:
        x: 1066
        y: 448
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        is_array_file: true
        selected: false
        title: TOOL_Doc_Extractor
        type: document-extractor
        variable_selector:
        - sys
        - files
      height: 104
      id: '1764913700839'
      position:
        x: 1428
        y: 470
      positionAbsolute:
        x: 1428
        y: 470
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        items:
        - input_type: variable
          operation: over-write
          value:
          - '1764913700839'
          - text
          variable_selector:
          - conversation
          - context_file
          write_mode: over-write
        - input_type: variable
          operation: over-write
          value:
          - '1764924171081'
          - filename
          variable_selector:
          - conversation
          - context_file_name
          write_mode: over-write
        selected: false
        title: SET_File_Context
        type: assigner
        version: '2'
      height: 110
      id: '1764913830165'
      position:
        x: 2112
        y: 467
      positionAbsolute:
        x: 2112
        y: 467
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: is
            id: 65779b8a-46ee-4c2b-a526-10dcf586a9dc
            value: 'true'
            varType: string
            variable_selector:
            - '1761291739140'
            - rag_enabled
          id: 'true'
          logical_operator: and
        selected: false
        title: GATE_RAG_Enabled
        type: if-else
      height: 124
      id: '1764914026588'
      position:
        x: 2474
        y: 439
      positionAbsolute:
        x: 2474
        y: 439
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        items:
        - input_type: variable
          operation: over-write
          value:
          - '1761291739140'
          - mock_rag_context
          variable_selector:
          - conversation
          - context_rag
          write_mode: over-write
        selected: false
        title: SET_Mock_RAG
        type: assigner
        version: '2'
      height: 84
      id: '1764914113059'
      position:
        x: 2836
        y: 369
      positionAbsolute:
        x: 2836
        y: 369
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        items:
        - input_type: variable
          operation: clear
          value: ''
          variable_selector:
          - conversation
          - context_rag
          write_mode: over-write
        selected: false
        title: CLEAR_RAG_Context
        type: assigner
        version: '2'
      height: 84
      id: '1764914133340'
      position:
        x: 2836
        y: 533
      positionAbsolute:
        x: 2836
        y: 533
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: is
            id: 8b5bbf03-da52-40c4-bd60-1f47d8756c6b
            value: force
            varType: string
            variable_selector:
            - '1761291739140'
            - web_search_mode
          id: 'true'
          logical_operator: and
        - case_id: 1db66d52-c4bb-4b05-a087-6a73781c2d5b
          conditions:
          - comparison_operator: is
            id: 2d8ce6d6-fef6-4012-b6f0-25092e665cd2
            value: auto
            varType: string
            variable_selector:
            - '1761291739140'
            - web_search_mode
          - comparison_operator: contains
            id: e26e2f54-b908-4d41-b481-78072949d783
            value: SEARCH
            varType: string
            variable_selector:
            - '1764914312443'
            - text
          id: 1db66d52-c4bb-4b05-a087-6a73781c2d5b
          logical_operator: and
        selected: false
        title: GATE_Web_Search_Check
        type: if-else
      height: 198
      id: '1764914157100'
      position:
        x: 4586
        y: 473
      positionAbsolute:
        x: 4586
        y: 473
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        is_team_authorization: true
        paramSchemas:
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: The text query to be processed by the AI model.
            ja_JP: The text query to be processed by the AI model.
            pt_BR: The text query to be processed by the AI model.
            zh_Hans: è¦ç”± AI æ¨¡å‹å¤„ç†çš„æ–‡æœ¬æŸ¥è¯¢ã€‚
          label:
            en_US: Query
            ja_JP: Query
            pt_BR: Query
            zh_Hans: æŸ¥è¯¢
          llm_description: ''
          max: null
          min: null
          name: query
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: sonar
          form: form
          human_description:
            en_US: The Perplexity AI model to use for generating the response.
            ja_JP: The Perplexity AI model to use for generating the response.
            pt_BR: The Perplexity AI model to use for generating the response.
            zh_Hans: ç”¨äºç”Ÿæˆå“åº”çš„ Perplexity AI æ¨¡å‹ã€‚
          label:
            en_US: Model Name
            ja_JP: Model Name
            pt_BR: Model Name
            zh_Hans: æ¨¡å‹åç§°
          llm_description: ''
          max: null
          min: null
          name: model
          options:
          - icon: ''
            label:
              en_US: sonar
              ja_JP: sonar
              pt_BR: sonar
              zh_Hans: sonar
            value: sonar
          - icon: ''
            label:
              en_US: sonar-pro
              ja_JP: sonar-pro
              pt_BR: sonar-pro
              zh_Hans: sonar-pro
            value: sonar-pro
          - icon: ''
            label:
              en_US: sonar-reasoning
              ja_JP: sonar-reasoning
              pt_BR: sonar-reasoning
              zh_Hans: sonar-reasoning
            value: sonar-reasoning
          - icon: ''
            label:
              en_US: sonar-reasoning-pro
              ja_JP: sonar-reasoning-pro
              pt_BR: sonar-reasoning-pro
              zh_Hans: sonar-reasoning-pro
            value: sonar-reasoning-pro
          - icon: ''
            label:
              en_US: sonar-deep-research
              ja_JP: sonar-deep-research
              pt_BR: sonar-deep-research
              zh_Hans: sonar-deep-research
            value: sonar-deep-research
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: select
        - auto_generate: null
          default: 4096
          form: form
          human_description:
            en_US: The maximum number of tokens to generate in the response.
            ja_JP: The maximum number of tokens to generate in the response.
            pt_BR: O nÃºmero mÃ¡ximo de tokens a serem gerados na resposta.
            zh_Hans: åœ¨å“åº”ä¸­ç”Ÿæˆçš„æœ€å¤§ä»¤ç‰Œæ•°ã€‚
          label:
            en_US: Max Tokens
            ja_JP: Max Tokens
            pt_BR: MÃ¡ximo de Tokens
            zh_Hans: æœ€å¤§ä»¤ç‰Œæ•°
          llm_description: ''
          max: 4096
          min: 1
          name: max_tokens
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: number
        - auto_generate: null
          default: 0.7
          form: form
          human_description:
            en_US: Controls randomness in the output. Lower values make the output
              more focused and deterministic.
            ja_JP: Controls randomness in the output. Lower values make the output
              more focused and deterministic.
            pt_BR: Controls randomness in the output. Lower values make the output
              more focused and deterministic.
            zh_Hans: æ§åˆ¶è¾“å‡ºçš„éšæœºæ€§ã€‚è¾ƒä½çš„å€¼ä½¿è¾“å‡ºæ›´åŠ é›†ä¸­å’Œç¡®å®šã€‚
          label:
            en_US: Temperature
            ja_JP: Temperature
            pt_BR: Temperatura
            zh_Hans: æ¸©åº¦
          llm_description: ''
          max: 1
          min: 0
          name: temperature
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: number
        - auto_generate: null
          default: 5
          form: form
          human_description:
            en_US: The number of top results to consider for response generation.
            ja_JP: The number of top results to consider for response generation.
            pt_BR: The number of top results to consider for response generation.
            zh_Hans: ç”¨äºç”Ÿæˆå“åº”çš„é¡¶éƒ¨ç»“æœæ•°é‡ã€‚
          label:
            en_US: Top K
            ja_JP: Top K
            pt_BR: Top K
            zh_Hans: å–æ ·æ•°é‡
          llm_description: ''
          max: 100
          min: 1
          name: top_k
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: number
        - auto_generate: null
          default: 1
          form: form
          human_description:
            en_US: Controls diversity via nucleus sampling.
            ja_JP: Controls diversity via nucleus sampling.
            pt_BR: Controls diversity via nucleus sampling.
            zh_Hans: é€šè¿‡æ ¸å¿ƒé‡‡æ ·æ§åˆ¶å¤šæ ·æ€§ã€‚
          label:
            en_US: Top P
            ja_JP: Top P
            pt_BR: Top P
            zh_Hans: Top P
          llm_description: ''
          max: 1
          min: 0.1
          name: top_p
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: number
        - auto_generate: null
          default: 0
          form: form
          human_description:
            en_US: Positive values penalize new tokens based on whether they appear
              in the text so far.
            ja_JP: Positive values penalize new tokens based on whether they appear
              in the text so far.
            pt_BR: Positive values penalize new tokens based on whether they appear
              in the text so far.
            zh_Hans: æ­£å€¼ä¼šæ ¹æ®æ–°è¯å…ƒæ˜¯å¦å·²ç»å‡ºç°åœ¨æ–‡æœ¬ä¸­æ¥å¯¹å…¶è¿›è¡Œæƒ©ç½šã€‚
          label:
            en_US: Presence Penalty
            ja_JP: Presence Penalty
            pt_BR: Presence Penalty
            zh_Hans: å­˜åœ¨æƒ©ç½š
          llm_description: ''
          max: 1
          min: -1
          name: presence_penalty
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: number
        - auto_generate: null
          default: 1
          form: form
          human_description:
            en_US: Positive values penalize new tokens based on their existing frequency
              in the text so far.
            ja_JP: Positive values penalize new tokens based on their existing frequency
              in the text so far.
            pt_BR: Positive values penalize new tokens based on their existing frequency
              in the text so far.
            zh_Hans: æ­£å€¼ä¼šæ ¹æ®æ–°è¯å…ƒåœ¨æ–‡æœ¬ä¸­å·²ç»å‡ºç°çš„é¢‘ç‡æ¥å¯¹å…¶è¿›è¡Œæƒ©ç½šã€‚
          label:
            en_US: Frequency Penalty
            ja_JP: Frequency Penalty
            pt_BR: Frequency Penalty
            zh_Hans: é¢‘ç‡æƒ©ç½š
          llm_description: ''
          max: 1
          min: 0.1
          name: frequency_penalty
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: number
        - auto_generate: null
          default: false
          form: form
          human_description:
            en_US: Whether to return images in the response.
            ja_JP: Whether to return images in the response.
            pt_BR: Whether to return images in the response.
            zh_Hans: æ˜¯å¦åœ¨å“åº”ä¸­è¿”å›å›¾åƒã€‚
          label:
            en_US: Return Images
            ja_JP: Return Images
            pt_BR: Return Images
            zh_Hans: è¿”å›å›¾åƒ
          llm_description: ''
          max: null
          min: null
          name: return_images
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: boolean
        - auto_generate: null
          default: false
          form: form
          human_description:
            en_US: Whether to return related questions in the response.
            ja_JP: Whether to return related questions in the response.
            pt_BR: Whether to return related questions in the response.
            zh_Hans: æ˜¯å¦åœ¨å“åº”ä¸­è¿”å›ç›¸å…³é—®é¢˜ã€‚
          label:
            en_US: Return Related Questions
            ja_JP: Return Related Questions
            pt_BR: Return Related Questions
            zh_Hans: è¿”å›ç›¸å…³é—®é¢˜
          llm_description: ''
          max: null
          min: null
          name: return_related_questions
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: boolean
        - auto_generate: null
          default: ''
          form: form
          human_description:
            en_US: Domain to filter the search results. Use comma to separate multiple
              domains. Up to 3 domains are supported.
            ja_JP: Domain to filter the search results. Use comma to separate multiple
              domains. Up to 3 domains are supported.
            pt_BR: Domain to filter the search results. Use comma to separate multiple
              domains. Up to 3 domains are supported.
            zh_Hans: ç”¨äºè¿‡æ»¤æœç´¢ç»“æœçš„åŸŸåã€‚ä½¿ç”¨é€—å·åˆ†éš”å¤šä¸ªåŸŸåã€‚æœ€å¤šæ”¯æŒ3ä¸ªåŸŸåã€‚
          label:
            en_US: Search Domain Filter
            ja_JP: Search Domain Filter
            pt_BR: Search Domain Filter
            zh_Hans: æœç´¢åŸŸè¿‡æ»¤å™¨
          llm_description: ''
          max: null
          min: null
          name: search_domain_filter
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: month
          form: form
          human_description:
            en_US: Filter for search results based on recency.
            ja_JP: Filter for search results based on recency.
            pt_BR: Filter for search results based on recency.
            zh_Hans: åŸºäºæ—¶é—´ç­›é€‰æœç´¢ç»“æœã€‚
          label:
            en_US: Search Recency Filter
            ja_JP: Search Recency Filter
            pt_BR: Search Recency Filter
            zh_Hans: æœç´¢æ—¶é—´è¿‡æ»¤å™¨
          llm_description: ''
          max: null
          min: null
          name: search_recency_filter
          options:
          - icon: ''
            label:
              en_US: Day
              ja_JP: Day
              pt_BR: Day
              zh_Hans: å¤©
            value: day
          - icon: ''
            label:
              en_US: Week
              ja_JP: Week
              pt_BR: Week
              zh_Hans: å‘¨
            value: week
          - icon: ''
            label:
              en_US: Month
              ja_JP: Month
              pt_BR: Month
              zh_Hans: æœˆ
            value: month
          - icon: ''
            label:
              en_US: Year
              ja_JP: Year
              pt_BR: Year
              zh_Hans: å¹´
            value: year
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: select
        - auto_generate: null
          default: low
          form: form
          human_description:
            en_US: Determines how much search context is retrieved for the model.
            ja_JP: Determines how much search context is retrieved for the model.
            pt_BR: Determines how much search context is retrieved for the model.
            zh_Hans: ç¡®å®šæ¨¡å‹æ£€ç´¢çš„æœç´¢ä¸Šä¸‹æ–‡é‡ã€‚
          label:
            en_US: Search Context Size
            ja_JP: Search Context Size
            pt_BR: Search Context Size
            zh_Hans: æœç´¢ä¸Šä¸‹æ–‡å¤§å°
          llm_description: ''
          max: null
          min: null
          name: search_context_size
          options:
          - icon: ''
            label:
              en_US: Low
              ja_JP: Low
              pt_BR: Low
              zh_Hans: ä½
            value: low
          - icon: ''
            label:
              en_US: Medium
              ja_JP: Medium
              pt_BR: Medium
              zh_Hans: ä¸­ç­‰
            value: medium
          - icon: ''
            label:
              en_US: High
              ja_JP: High
              pt_BR: High
              zh_Hans: é«˜
            value: high
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: select
        params:
          frequency_penalty: ''
          max_tokens: ''
          model: ''
          presence_penalty: ''
          query: ''
          return_images: ''
          return_related_questions: ''
          search_context_size: ''
          search_domain_filter: ''
          search_recency_filter: ''
          temperature: ''
          top_k: ''
          top_p: ''
        plugin_id: langgenius/perplexity
        plugin_unique_identifier: langgenius/perplexity:1.0.1@32531e4a1ec68754e139f29f04eaa7f51130318a908d11382a27dc05ec8d91e3
        provider_icon: https://cloud.dify.ai/console/api/workspaces/current/plugin/icon?tenant_id=7c8ea1f1-d371-448a-846c-af9a868d7d0f&filename=3c79dd2281a10c53fcfaee94048f879b6abfe71f510bce2561200b0f7d702871.svg
        provider_id: langgenius/perplexity/perplexity
        provider_name: langgenius/perplexity/perplexity
        provider_type: builtin
        selected: false
        title: TOOL_Perplexity_Search
        tool_configurations:
          frequency_penalty:
            type: constant
            value: 1
          max_tokens:
            type: constant
            value: 4096
          model:
            type: constant
            value: sonar
          presence_penalty:
            type: constant
            value: 0
          return_images:
            type: constant
            value: false
          return_related_questions:
            type: constant
            value: false
          search_context_size:
            type: constant
            value: low
          search_domain_filter:
            type: mixed
            value: '{{#1761291739140.domain_filter#}}'
          search_recency_filter:
            type: constant
            value: month
          temperature:
            type: constant
            value: 0.7
          top_k:
            type: constant
            value: 5
          top_p:
            type: constant
            value: 1
        tool_description: Search information using Perplexity AI's language models.
        tool_label: Perplexity Search
        tool_name: perplexity
        tool_node_version: '2'
        tool_parameters:
          query:
            type: mixed
            value: '{{#conversation.optimized_search_query#}}

              {{#sys.query#}}


              ã€é‡è¦ï¼šå‡ºåŠ›å½¢å¼ã®å¼·åˆ¶ã€‘

              ã‚ãªãŸã®å›ç­”ã¯ã€å¾Œç¶šã®AIã«ã‚ˆã£ã¦è§£æã•ã‚Œã¾ã™ã€‚ä»¥ä¸‹ã®ãƒ«ãƒ¼ãƒ«ã‚’å³å®ˆã—ã¦ãã ã•ã„ã€‚


              1. **æœ¬æ–‡ä¸­ã®å¼•ç”¨**: ç”Ÿæˆã™ã‚‹å›ç­”ã®æœ¬æ–‡ä¸­ã«ã¯ã€æƒ…å ±ã®æ ¹æ‹ ã¨ãªã‚‹ç®‡æ‰€ã«å¿…ãš `[1]`, `[2]` ã®ã‚ˆã†ãªå½¢å¼ã§å‡ºå…¸ç•ªå·ã‚’åŸ‹ã‚è¾¼ã‚“ã§ãã ã•ã„ã€‚å‡ºå…¸ç•ªå·ã®ãªã„è¨˜è¿°ã¯é¿ã‘ã¦ãã ã•ã„ã€‚

              2. **å‡ºå…¸ãƒªã‚¹ãƒˆ**: å›ç­”ã®æœ€ä¸‹éƒ¨ã«ã€ä½¿ç”¨ã—ãŸå‡ºå…¸ã‚’ä»¥ä¸‹ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§åˆ—æŒ™ã—ã¦ãã ã•ã„ã€‚


              Source List:

              [1] Title: [ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ«] URL: [URL]

              [2] Title: [ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ«] URL: [URL]'
        type: tool
      height: 374
      id: '1764914255107'
      position:
        x: 4948
        y: 461
      positionAbsolute:
        x: 4948
        y: 461
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        items:
        - input_type: variable
          operation: over-write
          value:
          - '1764914255107'
          - text
          variable_selector:
          - conversation
          - context_web
          write_mode: over-write
        selected: false
        title: SET_Web_Context
        type: assigner
        version: '2'
      height: 84
      id: '1764914281874'
      position:
        x: 5290
        y: 606
      positionAbsolute:
        x: 5290
        y: 606
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: b695f1a9-a7a1-4314-b497-cf46a845994b
          role: system
          text: '# Role

            ã‚ãªãŸã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥åŠ›ã¨AIã«ã‚ˆã‚‹æ­£è¦åŒ–æ¸ˆã¿ã‚¯ã‚¨ãƒªã®**ä¸¡æ–¹ã‚’æ¯”è¼ƒåˆ†æ**ã—ã€æœ€é©ãªå‡¦ç†ãƒ«ãƒ¼ãƒˆã‚’æ±ºå®šã™ã‚‹é«˜åº¦ãªãƒ«ãƒ¼ã‚¿ãƒ¼ã§ã™ã€‚


            # Input Data


            ## 1. User Query (Raw Input)

            {{#sys.query#}}

            â€»ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå…¥åŠ›ã—ãŸç”Ÿã®ãƒ†ã‚­ã‚¹ãƒˆã€‚æ–‡è„ˆã€ãƒ‹ãƒ¥ã‚¢ãƒ³ã‚¹ã€æ„å›³ã®å¼·ã•ã‚’å«ã¿ã¾ã™ã€‚


            ## 2. Optimized Query (Normalized)

            {{#conversation.optimized_search_query#}}

            â€»æ—¥ä»˜ã®å…·ä½“åŒ–ã€æŒ‡ç¤ºèªã®è£œå®Œã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æŠ½å‡ºãŒè¡Œã‚ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆã€‚


            # Decision Logic (Priority Order)


            ## Step 1: Detect Chat & Greetings (é›‘è«‡åˆ¤å®š)

            **User Query (Raw Input)** ã‚’æœ€å„ªå…ˆã§è©•ä¾¡ã—ã¦ãã ã•ã„ã€‚

            ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç”Ÿã®å…¥åŠ›ãŒã€Œã“ã‚“ã«ã¡ã¯ã€ã€Œã‚ã‚ŠãŒã¨ã†ã€ã€Œãªã‚‹ã»ã©ã€ã€Œäº†è§£ã€ãªã©ã®**å˜ç´”ãªæŒ¨æ‹¶ãƒ»ç›¸æ§Œ**ã§ã‚ã‚‹å ´åˆã€ãŸã¨ãˆ Optimized Query
            ã«ä½•ã‚‰ã‹ã®å˜èªãŒå…¥ã£ã¦ã„ãŸã¨ã—ã¦ã‚‚ã€**`CHAT`** ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚


            ## Step 2: Detect External / Hybrid Search Needs (Webæ¤œç´¢ãƒ»ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰åˆ¤å®š)

            **Optimized Query** ã‚’ä¸­å¿ƒã«ç¢ºèªã—ã¦ãã ã•ã„ã€‚

            ä»¥ä¸‹ã®è¦ç´ ãŒå«ã¾ã‚Œã‚‹å ´åˆã¯ã€ç¤¾å†…æƒ…å ±ã®å‚ç…§ãŒå¿…è¦ã‹ã©ã†ã‹ã«ã‹ã‹ã‚ã‚‰ãšã€å¤–éƒ¨æƒ…å ±ã®å–å¾—ãŒå¿…é ˆã§ã‚ã‚‹ãŸã‚ **`SEARCH`** ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚

            **ï¼ˆâ€»ã€Œç¤¾å†…è¦å®šã¨æ³•å¾‹ã®æ¯”è¼ƒã€ã®ã‚ˆã†ãªãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ãªè³ªå•ã‚‚ã€ã“ã“ã§ SEARCH ã¨åˆ¤å®šã—ã¾ã™ï¼‰**


            * **æ³•å‹™ãƒ»ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹**: ã€Œæ³•çš„ã€ã€Œæ³•å¾‹ã€ã€Œæ³•è¦åˆ¶ã€ã€Œæ³•ä»¤ã€ã€Œæ¡ä¾‹ã€ã€Œåˆ¤ä¾‹ã€ã€Œã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ã€ã€ŒGDPRã€ã€Œè‘—ä½œæ¨©ã€ã€Œå•†æ¨™ã€

            * **å¸‚å ´ãƒ»ç¤¾ä¼šå‹•å‘**: ã€Œãƒˆãƒ¬ãƒ³ãƒ‰ã€ã€Œæµè¡Œã€ã€Œã‚·ã‚§ã‚¢ã€ã€Œæ ªä¾¡ã€ã€ŒçµŒæ¸ˆæŒ‡æ¨™ã€ã€Œãƒ‹ãƒ¥ãƒ¼ã‚¹ã€ã€Œä¸–è«–ã€ã€Œä¸ç¥¥äº‹ã€

            * **å¤–éƒ¨è©•ä¾¡ãƒ»æ¯”è¼ƒ**: ã€Œè©•åˆ¤ã€ã€Œå£ã‚³ãƒŸã€ã€Œãƒ¬ãƒ“ãƒ¥ãƒ¼ã€ã€Œç«¶åˆä»–ç¤¾ã€ã€Œæ¥­ç•Œæ¨™æº–ã€ã€Œä¸€èˆ¬çš„ãªã€ã€Œä¸–é–“çš„ãªã€

            * **å…·ä½“çš„ãªæ—¥æ™‚ãƒ»å ´æ‰€**: ã€Œ2025å¹´12æœˆ9æ—¥ã€ã€Œä»Šæ—¥ã€ã€Œå¤§é˜ªã®å¤©æ°—ã€ãªã©ã€æ™‚äº‹æ€§ã‚„å ´æ‰€æ€§ãŒå¼·ã„æƒ…å ±ã€‚

            * **æ¤œç´¢ã®æ˜ç¤º**: User Query ã«ã€Œæ¤œç´¢ã—ã¦ã€ã€Œèª¿ã¹ã¦ã€ã€Œã‚°ã‚°ã£ã¦ã€ã¨ã„ã†æŒ‡ç¤ºãŒå«ã¾ã‚Œã‚‹å ´åˆã€‚


            ## Step 3: Detect Internal Resources (å†…éƒ¨çŸ¥è­˜åˆ¤å®š)

            Step 2ã«è©²å½“ã—ãªã‹ã£ãŸå ´åˆã®ã¿ã€ã“ã¡ã‚‰ã‚’è©•ä¾¡ã—ã¦ãã ã•ã„ã€‚

            ä»¥ä¸‹ã®è¦ç´ ãŒå«ã¾ã‚Œã‚‹å ´åˆã¯ã€å†…éƒ¨å‡¦ç†ï¼ˆRAG/ãƒ•ã‚¡ã‚¤ãƒ«å‚ç…§ï¼‰ã§å®Œçµã™ã‚‹ãŸã‚ **`LOGICAL`** ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚


            * **ãƒ•ã‚¡ã‚¤ãƒ«å‚ç…§**: ã€Œæ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ã€ã€Œã“ã‚Œã‚‰ã®è³‡æ–™ã€ã€Œã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãŸPDFã€ã€Œè­°äº‹éŒ²ã€ã€Œå†…å®¹ã€ãªã©ã€**æ·»ä»˜ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ç¾¤**ã¸ã®è¨€åŠã€‚

            * **ç¤¾å†…ç”¨èª**: ã€Œç¤¾å†…è¦å®šã€ã€Œã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã€ã€Œãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã€ã€Œç¨Ÿè­°ã€ã€ŒçµŒè²»ç²¾ç®—ã€ã€Œå°±æ¥­è¦å‰‡ã€

            * **ã‚¿ã‚¹ã‚¯æŒ‡ç¤º**: ã€Œè¦ç´„ã—ã¦ã€ã€Œç¿»è¨³ã—ã¦ã€ã€Œæ ¡æ­£ã—ã¦ã€ã€Œæ¡ˆå‡ºã—ã—ã¦ã€


            ## Step 4: Default Fallback

            ä¸Šè¨˜ã®ã„ãšã‚Œã«ã‚‚æ˜ç¢ºã«è©²å½“ã—ãªã„å ´åˆï¼ˆä¸€èˆ¬çš„ãªçŸ¥è­˜è³ªå•ãªã©ï¼‰ã¯ã€LLMã®çŸ¥è­˜ã§å›ç­”ã™ã‚‹ãŸã‚ **`LOGICAL`** ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚


            # Output Format

            ä½™è¨ˆãªè¨˜å·ã‚’å«ã‚ãšã€ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã®å˜èªã®ã¿ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚


            SEARCH

            LOGICAL

            CHAT'
        selected: false
        title: LLM_Intent_Analysis
        type: llm
        vision:
          enabled: false
      height: 88
      id: '1764914312443'
      position:
        x: 3882
        y: 516
      positionAbsolute:
        x: 3882
        y: 516
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        items:
        - input_type: variable
          operation: clear
          value: ''
          variable_selector:
          - conversation
          - context_web
          write_mode: over-write
        selected: false
        title: CLEAR_Web_Context
        type: assigner
        version: '2'
      height: 84
      id: '1764914726017'
      position:
        x: 5290
        y: 368
      positionAbsolute:
        x: 5290
        y: 368
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        memory:
          query_prompt_template: '{{#sys.query#}}


            {{#sys.files#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: true
            size: 10
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: 6d795767-8518-4886-b2c8-f5bce5f42eaf
          role: system
          text: "# Role\nã‚ãªãŸã¯æ¤œç´¢ã‚¯ã‚¨ãƒªç”Ÿæˆã®ã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆã§ã™ã€‚\nç¾åœ¨ã®æ—¥æ™‚ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•ã€ãŠã‚ˆã³**ã“ã‚Œã¾ã§ã®ä¼šè©±ã®æµã‚Œï¼ˆãƒ¡ãƒ¢ãƒªï¼‰**ã‚’åˆ†æã—ã€Googleã‚„Perplexityã§æ¤œç´¢ã™ã‚‹ãŸã‚ã®ã€Œæœ€é©ãªæ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã€ã¾ãŸã¯ã€Œæ¤œç´¢è³ªå•æ–‡ã€ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚\n\
            \n# åŸºæº–ãƒ‡ãƒ¼ã‚¿\nCurrent Time: {{#1761291739140.current_time#}}\n\n# ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼ˆãƒ•ã‚¡ã‚¤ãƒ«å†…å®¹ï¼‰\n\
            {{#conversation.context_file#}}\nâ€»ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ç¾¤ã®ãƒ†ã‚­ã‚¹ãƒˆå†…å®¹ã§ã™ã€‚ã“ã“ã«å«ã¾ã‚Œã‚‹å°‚é–€ç”¨èªã‚„å›ºæœ‰åè©ã‚’æ¤œç´¢ã‚¯ã‚¨ãƒªã«å«ã‚ã‚‹ã“ã¨ãŒæœ‰åŠ¹ãªå ´åˆãŒã‚ã‚Šã¾ã™ã€‚\n\
            \n# ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•\n{{#sys.query#}}\n\n# ã‚¿ã‚¹ã‚¯æŒ‡ç¤º\nãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•ã‚’ã€æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ãŒç†è§£ã—ã‚„ã™ã„**ã€Œç‹¬ç«‹ã—ãŸæ¤œç´¢ã‚¯ã‚¨ãƒªã€**ã«æ›¸ãæ›ãˆã¦ãã ã•ã„ã€‚\n\
            å…¥åŠ›ã•ã‚ŒãŸä¼šè©±å±¥æ­´ï¼ˆMemoryï¼‰ã¯è‡ªå‹•çš„ã«å‚ç…§ã•ã‚Œã¾ã™ã€‚\n\n## é‡è¦ãªãƒ«ãƒ¼ãƒ«ï¼ˆæŒ‡ç¤ºèªã®è§£æ±ºï¼‰\n1. **æŒ‡ç¤ºèªã®å…·ä½“åŒ–**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€Œ**ãã‚Œ**ã¯ã„ã¤ï¼Ÿã€ã€Œ**å½¼**ã®çµŒæ­´ã¯ï¼Ÿã€ã®ã‚ˆã†ã«ã€ã€Œãã‚Œã€ã€Œã“ã‚Œã€ã€Œå½¼ã€ã€Œå½¼å¥³ã€ã€Œãã®ä»¶ã€ãªã©ã®æŒ‡ç¤ºèªã‚’ä½¿ç”¨ã—ãŸå ´åˆã¯ã€**ä¼šè©±å±¥æ­´ï¼ˆç›´å‰ã®ã‚„ã‚Šå–ã‚Šï¼‰**ã‚’å‚ç…§ã—ã€å…·ä½“çš„ãªåç§°ï¼ˆäººåã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã€ãƒˆãƒ”ãƒƒã‚¯åãªã©ï¼‰ã«ç½®ãæ›ãˆã¦ãã ã•ã„ã€‚\n\
            \   - ä¾‹: å±¥æ­´ã§ã€ŒiPhone 15ã€ã®è©±ã‚’ã—ã¦ã„ã‚‹ â†’ å…¥åŠ›ã€Œ**ãã‚Œ**ã®ä¾¡æ ¼ã¯ï¼Ÿã€ â†’ å‡ºåŠ›ã€ŒiPhone 15 ä¾¡æ ¼ã€\n\n\
            2. **æ–‡è„ˆã®è£œå®Œ**: è³ªå•ãŒå˜èªã®ã¿ã§ã€æ–‡è„ˆãŒãªã„ã¨æ„å‘³ãŒé€šã˜ãªã„å ´åˆã€å±¥æ­´ã‹ã‚‰æ–‡è„ˆã‚’è£œå®Œã—ã¦ãã ã•ã„ã€‚\n   - ä¾‹: å±¥æ­´ã§ã€Œæ±äº¬ã®å¤©æ°—ã€ã®è©±ã‚’ã—ã¦ã„ã‚‹\
            \ â†’ å…¥åŠ›ã€Œå¤§é˜ªã¯ï¼Ÿã€ â†’ å‡ºåŠ›ã€Œå¤§é˜ª å¤©æ°—ã€\n\n## ãã®ä»–ã®åˆ¶ç´„\n- æŒ¨æ‹¶ï¼ˆã€Œã“ã‚“ã«ã¡ã¯ã€ç­‰ï¼‰ã®ã¿ã®å ´åˆã¯ã€æ¤œç´¢ã‚’è¡Œã‚ãšã€å…¥åŠ›ã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆã‚’ãã®ã¾ã¾å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚\n\
            - ç›¸å¯¾çš„ãªæ—¥ä»˜ï¼ˆã€Œä»Šæ—¥ã€ã€Œæ¥é€±ã€ï¼‰ã¯ã€Current Time ã‚’åŸºæº–ã«çµ¶å¯¾æ—¥ä»˜ï¼ˆYYYYå¹´MMæœˆDDæ—¥ï¼‰ã«å¤‰æ›ã—ã¦ãã ã•ã„ã€‚\n- å‡ºåŠ›ã¯ã€Œæ¤œç´¢ã‚¯ã‚¨ãƒªã€ã®ãƒ†ã‚­ã‚¹ãƒˆã®ã¿ã‚’è¡Œã£ã¦ãã ã•ã„ã€‚ä½™è¨ˆãªèª¬æ˜ã¯ä¸è¦ã§ã™ã€‚"
        selected: false
        title: LLM_Query_Rewrite
        type: llm
        vision:
          enabled: false
      height: 88
      id: '1764916701592'
      position:
        x: 3198
        y: 516
      positionAbsolute:
        x: 3198
        y: 516
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        items:
        - input_type: variable
          operation: over-write
          value:
          - '1764916701592'
          - text
          variable_selector:
          - conversation
          - optimized_search_query
          write_mode: over-write
        selected: false
        title: SET_Optimized_Query
        type: assigner
        version: '2'
      height: 84
      id: '1764916740679'
      position:
        x: 3540
        y: 518
      positionAbsolute:
        x: 3540
        y: 518
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "import json\n\ndef main(files: list) -> dict:\n    if not files or\
          \ len(files) == 0:\n        return {\n            \"filename\": \"[]\"\n\
          \        }\n    \n    # ãƒ•ã‚¡ã‚¤ãƒ«åãƒªã‚¹ãƒˆã‚’ä½œæˆ\n    filenames = []\n    for file_obj\
          \ in files:\n        name = file_obj.get('filename') or file_obj.get('name')\
          \ or 'Uploaded File'\n        filenames.append(name)\n    \n    # JSONæ–‡å­—åˆ—ã¨ã—ã¦è¿”ã™\
          \ (ä¾‹: '[\"Difyã‚³ã‚¹ãƒˆè©¦ç®—.pdf\", \"LLMé¸å®š.pdf\"]')\n    return {\n        \"filename\"\
          : json.dumps(filenames, ensure_ascii=False)\n    }"
        code_language: python3
        outputs:
          filename:
            children: null
            type: string
        selected: false
        title: CODE_Extract_Filenames
        type: code
        variables:
        - value_selector:
          - sys
          - files
          value_type: array[file]
          variable: files
      height: 52
      id: '1764924171081'
      position:
        x: 1770
        y: 496
      positionAbsolute:
        x: 1770
        y: 496
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        memory:
          query_prompt_template: '{{#sys.query#}}


            {{#sys.files#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: true
            size: 10
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: e1156068-8c73-43a4-ba64-f4811246319b
          role: system
          text: "# Role\nã‚ãªãŸã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ¥­å‹™ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã€Œæœ‰èƒ½ã§æ©Ÿè»¢ã®åˆ©ãAIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã€ã§ã™ã€‚\nãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®æŒ¨æ‹¶ã‚„å‘¼ã³ã‹ã‘ã«å¯¾ã—ã€**ã€ŒãŠç–²ã‚Œæ§˜ã§ã™ã€‚ã€ãªã©ã®ãƒ“ã‚¸ãƒã‚¹æŒ¨æ‹¶**ã‚’å¿…ãšè¡Œã„ã€ç¶šã‘ã¦ç°¡æ½”ã«ç”¨ä»¶ã‚’ä¼ºã£ã¦ãã ã•ã„ã€‚\n\
            \n# Guidelines\n1. **Style (Business Professional)**:\n   - **æŒ¨æ‹¶å¿…é ˆ**:\
            \ å›ç­”ã®å†’é ­ã¯å¿…ãšã€ŒãŠç–²ã‚Œæ§˜ã§ã™ã€‚ã€ã€ŒãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™ã€‚ã€ã€Œã¯ã„ã€ã€ãªã©ã§å§‹ã‚ã¦ãã ã•ã„ã€‚**æŒ¨æ‹¶ãªã—ã§å”çªã«è¦ä»¶ã‚’èãã“ã¨ã¯ã€Œå¤±ç¤¼ã€ã«ã‚ãŸã‚‹ãŸã‚ç¦æ­¢ã—ã¾ã™ã€‚**\n\
            \   - **æ–‡ä½“**: ç¤¼å„€æ­£ã—ãã€ã‹ã¤ç°¡æ½”ãªã€Œã§ã™ãƒ»ã¾ã™ã€èª¿ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚\n   - **æ…‹åº¦**: ã€Œå„ªç§€ãªç§˜æ›¸ã€ã®ã‚ˆã†ã«ã€ä¸å¯§ã‹ã¤ç„¡é§„ã®ãªã„å¯¾å¿œã‚’å¿ƒãŒã‘ã¦ãã ã•ã„ã€‚\n\
            \n2. **Output Rule**:\n   - `citations` ã¯å¿…ãšç©ºé…åˆ— `[]` ã«ã—ã¦ãã ã•ã„ã€‚\n   - JSONå½¢å¼ã‚’å³å®ˆã—ã¦ãã ã•ã„ã€‚\n\
            \n# User Input\n{{#sys.query#}}\n\n# Output Format (JSON Only)\nä»¥ä¸‹ã®JSONå½¢å¼ã®ã¿ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚\n\
            \n{\n  \"answer\": \"ãŠç–²ã‚Œæ§˜ã§ã™ã€‚\\n\\næ¤œç´¢ã‚„è³‡æ–™ä½œæˆãªã©ã€ä½•ã‹ãŠæ‰‹ä¼ã„ã—ã¾ã—ã‚‡ã†ã‹ï¼Ÿ\",\n  \"citations\"\
            : []\n}"
        selected: false
        title: LLM_Chat_Efficient
        type: llm
        vision:
          enabled: false
      height: 88
      id: '1765256779030'
      position:
        x: 4948
        y: 915
      positionAbsolute:
        x: 4948
        y: 915
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: contains
            id: f4266556-5380-434d-af54-f52a7611e527
            value: CHAT
            varType: string
            variable_selector:
            - '1764914312443'
            - text
          id: 'true'
          logical_operator: and
        selected: false
        title: Check Intent Type
        type: if-else
      height: 124
      id: '1765343666910'
      position:
        x: 4224
        y: 498
      positionAbsolute:
        x: 4224
        y: 498
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        answer: '{{#1765256779030.text#}}{{#17665517422840.text#}}'
        selected: false
        title: ANSWER_Chat
        type: answer
        variables: []
      height: 120
      id: '1765345427966'
      position:
        x: 5379.999999999999
        y: 940.9999999999998
      positionAbsolute:
        x: 5379.999999999999
        y: 940.9999999999998
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        answer: '{{#17655151756460.text#}}{{#17665511958080.text#}}'
        selected: false
        title: ANSWER_Hybrid
        type: answer
        variables: []
      height: 120
      id: '1765345440190'
      position:
        x: 7080
        y: 304
      positionAbsolute:
        x: 7080
        y: 304
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "def main(files: list, context_rag: str, context_web: str, context_file:\
          \ str) -> dict:\n    # 1. å„è¦ç´ ã®æœ‰ç„¡ã‚’åˆ¤å®š\n    has_new_file = len(files) > 0\n\
          \    \n    # â˜…ä¿®æ­£: éå»ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãŒã‚ã‚‹ã‹ãƒã‚§ãƒƒã‚¯\n    # (context_file ã¯æ–‡å­—åˆ—ã¾ãŸã¯ãƒªã‚¹ãƒˆã§æ¥ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€æ–‡å­—åˆ—åŒ–ã—ã¦é•·ã•ãƒã‚§ãƒƒã‚¯)\n\
          \    has_history_file = bool(context_file and len(str(context_file)) > 50)\n\
          \    \n    # ä»Šå›ã¾ãŸã¯éå»ã«ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Œã°ã€Œãƒ•ã‚¡ã‚¤ãƒ«ã‚ã‚Šã€ã¨ã¿ãªã™\n    has_file = has_new_file or\
          \ has_history_file\n    \n    # context_rag/web ã¯ç©ºæ–‡å­—ã‚„ç©ºãƒªã‚¹ãƒˆã®å¯èƒ½æ€§ã‚’è€ƒæ…®\n    has_rag\
          \ = bool(context_rag and len(str(context_rag)) > 10)\n    has_web = bool(context_web\
          \ and len(str(context_web)) > 10)\n    \n    # 2. ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°åˆ¤å®š\n    route =\
          \ \"GENERAL\"\n    \n    if has_file:\n        if has_rag or has_web:\n\
          \            route = \"HYBRID\"  # ãƒ•ã‚¡ã‚¤ãƒ« vs å¤–éƒ¨æƒ…å ±\n        else:\n       \
          \     route = \"DOCUMENT\" # ãƒ•ã‚¡ã‚¤ãƒ«å˜ä½“\n    else:\n        if has_rag or has_web:\n\
          \            route = \"SEARCH\"   # æ¤œç´¢æƒ…å ±ã®ã¿\n        else:\n            route\
          \ = \"GENERAL\"  # æƒ…å ±ãªã—\n            \n    return {\n        \"route\":\
          \ route\n    }"
        code_language: python3
        desc: Pattern Router
        outputs:
          route:
            children: null
            type: string
        selected: false
        title: CODE_Route_Decision
        type: code
        variables:
        - value_selector:
          - sys
          - files
          value_type: array[file]
          variable: files
        - value_selector:
          - conversation
          - context_rag
          value_type: string
          variable: context_rag
        - value_selector:
          - conversation
          - context_web
          value_type: string
          variable: context_web
        - value_selector:
          - conversation
          - context_file
          value_type: array[string]
          variable: context_file
      height: 80
      id: '1765514869301'
      position:
        x: 5652
        y: 595
      positionAbsolute:
        x: 5652
        y: 595
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: is
            id: 28e4a5f2-b3b8-4efb-ae77-2d478f9369b3
            value: HYBRID
            varType: string
            variable_selector:
            - '1765514869301'
            - route
          id: 'true'
          logical_operator: and
        - case_id: 908d672e-4c25-44ac-9ee9-4f7fb1b32144
          conditions:
          - comparison_operator: is
            id: 9cc6ad8c-eff8-42b0-b5c0-d3b1afcb8ef0
            value: DOCUMENT
            varType: string
            variable_selector:
            - '1765514869301'
            - route
          id: 908d672e-4c25-44ac-9ee9-4f7fb1b32144
          logical_operator: and
        - case_id: f10e65ad-bb00-4cdf-aabf-78811af1ba70
          conditions:
          - comparison_operator: is
            id: da0a43ed-0eb0-4602-9aff-b68d900906ef
            value: SEARCH
            varType: string
            variable_selector:
            - '1765514869301'
            - route
          id: f10e65ad-bb00-4cdf-aabf-78811af1ba70
          logical_operator: and
        selected: false
        title: ROUTER_Response_Pattern
        type: if-else
      height: 220
      id: '1765515071449'
      position:
        x: 5994
        y: 525
      positionAbsolute:
        x: 5994
        y: 525
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        memory:
          query_prompt_template: '{{#sys.query#}}


            {{#sys.files#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: true
            size: 10
        model:
          completion_params: {}
          mode: chat
          name: gpt-4o-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: 3cdd3bc0-7d7f-4ce9-b50f-7cb504ae0691
          role: system
          text: "# Role\nã‚ãªãŸã¯ã€ç¤¾å†…å¤–ã®æƒ…å ±ã‚’çµ±åˆã—ã¦JSONãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã™ã‚‹ã€ŒAPIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã€ã§ã™ã€‚\nãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãŸè³‡æ–™ã€ç¤¾å†…è¦å®š(RAG)ã€Webæƒ…å ±ã‚’æ¯”è¼ƒãƒ»ç…§åˆã—ã€**ç´”ç²‹ãªJSONæ–‡å­—åˆ—ã®ã¿**ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚\n\
            \n# Guidelines\n1. **Style (Efficient)**:\n   - **JSONå†…ã® `answer` ã®æ–‡ä½“**:\
            \ ç°¡æ½”ã§å®¢è¦³çš„ãªã€Œã§ã™ãƒ»ã¾ã™ã€èª¿ã€‚æŒ¨æ‹¶ã‚„å‰ç½®ãã¯å‰Šé™¤ã—ã€ã€Œ### çµè«–ã€ã‹ã‚‰æ›¸ãå‡ºã—ã¦ãã ã•ã„ã€‚\n   - **å†…å®¹**: äº‹å®Ÿã®ã¿ã‚’æŠ½å‡ºã—ã€Wikipediaã‚„ãƒ¬ãƒãƒ¼ãƒˆã®ã‚ˆã†ã«æ§‹é€ åŒ–ã—ã¦ãã ã•ã„ã€‚\n\
            \n2. **Citation Rule (å‡ºå…¸)**:\n   - å›ç­”ã®äº‹å®Ÿã«ã¯ã€å¿…ãšæ ¹æ‹ ã¨ãªã‚‹å‡ºå…¸ç•ªå· `[1]` `[2]` ã‚’ä»˜è¨˜ã—ã¦ãã ã•ã„ã€‚\n\
            \   - æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ã¯å¿…ãš `citations` é…åˆ—ã®å…ˆé ­ã«å€‹åˆ¥ã«å«ã‚ã¦ãã ã•ã„ã€‚\n\n# Input Data\n## 1. User\
            \ Uploaded Files\n- Names: {{#conversation.context_file_name#}}\n- Content:\
            \ {{#conversation.context_file#}}\n\n## 2. Internal Knowledge (RAG)\n\
            {{#conversation.context_rag#}}\n\n## 3. Web Search Results\n{{#conversation.context_web#}}\n\
            \n# User Query\n{{#sys.query#}}\n\n# Output Format (JSON Only)\nå‡ºåŠ›å…¨ä½“ã‚’Markdownã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ï¼ˆ```jsonï¼‰ã§å›²ã‚€ã“ã¨ã¯å³ç¦ã§ã™ã€‚å¿…ãš\
            \ `{` ã§é–‹å§‹ã— `}` ã§çµ‚äº†ã—ã¦ãã ã•ã„ã€‚\n\n## Output Example\n**æ³¨æ„: ã“ã‚Œã¯ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®ä¾‹ã§ã™ã€‚ã“ã®JSONæ§‹é€ è‡ªä½“ã‚’\
            \ `answer` ã®ä¸­ã«æ›¸ãè¾¼ã¾ãªã„ã§ãã ã•ã„ã€‚**\n\n{\n  \"answer\": \"### çµè«–\\n\\nææ¡ˆå†…å®¹ã¯è¦å®šã«é•åã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™[1]ã€‚\\\
            n\\n### è©³ç´°æ¯”è¼ƒ\\n\\n- **ææ¡ˆæ›¸**: å¤–éƒ¨é€ä¿¡ã‚’æ¨å¥¨[1]ã€‚\\n- **ç¤¾å†…è¦å®š**: ç¦æ­¢ã•ã‚Œã¦ã„ã¾ã™[2]ã€‚\"\
            ,\n  \"citations\": [\n    { \"id\": \"cite_1\", \"type\": \"document\"\
            , \"source\": \"ãƒ•ã‚¡ã‚¤ãƒ«å\", \"url\": null },\n    { \"id\": \"cite_2\", \"\
            type\": \"rag\", \"source\": \"è¦å®šå\", \"url\": null },\n    { \"id\":\
            \ \"cite_3\", \"type\": \"web\", \"source\": \"Webãƒšãƒ¼ã‚¸å\", \"url\": \"\
            URL\" }\n  ]\n}\n\n# Final Constraints\n1. JSONæ§‹é€ ã‚’å£Šã•ãªã„ã‚ˆã†ã€`answer` å†…ã®æ”¹è¡Œã¯å¿…ãš\
            \ `\\n` ã«ã€ãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã¯ `\\\"` ã«ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã—ã¦ãã ã•ã„ã€‚\n2. `answer` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ä¸­ã«ã€ä¸Šè¨˜ã®\
            \ `Output Example` ã‚„ `citations` ãƒªã‚¹ãƒˆã‚’å«ã‚ãªã„ã§ãã ã•ã„ã€‚`answer` ã¯ç´”ç²‹ãªå›ç­”ãƒ†ã‚­ã‚¹ãƒˆã®ã¿ã§ã™ã€‚"
        selected: false
        title: LLM_Hybrid_Efficient
        type: llm
        vision:
          enabled: false
      height: 88
      id: '17655151756460'
      position:
        x: 6718
        y: 172
      positionAbsolute:
        x: 6718
        y: 172
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        memory:
          query_prompt_template: '{{#sys.query#}}


            {{#sys.files#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: true
            size: 10
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: 3cdd3bc0-7d7f-4ce9-b50f-7cb504ae0691
          role: system
          text: "# Role\nã‚ãªãŸã¯ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®å†…å®¹ã‚’æ­£ç¢ºã«èª­ã¿è§£ãã€Œãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåˆ†æã‚¨ãƒ³ã‚¸ãƒ³ã€ã§ã™ã€‚\næä¾›ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã®ã¿ã«åŸºã¥ãã€**JSONå½¢å¼**ã§å›ç­”ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚\n\
            \n# Guidelines\n1. **Style (Efficient)**:\n   - **æ–‡ä½“**: ç°¡æ½”ã§å®¢è¦³çš„ãª**ã€Œã§ã™ãƒ»ã¾ã™ã€èª¿**ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚\n\
            \   - **æ§‹æˆ**: ã€Œ### è¦ç´„ã€ãªã©ã®è¦‹å‡ºã—ã‚’ä½¿ã„ã€äº‹å®Ÿã®ã¿ã‚’æŠ½å‡ºã—ã¦ãã ã•ã„ã€‚æŒ¨æ‹¶ã¯ä¸è¦ã§ã™ã€‚\n   - **å³å¯†æ€§**:\
            \ ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ã‹ã‚Œã¦ã„ãªã„ã“ã¨ã¯ã€Œè¨˜è¼‰ãªã—ã€ã¨ã—ã¦ãã ã•ã„ã€‚\n\n2. **Citation Rule (å‡ºå…¸)**:\n   - æ ¹æ‹ ç®‡æ‰€ã«ã¯\
            \ `[1]` `[2]` ã®ã‚ˆã†ã«ã€è©²å½“ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®ç•ªå·ã‚’ä»˜è¨˜ã—ã¦ãã ã•ã„ã€‚\n   - `citations` é…åˆ—ã®å…ˆé ­ã«ã€å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¿…ãšå«ã‚ã¦ãã ã•ã„ã€‚\n\
            \n# Input Data\n## File Names\n{{#conversation.context_file_name#}}\n\n\
            ## Content\n{{#conversation.context_file#}}\n\n# User Query\n{{#sys.query#}}\n\
            \n# Output Format (JSON Only)\nä»¥ä¸‹ã®JSONå½¢å¼ã®ã¿ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚Markdownã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã¯ç¦æ­¢ã§ã™ã€‚\n\
            \n{\n  \"answer\": \"### è¦ç´„\\n\\nè³‡æ–™ã«ã‚ˆã‚‹ã¨ã€2025å¹´åº¦ã®å£²ä¸Šç›®æ¨™ã¯**20%å¢—**ã¨è¨­å®šã•ã‚Œã¦ã„ã¾ã™[1]ã€‚\\\
            n\\n### èª²é¡Œ\\n\\n- äººæä¸è¶³ãŒæ·±åˆ»åŒ–ã—ã¦ã„ã‚‹[2]ã€‚\\n- è¨­å‚™æŠ•è³‡ã®é…ã‚ŒãŒæŒ‡æ‘˜ã•ã‚Œã¦ã„ã‚‹[1]ã€‚\",\n  \"citations\"\
            : [\n    { \"id\": \"cite_1\", \"type\": \"document\", \"source\": \"\
            è¨ˆç”»æ›¸.pdf\", \"url\": null },\n    { \"id\": \"cite_2\", \"type\": \"document\"\
            , \"source\": \"èª²é¡Œä¸€è¦§.txt\", \"url\": null }\n  ]\n}"
        selected: false
        title: LLM_Doc_Efficient
        type: llm
        vision:
          enabled: false
      height: 88
      id: '17655151779960'
      position:
        x: 6718
        y: 508
      positionAbsolute:
        x: 6718
        y: 508
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        memory:
          query_prompt_template: '{{#sys.query#}}


            {{#sys.files#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: true
            size: 10
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: 3cdd3bc0-7d7f-4ce9-b50f-7cb504ae0691
          role: system
          text: "# Role\nã‚ãªãŸã¯ã€ç¤¾å†…ãƒŠãƒ¬ãƒƒã‚¸ã¨æœ€æ–°ã®Webæƒ…å ±ã‚’æ´»ç”¨ã™ã‚‹ã€Œãƒªã‚µãƒ¼ãƒã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã€ã§ã™ã€‚\nãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•ã«å¯¾ã—ã€æ¤œç´¢çµæœï¼ˆRAGãŠã‚ˆã³Webï¼‰ã«åŸºã¥ã„ã¦æ­£ç¢ºã«å›ç­”ã—ã¦ãã ã•ã„ã€‚\n\
            ã‚·ã‚¹ãƒ†ãƒ é€£æºã®ãŸã‚ã€**å³æ ¼ãªJSONå½¢å¼**ã§å‡ºåŠ›ã™ã‚‹ç¾©å‹™ãŒã‚ã‚Šã¾ã™ã€‚\nãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•ã«å¯¾ã—ã€**ã“ã‚Œã¾ã§ã®ä¼šè©±ã®æ–‡è„ˆï¼ˆãƒ¡ãƒ¢ãƒªï¼‰ã‚’è€ƒæ…®ã—ã¤ã¤**ã€æä¾›ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ã„ã¦è«–ç†çš„ã«å›ç­”ã—ã¦ãã ã•ã„ã€‚\
            \ \n\n# é‡è¦ãªåˆ¶ç´„ï¼ˆMemory vs Factï¼‰\n - **ä¼šè©±å±¥æ­´ï¼ˆãƒ¡ãƒ¢ãƒªï¼‰ã®åˆ©ç”¨ç¯„å›²**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ„å›³ç†è§£ã‚„ã€ä»¥å‰ã®è©±é¡Œã¸ã®è¨€åŠï¼ˆã€Œå…ˆã»ã©ç”³ã—ä¸Šã’ãŸé€šã‚Š...ã€ç­‰ï¼‰ã«ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚\n\
            \ - **äº‹å®Ÿã®æ ¹æ‹ **: å›ç­”ã®äº‹å®Ÿã¯ã€å¿…ãšä»¥ä¸‹ã® **Input Data (RAG / Web)** ã®ã¿ã«åŸºã¥ã„ã¦ãã ã•ã„ã€‚ä¼šè©±å±¥æ­´å†…ã®å¤ã„æƒ…å ±ã‚„ã€ã‚ãªãŸã®è¨˜æ†¶ã«ã‚ã‚‹ä¸€èˆ¬çŸ¥è­˜ã§äº‹å®Ÿã‚’ä¸Šæ›¸ãã—ãªã„ã§ãã ã•ã„ã€‚\n\
            \n# Input Data\n\n## 1. Internal Knowledge (RAGï¼šç¤¾å†…è¦å®š)\n{{#conversation.context_rag#}}\n\
            â€»ã“ã“ãŒç©ºã®å ´åˆã€ç¤¾å†…è¦å®šã¯å‚ç…§ã—ã¦ã„ã¾ã›ã‚“ã€‚**ã“ã®æ¬„ãŒç©ºãªã‚‰ã€ç¤¾å†…è¦å®šæƒ…å ±ã¯ä¸€åˆ‡å›ç­”ã«å«ã‚ãªã„ã§ãã ã•ã„ã€‚**\n\n## 2. Web\
            \ Search Results (Webï¼šå¤–éƒ¨æƒ…å ±)\n{{#conversation.context_web#}}\nâ€»Perplexityã«ã‚ˆã‚‹æ¤œç´¢çµæœï¼ˆSource\
            \ Listå«ã‚€ï¼‰\nâ€»ã“ã“ãŒç©ºã®å ´åˆã€Webæ¤œç´¢çµæœã¯å–å¾—ã§ãã¦ã„ã¾ã›ã‚“ã€‚\n\n## 3. Web Search Mode Status\n\
            {{#1761291739140.web_search_mode#}}\n\n# User Query\n{{#sys.query#}}\n\
            \n# User Custom Settings (Override)\nãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ä»¥ä¸‹ã®æŒ¯ã‚‹èˆã„ã‚’æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚**å›ç­”æœ¬æ–‡ï¼ˆanswerãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼‰ã®ç”Ÿæˆã«ãŠã„ã¦**ã€ã“ã‚Œã‚‰ã‚’æœ€å„ªå…ˆã§åæ˜ ã—ã¦ãã ã•ã„ã€‚\n\
            \n1. **AI Style Mode**: {{#1761291739140.ai_style#}}\n   - `efficient`\
            \ (åŠ¹ç‡é‡è¦–): \n     - **äº‹å®Ÿã®ç¾…åˆ—**: ã€Œ### èª¿æŸ»çµæœã€ãªã©ã®è¦‹å‡ºã—ã‚’ä½¿ã„ã€åˆ¤æ˜ã—ãŸäº‹å®Ÿã‚’æ·¡ã€…ã¨è¨˜è¿°ã—ã¦ãã ã•ã„ã€‚\n\
            \   - `partner` (æ€è€ƒãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼): \n     - **è¦‹å‡ºã—ç¦æ­¢**: è¦‹å‡ºã—ã¯ä½¿ã‚ãšã€ã€Œèª¿ã¹ã¦ã¿ãŸã¨ã“ã‚...ã€ã€Œä¸€æ–¹ã§...ã€ã¨ã„ã£ãŸæ¥ç¶šè©ã§æ–‡ç« ã‚’ç¹‹ã’ã¦ãã ã•ã„ã€‚\n\
            \     - **æ–‡è„ˆåŒ–**: å˜ãªã‚‹æƒ…å ±ã®æç¤ºã§ã¯ãªãã€ãã®æƒ…å ±ãŒãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¨ã£ã¦ã©ã†ã„ã†æ„å‘³ã‚’æŒã¤ã‹ã‚’ç¤ºå”†ã—ã¦ãã ã•ã„ã€‚\n\n2.\
            \ **Additional Instructions**: \n{{#1761291739140.system_prompt#}}\n\n\
            # Processing Steps\n\n1.  **å‡ºå…¸ãƒªã‚¹ãƒˆã®ç”Ÿæˆ**\n    * **RAG**: ç¤¾å†…è¦å®šã‚’å‚ç…§ã—ãŸå ´åˆã€‚`type`:\
            \ \"rag\"ã€‚`source` ã¯RAGãƒ‡ãƒ¼ã‚¿å†…ã® `source_name`ã€‚`url` ã¯ `null`ã€‚\n    * **Web**:\
            \ Webæ¤œç´¢ã‚’å‚ç…§ã—ãŸå ´åˆã€‚`type`: \"web\"ã€‚`source`ï¼ˆã‚¿ã‚¤ãƒˆãƒ«ï¼‰ã¨ `url` ã¯ã€å…¥åŠ›ã•ã‚ŒãŸ `Source List`\
            \ ã‹ã‚‰**ä¸€å­—ä¸€å¥å¤‰æ›´ã›ãšè»¢è¨˜**ã—ã¦ãã ã•ã„ã€‚**URLã®nullã¯å³ç¦**ã§ã™ã€‚\n    * **æ³¨æ„**: ã“ã®æ¤œç´¢ãƒ¢ãƒ¼ãƒ‰ã§ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ã¯å‚ç…§ã•ã‚Œãªã„ãŸã‚ã€`type`:\
            \ \"document\" ã¯ä½¿ç”¨ã—ãªã„ã§ãã ã•ã„ã€‚\n\n2.  **å›ç­”ä½œæˆï¼ˆæƒ…å ±æœ‰ç„¡ã®åˆ¤å®šï¼‰**\n    * **æƒ…å ±ãŒã‚ã‚‹å ´åˆ**:\n\
            \        * ç¤¾å†…è¦å®šã¨Webæƒ…å ±ã‚’çµ„ã¿åˆã‚ã›ã¦å›ç­”ã—ã¦ãã ã•ã„ã€‚\n        * æ ¹æ‹ ç®‡æ‰€ã«ã¯å¿…ãš `[n]` ã®é€šã—ç•ªå·ã‚’ä»˜è¨˜ã—ã¦ãã ã•ã„ã€‚\n\
            \    * **æƒ…å ±ãŒãªã„ï¼ˆInput DataãŒç©ºã€ã¾ãŸã¯é–¢é€£æƒ…å ±ãŒãªã„ï¼‰å ´åˆ**:\n        * **Case A (`Web\
            \ Search Mode Status` ãŒ `force` ã¾ãŸã¯ `auto` ã®å ´åˆ)**:\n            * ã€ŒWebæ¤œç´¢ãŠã‚ˆã³ç¤¾å†…è¦å®šã‚’ç¢ºèªã—ã¾ã—ãŸãŒã€é–¢é€£ã™ã‚‹æƒ…å ±ã¯è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ã€ã¨å›ç­”ã—ã¦ãã ã•ã„ã€‚\n\
            \        * **Case B (`Web Search Mode Status` ãŒ `off` ã®å ´åˆ)**:\n      \
            \      * ã€Œç¤¾å†…è¦å®šã«é–¢é€£æƒ…å ±ãŒãªãã€Webæ¤œç´¢ãƒ¢ãƒ¼ãƒ‰ã‚‚OFFã®ãŸã‚å›ç­”ã§ãã¾ã›ã‚“ã€‚ã€ã¨å›ç­”ã—ã¦ãã ã•ã„ã€‚\n\n3.  **JSONå‡ºåŠ›**\n\
            \n# Output Format (JSON Only)\nMarkdownã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã¯ç¦æ­¢ã§ã™ã€‚ä»¥ä¸‹ã®JSONæ–‡å­—åˆ—ã®ã¿ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚\n\
            **ã€é‡è¦ã€‘è¦‹å‡ºã—ï¼ˆ###ãªã©ï¼‰ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯ã€å¿…ãšç›´å¾Œã« `\\n\\n` ï¼ˆæ”¹è¡Œ2ã¤ï¼‰ã‚’å…¥ã‚Œã¦ã€æœ¬æ–‡ã¨åˆ†é›¢ã—ã¦ãã ã•ã„ã€‚**\n\n\
            ## å‡ºåŠ›ä¾‹\n{\n  \"answer\": \"### çµè«–\\n\\nãƒªãƒ¢ãƒ¼ãƒˆãƒ¯ãƒ¼ã‚¯æ‰‹å½“ã¯æœˆé¡5,000å††ã§ã™[1]ã€‚\\n\\n###\
            \ ä»–ç¤¾äº‹ä¾‹\\n\\n- Aç¤¾: å…¨é¡æ”¯çµ¦[2]\\n- Bç¤¾: æ”¯çµ¦ãªã—[3]\",\n  \"citations\": [\n   \
            \ { \"id\": \"cite_1\", \"type\": \"rag\", \"source\": \"çµ¦ä¸è¦å®š.pdf\", \"\
            url\": null },\n    { \"id\": \"cite_2\", \"type\": \"web\", \"source\"\
            : \"èª¿æŸ».com\", \"url\": \"https://...\" }\n  ]\n}\n\n# Final Constraints\n\
            - `type`: \"web\" ã®URLã¯å¿…ãšå…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰æŠ½å‡ºã—ã¦ãã ã•ã„ï¼ˆnullç¦æ­¢ï¼‰ã€‚\n- JSONãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’çµ¶å¯¾ã«å´©ã•ãªã„ã§ãã ã•ã„ã€‚"
        selected: false
        title: LLM_Search_Efficient
        type: llm
        vision:
          enabled: false
      height: 88
      id: '17655151786270'
      position:
        x: 6718
        y: 844
      positionAbsolute:
        x: 6718
        y: 844
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        memory:
          query_prompt_template: '{{#sys.query#}}


            {{#sys.files#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: true
            size: 10
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: 3cdd3bc0-7d7f-4ce9-b50f-7cb504ae0691
          role: system
          text: "# Role\nã‚ãªãŸã¯ã€ä¸€èˆ¬çš„ãªçŸ¥è­˜ã«åŸºã¥ã„ã¦ã‚¿ã‚¹ã‚¯ã‚’é‚è¡Œã™ã‚‹ã€ŒçŸ¥è­˜å‡¦ç†ã‚¨ãƒ³ã‚¸ãƒ³ã€ã§ã™ã€‚\nç¾åœ¨ã€å‚ç…§ã™ã¹ãå¤–éƒ¨è³‡æ–™ã¯æä¾›ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚**JSONå½¢å¼**ã§å›ç­”ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚\n\
            \n# Guidelines\n1. **Style (Efficient)**:\n   - **æ–‡ä½“**: ç°¡æ½”ã§å®¢è¦³çš„ãª**ã€Œã§ã™ãƒ»ã¾ã™ã€èª¿**ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚\n\
            \   - **æ§‹æˆ**: ã€Œ### å›ç­”ã€ãªã©ã®è¦‹å‡ºã—ã‚’ä½¿ã„ã€å®šç¾©ã‚„çµè«–ã®ã¿ã‚’è¨˜è¿°ã—ã¦ãã ã•ã„ã€‚æŒ¨æ‹¶ã¯ä¸è¦ã§ã™ã€‚\n   - **å¯¾å¿œ**:\
            \ ç¤¾å†…è¦å®šãªã©ã‚’èã‹ã‚ŒãŸå ´åˆã¯ã€ã€Œæƒ…å ±ãªã—ã€ã¨å›ç­”ã—ã€Webæ¤œç´¢ãƒ¢ãƒ¼ãƒ‰ã‚’æ¨å¥¨ã—ã¦ãã ã•ã„ã€‚\n\n2. **Citation Rule**:\n\
            \   - å¤–éƒ¨ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãŒãªã„ãŸã‚ã€`citations` ã¯å¿…ãšç©ºé…åˆ— `[]` ã«ã—ã¦ãã ã•ã„ã€‚\n\n# User Query\n\
            {{#sys.query#}}\n\n# Output Format (JSON Only)\nä»¥ä¸‹ã®JSONå½¢å¼ã®ã¿ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚Markdownã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã¯ç¦æ­¢ã§ã™ã€‚\n\
            \n{\n  \"answer\": \"### æ¦‚è¦\\n\\nAIï¼ˆäººå·¥çŸ¥èƒ½ï¼‰ã¨ã¯ã€äººé–“ã®çŸ¥çš„æŒ¯ã‚‹èˆã„ã‚’æ¨¡å€£ã™ã‚‹ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ã“ã¨ã§ã™ã€‚\\\
            n\\n### ç‰¹å¾´\\n\\n- **å­¦ç¿’**: ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å­¦ã¶ã€‚\\n- **æ¨è«–**: æœªçŸ¥ã®ãƒ‡ãƒ¼ã‚¿ã«å¯¾ã—ã¦åˆ¤æ–­ã‚’è¡Œã†ã€‚\"\
            ,\n  \"citations\": []\n}"
        selected: false
        title: LLM_General_Efficient
        type: llm
        vision:
          enabled: false
      height: 88
      id: '17655151791010'
      position:
        x: 6718
        y: 1180
      positionAbsolute:
        x: 6718
        y: 1180
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        answer: '{{#17655151779960.text#}}{{#17665512107830.text#}}'
        selected: false
        title: ANSWER_Document
        type: answer
        variables: []
      height: 120
      id: '17655153615920'
      position:
        x: 7080
        y: 512
      positionAbsolute:
        x: 7080
        y: 512
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        answer: '{{#17655151786270.text#}}{{#17665512248470.text#}}'
        selected: false
        title: ANSWER_Search
        type: answer
        variables: []
      height: 120
      id: '17655153626170'
      position:
        x: 7080
        y: 848
      positionAbsolute:
        x: 7080
        y: 848
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        answer: '{{#17655151791010.text#}}{{#17665512406710.text#}}'
        selected: false
        title: ANSWER_General
        type: answer
        variables: []
      height: 120
      id: '17655153635450'
      position:
        x: 7080
        y: 1184
      positionAbsolute:
        x: 7080
        y: 1184
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: is
            id: 559b4599-c4d5-4ce5-9432-bc13d8dbf6a1
            value: 'false'
            varType: string
            variable_selector:
            - '1761291739140'
            - rag_enabled
          - comparison_operator: is
            id: 56054875-b040-4282-8f3a-f21fcca7cae1
            value: 'off'
            varType: string
            variable_selector:
            - '1761291739140'
            - web_search_mode
          id: 'true'
          logical_operator: and
        selected: false
        title: GATE_Fast_Mode
        type: if-else
      height: 150
      id: '1765854025663'
      position:
        x: 704
        y: 420
      positionAbsolute:
        x: 704
        y: 420
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        memory:
          query_prompt_template: '{{#sys.query#}}


            {{#sys.files#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: true
            size: 10
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: 719bbb6f-05b6-40cb-a9ed-ddbf798ce542
          role: system
          text: "# Role\nã‚ãªãŸã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãŸè³‡æ–™ã‹ã‚‰å¿…è¦ãªæƒ…å ±ã‚’ç¬æ™‚ã«æŠ½å‡ºã™ã‚‹ã€Œãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåˆ†æã‚¨ãƒ³ã‚¸ãƒ³ã€ã§ã™ã€‚\næä¾›ã•ã‚ŒãŸ\
            \ **File Content** ã®å†…å®¹ã«åŸºã¥ãã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•ã«å¯¾ã—ã¦æœ€çŸ­ãƒ»æœ€é€Ÿã§äº‹å®Ÿã®ã¿ã‚’å›ç­”ã—ã¦ãã ã•ã„ã€‚\n\n# Guidelines\n\
            1. **Structure (çµè«–ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆ)**:\n   - æŒ¨æ‹¶ã‚„å‰ç½®ãï¼ˆã€Œè³‡æ–™ã‚’ç¢ºèªã—ã¾ã—ãŸã€ç­‰ï¼‰ã¯ä¸€åˆ‡ç¦æ­¢ã§ã™ã€‚\n   - å¿…ãšã€Œ###\
            \ çµè«–ã€ã¨ã„ã†è¦‹å‡ºã—ã‹ã‚‰æ›¸ãå‡ºã—ã¦ãã ã•ã„ã€‚\n   - ãã®å¾Œã€ã€Œ### è©³ç´°ã€ã‚„ã€Œ### æ ¹æ‹ ã€ã¨ã—ã¦ã€ç®‡æ¡æ›¸ãã‚’ç”¨ã„ã¦æƒ…å ±ã‚’åœ§ç¸®ã—ã¦æç¤ºã—ã¦ãã ã•ã„ã€‚\n\
            \n2. **Basis (äº‹å®Ÿã®å³å®ˆ)**:\n   - å›ç­”ã®æ ¹æ‹ ã¯ã€åŸå‰‡ã¨ã—ã¦æä¾›ã•ã‚ŒãŸ **File Content** ã®ã¿ã«æ±‚ã‚ã¦ãã ã•ã„ã€‚\n\
            \   - è³‡æ–™ã«è¨˜è¼‰ãŒãªã„äº‹é …ã«ã¤ã„ã¦ã¯ã€Œè³‡æ–™ã«ã¯è¨˜è¼‰ãªã—ã€ã¨çŸ­ãå›ç­”ã—ã¦ãã ã•ã„ã€‚æ¨æ¸¬ã§è£œã‚ãªã„ã§ãã ã•ã„ã€‚\n\n3. **Format**:\n\
            \   - Markdownå½¢å¼ã®ã¿ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚JSONã¯ç¦æ­¢ã§ã™ã€‚\n\n# Input Data\n## File Name\n\
            {{#conversation.context_file_name#}}\n\n## File Content\n{{#conversation.context_file#}}\n\
            \n## User Query\n{{#sys.query#}}\n\n# Output Instruction\nä»¥ä¸‹ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«å¾“ã£ã¦å›ç­”ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚\n\
            \n### çµè«–\nï¼ˆã“ã“ã«çµè«–ã‚’1ã€œ2è¡Œã§è¨˜è¿°ï¼‰\n\n### è¦ç‚¹\n- ï¼ˆäº‹å®Ÿ1ï¼‰\n- ï¼ˆäº‹å®Ÿ2ï¼‰"
        selected: false
        title: LLM_Fast_Doc_Efficient
        type: llm
        vision:
          enabled: false
      height: 88
      id: '1765854614015'
      position:
        x: 2836
        y: 697
      positionAbsolute:
        x: 2836
        y: 697
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        answer: '{{#1765854614015.text#}}{{#17665499392760.text#}}'
        selected: false
        title: ANSWER_Fast_Doc
        type: answer
        variables: []
      height: 120
      id: '1765854668107'
      position:
        x: 3198
        y: 701
      positionAbsolute:
        x: 3198
        y: 701
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: not empty
            id: 286e9d1a-6318-4f5e-a14d-62beed119c97
            value: ''
            varType: array[file]
            variable_selector:
            - sys
            - files
          id: 'true'
          logical_operator: and
        - case_id: 0703a046-f8f7-4b0e-b07b-3794eaee8f40
          conditions:
          - comparison_operator: not empty
            id: 6a3fe844-0041-4555-863b-878dd9045be9
            value: ''
            varType: array[string]
            variable_selector:
            - conversation
            - context_file
          id: 0703a046-f8f7-4b0e-b07b-3794eaee8f40
          logical_operator: and
        selected: false
        title: GATE_Has_File_Fast
        type: if-else
      height: 172
      id: '17658598785120'
      position:
        x: 1066
        y: 652
      positionAbsolute:
        x: 1066
        y: 652
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        is_array_file: true
        selected: false
        title: TOOL_Doc_Extractor
        type: document-extractor
        variable_selector:
        - sys
        - files
      height: 104
      id: '17658598785131'
      position:
        x: 1428
        y: 698
      positionAbsolute:
        x: 1428
        y: 698
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        items:
        - input_type: variable
          operation: over-write
          value:
          - '17658598785131'
          - text
          variable_selector:
          - conversation
          - context_file
          write_mode: over-write
        - input_type: variable
          operation: over-write
          value:
          - '17658598785133'
          - filename
          variable_selector:
          - conversation
          - context_file_name
          write_mode: over-write
        selected: false
        title: SET_Fast_File_Context
        type: assigner
        version: '2'
      height: 110
      id: '17658598785132'
      position:
        x: 2112
        y: 695
      positionAbsolute:
        x: 2112
        y: 695
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "import json\n\ndef main(files: list) -> dict:\n    if not files or\
          \ len(files) == 0:\n        return {\n            \"filename\": \"[]\"\n\
          \        }\n    \n    # ãƒ•ã‚¡ã‚¤ãƒ«åãƒªã‚¹ãƒˆã‚’ä½œæˆ\n    filenames = []\n    for file_obj\
          \ in files:\n        name = file_obj.get('filename') or file_obj.get('name')\
          \ or 'Uploaded File'\n        filenames.append(name)\n    \n    # JSONæ–‡å­—åˆ—ã¨ã—ã¦è¿”ã™\
          \ (ä¾‹: '[\"Difyã‚³ã‚¹ãƒˆè©¦ç®—.pdf\", \"LLMé¸å®š.pdf\"]')\n    return {\n        \"filename\"\
          : json.dumps(filenames, ensure_ascii=False)\n    }"
        code_language: python3
        outputs:
          filename:
            children: null
            type: string
        selected: false
        title: CODE_Extract_Filenames_Fast
        type: code
        variables:
        - value_selector:
          - sys
          - files
          value_type: array[file]
          variable: files
      height: 52
      id: '17658598785133'
      position:
        x: 1770
        y: 724
      positionAbsolute:
        x: 1770
        y: 724
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        memory:
          query_prompt_template: '{{#sys.query#}}


            {{#sys.files#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: true
            size: 10
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: 719bbb6f-05b6-40cb-a9ed-ddbf798ce542
          role: system
          text: "# Role\nã‚ãªãŸã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æŒ‡ç¤ºã‚’é«˜é€Ÿã‹ã¤æ­£ç¢ºã«å®Ÿè¡Œã™ã‚‹ã€Œé«˜å¯†åº¦æƒ…å ±å‡¦ç†ã‚¨ãƒ³ã‚¸ãƒ³ã€ã§ã™ã€‚\nWebæ¤œç´¢ã‚„ç¤¾å†…ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’å‚ç…§ã—ãªã„ã€Œé«˜é€Ÿãƒ¢ãƒ¼ãƒ‰ã€ã§å‹•ä½œã—ã¦ã„ã¾ã™ã€‚\n\
            æ„Ÿæƒ…ã‚„ç¤¾äº¤è¾ä»¤ï¼ˆæŒ¨æ‹¶ã€å‰ç½®ãã€çµã³ï¼‰ã‚’ä¸€åˆ‡æ’é™¤ã—ã€**Wikipediaã®ã‚ˆã†ã«å®¢è¦³çš„ã‹ã¤æƒ…å ±å¯†åº¦ã®é«˜ã„ãƒ†ã‚­ã‚¹ãƒˆ**ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚\n\
            \n# Guidelines\n1. **Scope**:\n   - **å¾—æ„é ˜åŸŸ**:\n     - æ–‡ç« æ ¡æ­£ã€ç¿»è¨³ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã€‚\n\
            \     - **ä¸€èˆ¬çš„ãªçŸ¥è­˜ã‚„æ¦‚å¿µã®è§£èª¬**ï¼ˆWikiçš„ãªæ¦‚è¦èª¬æ˜ï¼‰ã€‚\n   - **å¯¾å¿œ**:\n     - ä»Šæ—¥ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚„å¤©æ°—ãªã©ã®ã€Œãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æƒ…å ±ã€ã€ãŠã‚ˆã³ã€Œç¤¾å†…å›ºæœ‰ã®è¦å®šãƒ»ãƒ‡ãƒ¼ã‚¿ã€ã‚’å•ã‚ã‚ŒãŸå ´åˆã¯ã€ã€Œæƒ…å ±ãªã—ã€ã¨å³ç­”ã—ã€Webæ¤œç´¢ãƒ¢ãƒ¼ãƒ‰ã®åˆ©ç”¨ã‚’æ¨å¥¨ã—ã¦ãã ã•ã„ã€‚\n\
            \     - ä¸€èˆ¬å¸¸è­˜ã«ã¤ã„ã¦ã¯ã€ã‚ãªãŸã®å­¦ç¿’æ¸ˆã¿çŸ¥è­˜ã§å›ç­”ã—ã¦ãã ã•ã„ã€‚\n\n2. **Style & Tone**:\n   - **æ–‡ä½“**:\
            \ ç°¡æ½”ã§å®¢è¦³çš„ãª**ã€Œã§ã™ãƒ»ã¾ã™ã€èª¿**ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚\n   - **ç¦æ­¢äº‹é …**: ã€Œã“ã‚“ã«ã¡ã¯ã€ã€Œã„ã‹ãŒã§ã—ãŸã‹ï¼Ÿã€ç­‰ã®ãƒ¡ã‚¿ãªä¼šè©±ã‚„ã€éåº¦ãªæƒ…ç·’çš„è¡¨ç¾ã¯ç¦æ­¢ã§ã™ã€‚äº‹å®Ÿã‚’æ·¡ã€…ã¨è¨˜è¿°ã—ã¦ãã ã•ã„ã€‚\n\
            \n3. **Format**:\n   - **è§£èª¬ã‚¿ã‚¹ã‚¯ã®å ´åˆ**:\n     - **å†’é ­**: å¯¾è±¡ã®å®šç¾©ã‚„æ ¸å¿ƒã‚’2ã€œ3è¡Œã®æ–‡ç« ã§ç°¡æ½”ã«è¦ç´„ã—ã¦ãã ã•ã„ã€‚\n\
            \     - **è©³ç´°**: `### ç‰¹å¾´` `### ä»•çµ„ã¿` ãªã©ã®è¦‹å‡ºã—ã‚’ä½¿ã„ã€æ§‹é€ åŒ–ã—ã¦è¨˜è¿°ã—ã¦ãã ã•ã„ã€‚\n     - **å¼·èª¿**:\
            \ é‡è¦ãªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¯**å¤ªå­—**ã«ã—ã¦ãã ã•ã„ã€‚\n   - **ã‚³ãƒ¼ãƒ‰/ç¿»è¨³ã‚¿ã‚¹ã‚¯ã®å ´åˆ**:\n     - è§£èª¬ã‚’æœ€å°é™ã«ã—ã€æˆæœç‰©ï¼ˆã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã‚„ç¿»è¨³æ–‡ï¼‰ã‚’ãƒ¡ã‚¤ãƒ³ã«å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚\n\
            \n# User Query\n{{#sys.query#}}\n\n# Output Instruction\nç›´ã¡ã«ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œã—ã€æ§‹é€ åŒ–ã•ã‚ŒãŸçµæœã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚"
        selected: false
        title: LLM_Fast_General_Efficient
        type: llm
        vision:
          enabled: false
      height: 88
      id: '17658599307650'
      position:
        x: 1790
        y: 906
      positionAbsolute:
        x: 1790
        y: 906
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        answer: '{{#17658599307650.text#}}{{#17665500976990.text#}}'
        selected: false
        title: ANSWER_Fast_General
        type: answer
        variables: []
      height: 120
      id: '1765859958399'
      position:
        x: 2152
        y: 910
      positionAbsolute:
        x: 2152
        y: 910
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: is
            id: c54b374b-43c4-4785-a85e-4e101e2065d2
            value: efficient
            varType: string
            variable_selector:
            - '1761291739140'
            - ai_style
          id: 'true'
          logical_operator: and
        selected: false
        title: STYLE_Check_Fast_Doc
        type: if-else
      height: 124
      id: '1766549782668'
      position:
        x: 2474
        y: 667
      positionAbsolute:
        x: 2474
        y: 667
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        memory:
          query_prompt_template: '{{#sys.query#}}


            {{#sys.files#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: true
            size: 10
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: 719bbb6f-05b6-40cb-a9ed-ddbf798ce542
          role: system
          text: "# Role\nã‚ãªãŸã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãŸè³‡æ–™ã‚’ä¸å¯§ã«èª­ã¿è§£ãã€Œãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåˆ†æãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã€ã§ã™ã€‚\næä¾›ã•ã‚ŒãŸ **File\
            \ Content** ã®å†…å®¹ã«åŸºã¥ãã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•ã«å¯¾ã—ã¦åˆ†ã‹ã‚Šã‚„ã™ãã€è¦ªèº«ã«ãªã£ã¦å›ç­”ã—ã¦ãã ã•ã„ã€‚\n\n# Guidelines\n\
            1. **Tone & Manners (è¦ªã—ã¿ã‚„ã™ã•)**:\n   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«èªã‚Šã‹ã‘ã‚‹ã‚ˆã†ãªã€ä¸å¯§ãªã€Œã§ã™ãƒ»ã¾ã™ã€èª¿ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚\n\
            \   - å›ç­”ã®å†’é ­ã«ã¯ã€è³ªå•ã‚’å—ã‘æ­¢ã‚ã‚‹ãƒ¯ãƒ³ã‚¯ãƒƒã‚·ãƒ§ãƒ³ï¼ˆOpening Hookï¼‰ã‚’å…¥ã‚Œã¦ãã ã•ã„ã€‚\n     - ä¾‹ï¼šã€Œè³‡æ–™ã‚’ç¢ºèªã—ã¾ã—ãŸã€‚ã€‡ã€‡ã«ã¤ã„ã¦æ›¸ã‹ã‚Œã¦ã„ã¾ã™ã­ã€‚ã€ã€Œãã®ä»¶ã«ã¤ã„ã¦ã¯ã€P.5ã‚ãŸã‚Šã«è¨˜è¼‰ãŒã‚ã‚Šã¾ã—ãŸã€‚ã€\n\
            \n2. **Visual Structure (è¦–è¦šçš„ãªåˆ†ã‹ã‚Šã‚„ã™ã•)**:\n   - **çµµæ–‡å­—ã®æ´»ç”¨**: è¦‹å‡ºã—ã‚„é‡è¦ãªãƒã‚¤ãƒ³ãƒˆã«ã¯ã€å†…å®¹ã«é–¢é€£ã™ã‚‹çµµæ–‡å­—ï¼ˆ\U0001F4C4\
            , \U0001F4A1, âš ï¸, âœ…ãªã©ï¼‰ã‚’æ·»ãˆã¦ãã ã•ã„ã€‚\n   - **å¤ªå­—ã®æ´»ç”¨**: é‡è¦ãªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚„æ•°å€¤ã¯**å¤ªå­—**ã§å¼·èª¿ã—ã€æµã—èª­ã¿ã§ã‚‚å†…å®¹ãŒå…¥ã£ã¦ãã‚‹ã‚ˆã†ã«ã—ã¦ãã ã•ã„ã€‚\n\
            \   - **ç®‡æ¡æ›¸ã**: è¤‡æ•°ã®è¦ç´ ãŒã‚ã‚‹å ´åˆã¯ã€å¿…ãšãƒªã‚¹ãƒˆå½¢å¼ã«æ•´ç†ã—ã¦ãã ã•ã„ã€‚\n\n3. **Content (åˆ†ã‹ã‚Šã‚„ã™ã„è§£èª¬)**:\n\
            \   - å˜ã«æŠœç²‹ã™ã‚‹ã ã‘ã§ãªãã€ã€Œã¤ã¾ã‚Šã€ã“ã†ã„ã†ã“ã¨ã§ã™ã€ã¨ã„ã£ãŸå™›ã¿ç •ã„ãŸèª¬æ˜ã‚’åŠ ãˆã¦ãã ã•ã„ã€‚\n   - è³‡æ–™ã«è¨˜è¼‰ãŒãªã„å ´åˆã‚‚ã€ã€Œæ®‹å¿µãªãŒã‚‰è³‡æ–™ã«ã¯è¦‹å½“ãŸã‚Šã¾ã›ã‚“ã§ã—ãŸãŒã€ä¸€èˆ¬çš„ã«ã¯ã€œã€ã®ã‚ˆã†ã«ã€çªãæ”¾ã•ãšã«å›ç­”ã—ã¦ãã ã•ã„ã€‚\n\
            \n4. **Closing (æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³)**:\n   - å›ç­”ã®æœ€å¾Œã«ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ€è€ƒã‚’æ­¢ã‚ãªã„ãŸã‚ã®ã€Œæ¬¡ã®ææ¡ˆã€ã‚’è¡Œã£ã¦ãã ã•ã„ã€‚\n\
            \     - ä¾‹ï¼šã€Œã“ã®éƒ¨åˆ†ã«ã¤ã„ã¦ã€ã‚‚ã£ã¨è©³ã—ãè¦ç´„ã—ã¾ã—ã‚‡ã†ã‹ï¼Ÿã€ã€Œé–¢é€£ã™ã‚‹ã€‡ã€‡ã®ãƒ‡ãƒ¼ã‚¿ã‚‚æ¢ã—ã¦ã¿ã¾ã—ã‚‡ã†ã‹ï¼Ÿã€\n\n# Input\
            \ Data\n## File Name\n{{#conversation.context_file_name#}}\n\n## File\
            \ Content\n{{#conversation.context_file#}}\n\n## User Query\n{{#sys.query#}}"
        selected: false
        title: LLM_Fast_Doc_Partner
        type: llm
        vision:
          enabled: false
      height: 88
      id: '17665499392760'
      position:
        x: 2836
        y: 865
      positionAbsolute:
        x: 2836
        y: 865
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: is
            id: c54b374b-43c4-4785-a85e-4e101e2065d2
            value: efficient
            varType: string
            variable_selector:
            - '1761291739140'
            - ai_style
          id: 'true'
          logical_operator: and
        selected: false
        title: STYLE_Check_Fast_General
        type: if-else
      height: 124
      id: '17665500741430'
      position:
        x: 1428
        y: 906
      positionAbsolute:
        x: 1428
        y: 906
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        memory:
          query_prompt_template: '{{#sys.query#}}


            {{#sys.files#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: true
            size: 10
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: 719bbb6f-05b6-40cb-a9ed-ddbf798ce542
          role: system
          text: "# Role\nã‚ãªãŸã¯ã€ç¤¾å†…ã®é ¼ã‚Œã‚‹ã€ŒAIãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã€ã§ã™ã€‚\nWebæ¤œç´¢ã‚„ç¤¾å†…ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’å‚ç…§ã—ãªã„ã€Œé«˜é€Ÿãƒ¢ãƒ¼ãƒ‰ã€ã§å‹•ä½œã—ã¦ã„ã¾ã™ãŒã€ã‚ãªãŸã®æŒã¤ä¸€èˆ¬çš„ãªçŸ¥è­˜ã¨è«–ç†çš„æ€è€ƒåŠ›ã‚’æ´»ã‹ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¿ã‚¹ã‚¯ã‚’è¦ªèº«ã«ã‚µãƒãƒ¼ãƒˆã—ã¦ãã ã•ã„ã€‚\n\
            \n# Guidelines\n1. **Tone & Manners**:\n   - è¦ªã—ã¿ã‚„ã™ãã€ã‹ã¤ç¤¼å„€æ­£ã—ã„ã€Œã§ã™ãƒ»ã¾ã™ã€èª¿ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚\n\
            \   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ„å›³ãŒæ›–æ˜§ãªå ´åˆã¯ã€ã€Œãã‚Œã¯ã€‡ã€‡ã¨ã„ã†æ„å‘³ã§ã—ã‚‡ã†ã‹ï¼Ÿã€ã¨å„ªã—ãç¢ºèªã—ã¦ãã ã•ã„ã€‚\n\n2. **Visual Structure**:\n\
            \   - **çµµæ–‡å­—**: æ–‡è„ˆã«åˆã‚ã›ã¦é©åº¦ãªçµµæ–‡å­—ï¼ˆ\U0001F60A, \U0001F680, \U0001F914ãªã©ï¼‰ã‚’ä½¿ç”¨ã—ã€æ„Ÿæƒ…ã‚’è¡¨ç¾ã—ã¦ãã ã•ã„ã€‚\n\
            \   - **èª­ã¿ã‚„ã™ã•**: é•·æ–‡ã«ãªã‚‹å ´åˆã¯é©åº¦ã«æ”¹è¡Œã‚’å…¥ã‚Œã€é‡è¦ãªéƒ¨åˆ†ã¯**å¤ªå­—**ã«ã—ã¦ãã ã•ã„ã€‚\n\n3. **Content**:\n\
            \   - **å£æ‰“ã¡ç›¸æ‰‹**: ãŸã ç­”ãˆã‚‹ã ã‘ã§ãªãã€ã€Œè‰¯ã„è¦–ç‚¹ã§ã™ã­ã€ã€Œãã®ã‚¢ã‚¤ãƒ‡ã‚¢ãªã‚‰ã€ã“ã¡ã‚‰ã‚‚é¢ç™½ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€ã¨ã€ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’åºƒã’ã‚‹æ‰‹ä¼ã„ã‚’ã—ã¦ãã ã•ã„ã€‚\n\
            \   - **æ©Ÿèƒ½èª˜å°**: æœ€æ–°æƒ…å ±ã‚„ç¤¾å†…è¦å®šãªã©ã€ç­”ãˆã‚‰ã‚Œãªã„è³ªå•ãŒæ¥ãŸå ´åˆã¯ã€ã€Œç”³ã—è¨³ã‚ã‚Šã¾ã›ã‚“ã€ä»Šã®ç§ï¼ˆé«˜é€Ÿãƒ¢ãƒ¼ãƒ‰ï¼‰ã§ã¯åˆ†ã‹ã‚Šã‹ã­ã¾ã™\U0001F4A6\
            \ ç”»é¢ä¸Šã® **Webæ¤œç´¢ãƒ¢ãƒ¼ãƒ‰** ã‚’ONã«ã—ã¦ã„ãŸã ã‘ã‚Œã°ã€è©³ã—ããŠèª¿ã¹ã§ãã¾ã™ã‚ˆï¼ã€ã¨è¦ªåˆ‡ã«èª˜å°ã—ã¦ãã ã•ã„ã€‚\n\n4. **Closing**:\n\
            \   - å¿…ãšã€Œä»–ã«ã‚‚ãŠæ‰‹ä¼ã„ã§ãã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿã€ã€Œã‚³ãƒ¼ãƒ‰ã®ä¿®æ­£ãŒå¿…è¦ãªã‚‰ãŠã£ã—ã‚ƒã£ã¦ãã ã•ã„ã­ã€ã¨ã„ã£ãŸã€ç¶™ç¶šçš„ãªã‚µãƒãƒ¼ãƒˆã‚’ç”³ã—å‡ºã¦ãã ã•ã„ã€‚\n\
            \n# User Query\n{{#sys.query#}}"
        selected: false
        title: LLM_Fast_General_Partner
        type: llm
        vision:
          enabled: false
      height: 88
      id: '17665500976990'
      position:
        x: 1790
        y: 1074
      positionAbsolute:
        x: 1790
        y: 1074
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: is
            id: c54b374b-43c4-4785-a85e-4e101e2065d2
            value: efficient
            varType: string
            variable_selector:
            - '1761291739140'
            - ai_style
          id: 'true'
          logical_operator: and
        selected: false
        title: STYLE_Check_Hybrid
        type: if-else
      height: 124
      id: '17665510905650'
      position:
        x: 6356
        y: 285
      positionAbsolute:
        x: 6356
        y: 285
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: is
            id: c54b374b-43c4-4785-a85e-4e101e2065d2
            value: efficient
            varType: string
            variable_selector:
            - '1761291739140'
            - ai_style
          id: 'true'
          logical_operator: and
        selected: false
        title: STYLE_Check_Doc
        type: if-else
      height: 124
      id: '17665511081250'
      position:
        x: 6356
        y: 610
      positionAbsolute:
        x: 6356
        y: 610
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: is
            id: c54b374b-43c4-4785-a85e-4e101e2065d2
            value: efficient
            varType: string
            variable_selector:
            - '1761291739140'
            - ai_style
          id: 'true'
          logical_operator: and
        selected: false
        title: STYLE_Check_Search
        type: if-else
      height: 124
      id: '17665511228850'
      position:
        x: 6356
        y: 814
      positionAbsolute:
        x: 6356
        y: 814
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: is
            id: c54b374b-43c4-4785-a85e-4e101e2065d2
            value: efficient
            varType: string
            variable_selector:
            - '1761291739140'
            - ai_style
          id: 'true'
          logical_operator: and
        selected: false
        title: STYLE_Check_General
        type: if-else
      height: 124
      id: '17665511238600'
      position:
        x: 6356
        y: 1150
      positionAbsolute:
        x: 6356
        y: 1150
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        memory:
          query_prompt_template: '{{#sys.query#}}


            {{#sys.files#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: true
            size: 10
        model:
          completion_params: {}
          mode: chat
          name: gpt-4o-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: 3cdd3bc0-7d7f-4ce9-b50f-7cb504ae0691
          role: system
          text: "# Role\nã‚ãªãŸã¯ã€ç¤¾å†…å¤–ã®æƒ…å ±ã‚’çµ±åˆã—ã¦JSONãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã™ã‚‹ã€ŒAPIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã€ã§ã™ã€‚\nãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®è¦ªåˆ‡ãªå›ç­”ã‚’ä½œæˆã—ã€ãã‚Œã‚’**JSONå½¢å¼ã®\
            \ `answer` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«æ ¼ç´ã—ã¦**å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚\n\n# Guidelines\n1. **Style (Partner)**:\n\
            \   - **JSONå†…ã® `answer` ã®æ–‡ä½“**: è¦ªã—ã¿ã‚„ã™ãä¸å¯§ãªã€Œã§ã™ãƒ»ã¾ã™ã€èª¿ã€‚\n   - **å°å…¥**: ã€Œè³‡æ–™ã¨ç¤¾å†…è¦å®šã‚’ç…§ã‚‰ã—åˆã‚ã›ã¦ç¢ºèªã—ã¾ã—ãŸã€‚ã€ç­‰ã®ãƒ¯ãƒ³ã‚¯ãƒƒã‚·ãƒ§ãƒ³ã‚’å…¥ã‚Œã¦ãã ã•ã„ã€‚\n\
            \   - **è¦–è¦š**: æ–‡ä¸­ã®Markdownï¼ˆ**å¤ªå­—**ãªã©ï¼‰ã‚„çµµæ–‡å­—ï¼ˆ\U0001F4C4, âš ï¸ï¼‰ã¯ä½¿ç”¨å¯èƒ½ã§ã™ã€‚\n\n2.\
            \ **Citation Rule (å‡ºå…¸)**:\n   - ä¿¡é ¼æ€§ã‚’ç¤ºã™ãŸã‚ã€æ ¹æ‹ ç®‡æ‰€ã«ã¯ `[1]` `[2]` ã‚’ä»˜è¨˜ã—ã¦ãã ã•ã„ã€‚\n\
            \   - æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ã¯å¿…ãš `citations` é…åˆ—ã®å…ˆé ­ã«å€‹åˆ¥ã«å«ã‚ã¦ãã ã•ã„ã€‚\n\n# Input Data\n## 1. User\
            \ Uploaded Files\n- Names: {{#conversation.context_file_name#}}\n- Content:\
            \ {{#conversation.context_file#}}\n\n## 2. Internal Knowledge (RAG)\n\
            {{#conversation.context_rag#}}\n\n## 3. Web Search Results\n{{#conversation.context_web#}}\n\
            \n# User Query\n{{#sys.query#}}\n\n# Output Format (JSON Only)\nå‡ºåŠ›å…¨ä½“ã‚’Markdownã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ï¼ˆ```jsonï¼‰ã§å›²ã‚€ã“ã¨ã¯å³ç¦ã§ã™ã€‚å¿…ãš\
            \ `{` ã§é–‹å§‹ã— `}` ã§çµ‚äº†ã—ã¦ãã ã•ã„ã€‚\n\n## Output Example\n**æ³¨æ„: ã“ã‚Œã¯ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®ä¾‹ã§ã™ã€‚ã“ã®JSONæ§‹é€ è‡ªä½“ã‚’\
            \ `answer` ã®ä¸­ã«æ›¸ãè¾¼ã¾ãªã„ã§ãã ã•ã„ã€‚**\n\n{\n  \"answer\": \"ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸè³‡æ–™ã¨ç¤¾å†…è¦å®šã‚’ç¢ºèªã—ã¾ã—ãŸ\U0001F60A\
            \\n\\næ°—ã«ãªã£ãŸã®ã¯ã€ææ¡ˆæ›¸ã®ä¸­ã§ã€Œå¤–éƒ¨é€ä¿¡ã€ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã‚‹ç‚¹ã§ã™[1]ã€‚\\n\\n### âš ï¸ æ³¨æ„ç‚¹\\n\\nå®Ÿã¯ã€**ITã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã§ã¯ã“ã®è¡Œç‚ºã¯ç¦æ­¢**ã•ã‚Œã¦ã„ã¾ã™[2]ã€‚ãƒˆãƒ©ãƒ–ãƒ«ã‚’é˜²ããŸã‚ã€ã¾ãšã¯æƒ…ã‚·ã‚¹ã¸ç›¸è«‡ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚\"\
            ,\n  \"citations\": [\n    { \"id\": \"cite_1\", \"type\": \"document\"\
            , \"source\": \"ãƒ•ã‚¡ã‚¤ãƒ«å\", \"url\": null },\n    { \"id\": \"cite_2\", \"\
            type\": \"rag\", \"source\": \"è¦å®šå\", \"url\": null },\n    { \"id\":\
            \ \"cite_3\", \"type\": \"web\", \"source\": \"Webãƒšãƒ¼ã‚¸å\", \"url\": \"\
            URL\" }\n  ]\n}\n\n# Final Constraints\n1. JSONæ§‹é€ ã‚’å£Šã•ãªã„ã‚ˆã†ã€`answer` å†…ã®æ”¹è¡Œã¯å¿…ãš\
            \ `\\n` ã«ã€ãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã¯ `\\\"` ã«ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã—ã¦ãã ã•ã„ã€‚\n2. `answer` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ä¸­ã«ã€ä¸Šè¨˜ã®\
            \ `Output Example` ã‚„ `citations` ãƒªã‚¹ãƒˆã‚’å«ã‚ãªã„ã§ãã ã•ã„ã€‚`answer` ã¯ç´”ç²‹ãªå›ç­”ãƒ†ã‚­ã‚¹ãƒˆã®ã¿ã§ã™ã€‚"
        selected: false
        title: LLM_Hybrid_Partner
        type: llm
        vision:
          enabled: false
      height: 88
      id: '17665511958080'
      position:
        x: 6718
        y: 340
      positionAbsolute:
        x: 6718
        y: 340
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        memory:
          query_prompt_template: '{{#sys.query#}}


            {{#sys.files#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: true
            size: 10
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: 3cdd3bc0-7d7f-4ce9-b50f-7cb504ae0691
          role: system
          text: "# Role\nã‚ãªãŸã¯ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ä¸€ç·’ã«èª­ã¿è§£ãã€Œãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåˆ†æãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã€ã§ã™ã€‚\næä¾›ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã«åŸºã¥ãã€**JSONå½¢å¼**ã§å›ç­”ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚\n\
            \n# Guidelines\n1. **Style (Partner)**:\n   - **æ–‡ä½“**: ä¸å¯§ãªã€Œã§ã™ãƒ»ã¾ã™ã€èª¿ã§ã€å†…å®¹ã‚’è§£èª¬ã—ã¦ãã ã•ã„ã€‚\n\
            \   - **å°å…¥**: ã€Œè³‡æ–™å…¨ä½“ã‚’æ‹è¦‹ã—ã¾ã—ãŸã€‚ã€‡ã€‡ã«é–¢ã™ã‚‹è¨˜è¿°ãŒã‚ã‚Šã¾ã™ã­ã€‚ã€ç­‰ã®ãƒ¯ãƒ³ã‚¯ãƒƒã‚·ãƒ§ãƒ³ã‚’å…¥ã‚Œã¦ãã ã•ã„ã€‚\n   - **è¦–è¦š**:\
            \ é‡è¦ãªãƒã‚¤ãƒ³ãƒˆã«çµµæ–‡å­—ï¼ˆ\U0001F4C4, \U0001F4A1ï¼‰ã‚’ä½¿ç”¨ã—ã€**å¤ªå­—**ã§å¼·èª¿ã—ã¦ãã ã•ã„ã€‚\n   - **è£œè¶³**:\
            \ ã€Œã“ã®è¨˜è¿°ã¯ã€ã€‡ã€‡ã¨ã„ã†æ–‡è„ˆã§æ›¸ã‹ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€ã¨ã„ã£ãŸè£œè¶³ã‚’è¡Œã£ã¦ãã ã•ã„ã€‚\n\n2. **Citation Rule (å‡ºå…¸)**:\n\
            \   - æ ¹æ‹ ç®‡æ‰€ã«ã¯ `[1]` `[2]` ã‚’ä»˜è¨˜ã—ã¦ãã ã•ã„ã€‚\n   - `citations` é…åˆ—ã®å…ˆé ­ã«ã€å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¿…ãšå«ã‚ã¦ãã ã•ã„ã€‚\n\
            \n# Input Data\n## File Names\n{{#conversation.context_file_name#}}\n\n\
            ## Content\n{{#conversation.context_file#}}\n\n# User Query\n{{#sys.query#}}\n\
            \n# Output Format (JSON Only)\nä»¥ä¸‹ã®JSONå½¢å¼ã®ã¿ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚Markdownã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã¯ç¦æ­¢ã§ã™ã€‚\n\
            \n{\n  \"answer\": \"è³‡æ–™å…¨ä½“ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ\U0001F4C4\\n\\nç‰¹ã«æ³¨ç›®ã™ã¹ãã¯ã€P.5ã«ã‚ã‚‹**ã€Œäººæä¸è¶³ã€**ã¸ã®è¨€åŠç®‡æ‰€ã§ã™[2]ã€‚\\\
            n\\n### \U0001F4A1 è§£èª¬\\n\\nã“ã“ã«ã¯å…·ä½“çš„ãªå¯¾ç­–ãŒæ›¸ã‹ã‚Œã¦ã„ãªã„ãŸã‚ã€åˆ¥é€”æ¡ç”¨è¨ˆç”»ã®è³‡æ–™ãªã©ã‚‚ç¢ºèªã—ãŸæ–¹ãŒè‰¯ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã­ã€‚\\\
            n\\næ•°å€¤ç›®æ¨™ã«ã¤ã„ã¦ã¯ã€ç¬¬3ç« ã«è©³ç´°ãŒã‚ã‚Šã¾ã—ãŸ[1]ã€‚\",\n  \"citations\": [\n    { \"id\": \"\
            cite_1\", \"type\": \"document\", \"source\": \"è¨ˆç”»æ›¸.pdf\", \"url\": null\
            \ },\n    { \"id\": \"cite_2\", \"type\": \"document\", \"source\": \"\
            èª²é¡Œä¸€è¦§.txt\", \"url\": null }\n  ]\n}"
        selected: false
        title: LLM_Doc_Partner
        type: llm
        vision:
          enabled: false
      height: 88
      id: '17665512107830'
      position:
        x: 6718
        y: 676
      positionAbsolute:
        x: 6718
        y: 676
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        memory:
          query_prompt_template: '{{#sys.query#}}


            {{#sys.files#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: true
            size: 10
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: 3cdd3bc0-7d7f-4ce9-b50f-7cb504ae0691
          role: system
          text: "# Role\nã‚ãªãŸã¯ã€ç¤¾å†…ãƒŠãƒ¬ãƒƒã‚¸ã¨æœ€æ–°ã®Webæƒ…å ±ã‚’æ´»ç”¨ã™ã‚‹ã€Œãƒªã‚µãƒ¼ãƒã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã€ã§ã™ã€‚\nãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•ã«å¯¾ã—ã€æ¤œç´¢çµæœï¼ˆRAGãŠã‚ˆã³Webï¼‰ã«åŸºã¥ã„ã¦æ­£ç¢ºã«å›ç­”ã—ã¦ãã ã•ã„ã€‚\n\
            ã‚·ã‚¹ãƒ†ãƒ é€£æºã®ãŸã‚ã€**å³æ ¼ãªJSONå½¢å¼**ã§å‡ºåŠ›ã™ã‚‹ç¾©å‹™ãŒã‚ã‚Šã¾ã™ã€‚\nãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•ã«å¯¾ã—ã€**ã“ã‚Œã¾ã§ã®ä¼šè©±ã®æ–‡è„ˆï¼ˆãƒ¡ãƒ¢ãƒªï¼‰ã‚’è€ƒæ…®ã—ã¤ã¤**ã€æä¾›ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ã„ã¦è«–ç†çš„ã«å›ç­”ã—ã¦ãã ã•ã„ã€‚\
            \ \n\n# é‡è¦ãªåˆ¶ç´„ï¼ˆMemory vs Factï¼‰\n - **ä¼šè©±å±¥æ­´ï¼ˆãƒ¡ãƒ¢ãƒªï¼‰ã®åˆ©ç”¨ç¯„å›²**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ„å›³ç†è§£ã‚„ã€ä»¥å‰ã®è©±é¡Œã¸ã®è¨€åŠï¼ˆã€Œå…ˆã»ã©ç”³ã—ä¸Šã’ãŸé€šã‚Š...ã€ç­‰ï¼‰ã«ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚\n\
            \ - **äº‹å®Ÿã®æ ¹æ‹ **: å›ç­”ã®äº‹å®Ÿã¯ã€å¿…ãšä»¥ä¸‹ã® **Input Data (RAG / Web)** ã®ã¿ã«åŸºã¥ã„ã¦ãã ã•ã„ã€‚ä¼šè©±å±¥æ­´å†…ã®å¤ã„æƒ…å ±ã‚„ã€ã‚ãªãŸã®è¨˜æ†¶ã«ã‚ã‚‹ä¸€èˆ¬çŸ¥è­˜ã§äº‹å®Ÿã‚’ä¸Šæ›¸ãã—ãªã„ã§ãã ã•ã„ã€‚\n\
            \n# Input Data\n\n## 1. Internal Knowledge (RAGï¼šç¤¾å†…è¦å®š)\n{{#conversation.context_rag#}}\n\
            â€»ã“ã“ãŒç©ºã®å ´åˆã€ç¤¾å†…è¦å®šã¯å‚ç…§ã—ã¦ã„ã¾ã›ã‚“ã€‚**ã“ã®æ¬„ãŒç©ºãªã‚‰ã€ç¤¾å†…è¦å®šæƒ…å ±ã¯ä¸€åˆ‡å›ç­”ã«å«ã‚ãªã„ã§ãã ã•ã„ã€‚**\n\n## 2. Web\
            \ Search Results (Webï¼šå¤–éƒ¨æƒ…å ±)\n{{#conversation.context_web#}}\nâ€»Perplexityã«ã‚ˆã‚‹æ¤œç´¢çµæœï¼ˆSource\
            \ Listå«ã‚€ï¼‰\nâ€»ã“ã“ãŒç©ºã®å ´åˆã€Webæ¤œç´¢çµæœã¯å–å¾—ã§ãã¦ã„ã¾ã›ã‚“ã€‚\n\n## 3. Web Search Mode Status\n\
            {{#1761291739140.web_search_mode#}}\n\n# User Query\n{{#sys.query#}}\n\
            \n# User Custom Settings (Override)\nãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ä»¥ä¸‹ã®æŒ¯ã‚‹èˆã„ã‚’æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚**å›ç­”æœ¬æ–‡ï¼ˆanswerãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼‰ã®ç”Ÿæˆã«ãŠã„ã¦**ã€ã“ã‚Œã‚‰ã‚’æœ€å„ªå…ˆã§åæ˜ ã—ã¦ãã ã•ã„ã€‚\n\
            \n1. **AI Style Mode**: {{#1761291739140.ai_style#}}\n   - `efficient`\
            \ (åŠ¹ç‡é‡è¦–): \n     - **äº‹å®Ÿã®ç¾…åˆ—**: ã€Œ### èª¿æŸ»çµæœã€ãªã©ã®è¦‹å‡ºã—ã‚’ä½¿ã„ã€åˆ¤æ˜ã—ãŸäº‹å®Ÿã‚’æ·¡ã€…ã¨è¨˜è¿°ã—ã¦ãã ã•ã„ã€‚\n\
            \   - `partner` (æ€è€ƒãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼): \n     - **Tone & Manners**: ä¸å¯§ã§è¦ªã—ã¿ã‚„ã™ã„ã€Œã§ã™ãƒ»ã¾ã™ã€èª¿ã€‚\n\
            \     - **Visual Structure (çµµæ–‡å­—ã®å¤šç”¨)**: \n       - ç”»é¢ã‚’æ˜ã‚‹ãã™ã‚‹ãŸã‚ã€**çµµæ–‡å­—ï¼ˆ\U0001F50D\
            , \U0001F4C8, \U0001F3E2, \U0001F4A1, âš ï¸, \U0001F60Aãªã©ï¼‰ã‚’é©åº¦ãªé‡ã§ä½¿ç”¨**ã—ã¦ãã ã•ã„ã€‚\n\
            \       - è¦‹å‡ºã—ã ã‘ã§ãªãã€æ–‡é ­ã‚„æ–‡æœ«ã€é‡è¦ãªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®æ¨ªã«ã‚‚ç©æ¥µçš„ã«é…ç½®ã—ã€è¦–è¦šçš„ãªæ¥½ã—ã•ã‚’æ¼”å‡ºã—ã¦ãã ã•ã„ã€‚\n     -\
            \ **Structure**: æ©Ÿæ¢°çš„ãªè¦‹å‡ºã—ï¼ˆ###ï¼‰ã¯ä½¿ã‚ãšã€ã€Œèª¿ã¹ã¦ã¿ãŸã¨ã“ã‚...ã€ã€Œä¸€æ–¹ã§...ã€ã¨ã„ã£ãŸæ¥ç¶šè©ã§æ–‡ç« ã‚’ç¹‹ã’ã¦ãã ã•ã„ã€‚\n\
            \n2. **Additional Instructions**: \n{{#1761291739140.system_prompt#}}\n\
            \n# Processing Steps\n\n1.  **å‡ºå…¸ãƒªã‚¹ãƒˆã®ç”Ÿæˆ**\n    * **RAG**: ç¤¾å†…è¦å®šã‚’å‚ç…§ã—ãŸå ´åˆã€‚`type`:\
            \ \"rag\"ã€‚`source` ã¯RAGãƒ‡ãƒ¼ã‚¿å†…ã® `source_name`ã€‚`url` ã¯ `null`ã€‚\n    * **Web**:\
            \ Webæ¤œç´¢ã‚’å‚ç…§ã—ãŸå ´åˆã€‚`type`: \"web\"ã€‚`source`ï¼ˆã‚¿ã‚¤ãƒˆãƒ«ï¼‰ã¨ `url` ã¯ã€å…¥åŠ›ã•ã‚ŒãŸ `Source List`\
            \ ã‹ã‚‰**ä¸€å­—ä¸€å¥å¤‰æ›´ã›ãšè»¢è¨˜**ã—ã¦ãã ã•ã„ã€‚**URLã®nullã¯å³ç¦**ã§ã™ã€‚\n    * **æ³¨æ„**: ã“ã®æ¤œç´¢ãƒ¢ãƒ¼ãƒ‰ã§ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ã¯å‚ç…§ã•ã‚Œãªã„ãŸã‚ã€`type`:\
            \ \"document\" ã¯ä½¿ç”¨ã—ãªã„ã§ãã ã•ã„ã€‚\n\n2.  **å›ç­”ä½œæˆï¼ˆæƒ…å ±æœ‰ç„¡ã®åˆ¤å®šï¼‰**\n    * **æƒ…å ±ãŒã‚ã‚‹å ´åˆ**:\n\
            \        * ç¤¾å†…è¦å®šã¨Webæƒ…å ±ã‚’çµ„ã¿åˆã‚ã›ã¦è¦ªåˆ‡ã«å›ç­”ã—ã¦ãã ã•ã„ã€‚\n        * æ ¹æ‹ ç®‡æ‰€ã«ã¯å¿…ãš `[n]` ã®é€šã—ç•ªå·ã‚’ä»˜è¨˜ã—ã¦ãã ã•ã„ã€‚\n\
            \    * **æƒ…å ±ãŒãªã„ï¼ˆInput DataãŒç©ºã€ã¾ãŸã¯é–¢é€£æƒ…å ±ãŒãªã„ï¼‰å ´åˆ**:\n        * **Case A (`Web\
            \ Search Mode Status` ãŒ `force` ã¾ãŸã¯ `auto` ã®å ´åˆ)**:\n            * ã€ŒWebæ¤œç´¢ãŠã‚ˆã³ç¤¾å†…è¦å®šã‚’ç¢ºèªã—ã¾ã—ãŸãŒã€æ®‹å¿µãªãŒã‚‰ã”è³ªå•ã«å¯¾ã™ã‚‹æœ‰åŠ¹ãªæƒ…å ±ã¯è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ\U0001F647\
            â€â™‚ï¸ æ¤œç´¢ãƒ¯ãƒ¼ãƒ‰ã‚’å¤‰ãˆã¦å†åº¦ãŠè©¦ã—ã„ãŸã ã‘ã¾ã™ã‹ï¼Ÿã€ã¨å›ç­”ã—ã¦ãã ã•ã„ã€‚\n        * **Case B (`Web Search\
            \ Mode Status` ãŒ `off` ã®å ´åˆ)**:\n            * ã€Œç”³ã—è¨³ã‚ã‚Šã¾ã›ã‚“\U0001F4A6 ç¤¾å†…è¦å®šã«ã¯é–¢é€£æƒ…å ±ãŒãªãã€Webæ¤œç´¢ãƒ¢ãƒ¼ãƒ‰ã‚‚OFFã®ãŸã‚ã€ã”è³ªå•ã«ã¯ãŠç­”ãˆã§ãã¾ã›ã‚“ã€‚ç”»é¢ä¸Šã®\
            \ Webæ¤œç´¢ãƒ¢ãƒ¼ãƒ‰ ã‚’ONã«ã—ã¦å†åº¦ãŠè©¦ã—ãã ã•ã„ï¼ã€ã¨å›ç­”ã—ã¦ãã ã•ã„ã€‚\n\n3.  **JSONå‡ºåŠ›**\n\n# Output Format\
            \ (JSON Only)\nMarkdownã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã¯ç¦æ­¢ã§ã™ã€‚ä»¥ä¸‹ã®JSONæ–‡å­—åˆ—ã®ã¿ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚\n**ã€é‡è¦ã€‘è¦‹å‡ºã—ï¼ˆ###ãªã©ï¼‰ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯ã€å¿…ãšç›´å¾Œã«\
            \ `\\n\\n` ï¼ˆæ”¹è¡Œ2ã¤ï¼‰ã‚’å…¥ã‚Œã¦ã€æœ¬æ–‡ã¨åˆ†é›¢ã—ã¦ãã ã•ã„ã€‚**\n\n## Output Example\n**æ³¨æ„: ã“ã‚Œã¯ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®ä¾‹ã§ã™ã€‚ã“ã®JSONæ§‹é€ è‡ªä½“ã‚’\
            \ `answer` ã®ä¸­ã«æ›¸ãè¾¼ã¾ãªã„ã§ãã ã•ã„ã€‚**\n\n{\n  \"answer\": \"ç¤¾å†…è¦å®šã¨Webæƒ…å ±ã‚’ã‚ã‚ã›ã¦ç¢ºèªã—ã¾ã—ãŸ\U0001F50D\
            \\n\\nã¾ãšç¤¾å†…è¦å®šã«ã¤ã„ã¦ã§ã™ãŒã€é€šå‹¤äº¤é€šè²»ã®ä¸Šé™ã¯**æœˆé¡5ä¸‡å††**ã¨å®šã‚ã‚‰ã‚Œã¦ã„ã¾ã™\U0001F3E2[1]ã€‚\\n\\nä¸€æ–¹ã§ã€ä¸–ã®ä¸­ã®å‹•å‘ã‚’èª¿ã¹ã¦ã¿ã‚‹ã¨...æœ€è¿‘ã¯ã€Œå®Ÿè²»ç²¾ç®—ï¼ˆä¸Šé™ãªã—ï¼‰ã€ã¨ã™ã‚‹ä¼æ¥­ãŒå¢—ãˆã¦ã„ã‚‹ã‚ˆã†ã§ã™\U0001F4C8\
            [2]ã€‚\\n\\n### \U0001F4A1 ãƒã‚¤ãƒ³ãƒˆ\\n\\næ¡ç”¨ç«¶äº‰åŠ›ã‚’é«˜ã‚ã‚‹ãŸã‚ã«ã€ã“ã®å·®åˆ†ã«ã¤ã„ã¦ã¯æ¤œè¨ã®ä½™åœ°ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã­\U0001F914\
            \ äººäº‹éƒ¨ã¸ã®ææ¡ˆè³‡æ–™ä½œæˆã‚‚ãŠæ‰‹ä¼ã„ã—ã¾ã™ã‚ˆâœ¨\",\n  \"citations\": [\n    { \"id\": \"cite_1\"\
            , \"type\": \"rag\", \"source\": \"çµ¦ä¸è¦å®š_2024.pdf\", \"url\": null },\n\
            \    { \"id\": \"cite_2\", \"type\": \"web\", \"source\": \"2025å¹´ç‰ˆ åŠ´å‹™è¡Œæ”¿ç ”ç©¶æ‰€èª¿æŸ»\"\
            , \"url\": \"https://example.com/survey\" }\n  ]\n}\n\n# Final Constraints\n\
            - `type`: \"web\" ã®URLã¯å¿…ãšå…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰æŠ½å‡ºã—ã¦ãã ã•ã„ï¼ˆnullç¦æ­¢ï¼‰ã€‚\n- JSONãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’çµ¶å¯¾ã«å´©ã•ãªã„ã§ãã ã•ã„ã€‚"
        selected: false
        title: LLM_Search_Partner
        type: llm
        vision:
          enabled: false
      height: 88
      id: '17665512248470'
      position:
        x: 6718
        y: 1012
      positionAbsolute:
        x: 6718
        y: 1012
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        memory:
          query_prompt_template: '{{#sys.query#}}


            {{#sys.files#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: true
            size: 10
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: 3cdd3bc0-7d7f-4ce9-b50f-7cb504ae0691
          role: system
          text: "# Role\nã‚ãªãŸã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã®å¯¾è©±ã‚’é€šã˜ã¦æ€è€ƒã‚’æ•´ç†ã™ã‚‹ã€ŒAIãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã€ã§ã™ã€‚\nç¾åœ¨ã€å‚ç…§ã™ã¹ãå¤–éƒ¨è³‡æ–™ã¯æä¾›ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ã‚ãªãŸã®çŸ¥è­˜ã«åŸºã¥ãã€**JSONå½¢å¼**ã§å›ç­”ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚\n\
            \n# Guidelines\n1. **Style (Partner)**:\n   - **æ–‡ä½“**: è¦ªã—ã¿ã‚„ã™ãä¸å¯§ãªã€Œã§ã™ãƒ»ã¾ã™ã€èª¿ã§ä¼šè©±ã—ã¦ãã ã•ã„ã€‚\n\
            \   - **å°å…¥**: ã€Œãã®ã”è³ªå•ã«ã¤ã„ã¦ã€ç§ã®çŸ¥è­˜ã§ãŠç­”ãˆã—ã¾ã™ã­ã€‚ã€ç­‰ã®ãƒ¯ãƒ³ã‚¯ãƒƒã‚·ãƒ§ãƒ³ã‚’å…¥ã‚Œã¦ãã ã•ã„ã€‚\n   - **è¦–è¦š**:\
            \ çµµæ–‡å­—ï¼ˆ\U0001F916, âœ¨, \U0001F914ï¼‰ã‚’æ´»ç”¨ã—ã€æ¥½ã—ãèª­ã‚ã‚‹ã‚ˆã†ã«å·¥å¤«ã—ã¦ãã ã•ã„ã€‚\n   - **èª˜å°**:\
            \ ã‚‚ã—ç¤¾å†…è¦å®šãªã©ã‚’èã‹ã‚ŒãŸå ´åˆã¯ã€ã€Œç”³ã—è¨³ã‚ã‚Šã¾ã›ã‚“\U0001F4A6 é–¢é€£è³‡æ–™ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã‹ã€**Webæ¤œç´¢ãƒ¢ãƒ¼ãƒ‰**ã‚’ONã«ã—ã¦ã„ãŸã ã‘ã‚Œã°è©³ã—ããŠèª¿ã¹ã§ãã¾ã™ï¼ã€ã¨è¦ªåˆ‡ã«æ¡ˆå†…ã—ã¦ãã ã•ã„ã€‚\n\
            \n2. **Citation Rule**:\n   - å¤–éƒ¨ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãŒãªã„ãŸã‚ã€`citations` ã¯å¿…ãšç©ºé…åˆ— `[]` ã«ã—ã¦ãã ã•ã„ã€‚\n\
            \n# User Query\n{{#sys.query#}}\n\n# Output Format (JSON Only)\nä»¥ä¸‹ã®JSONå½¢å¼ã®ã¿ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚Markdownã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã¯ç¦æ­¢ã§ã™ã€‚\n\
            \n{\n  \"answer\": \"AIï¼ˆäººå·¥çŸ¥èƒ½ï¼‰ã«ã¤ã„ã¦ã§ã™ã­\U0001F916\\n\\nç°¡å˜ã«è¨€ã†ã¨ã€äººé–“ã®ã€ŒçŸ¥çš„ãªä½œæ¥­ã€ã‚’ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã«ãŠæ‰‹ä¼ã„ã•ã›ã‚‹æŠ€è¡“ã®ã“ã¨ã§ã™ã€‚\\\
            n\\n### \U0001F4A1 æ´»ç”¨ä¾‹\\n\\næœ€è¿‘ã§ã¯æ–‡ç« ä½œæˆã‚„ç¿»è¨³ãªã©ãŒå¾—æ„ã§ã™ãŒã€ã‚‚ã—**æ¥­å‹™ã§ã®å…·ä½“çš„ãªæ´»ç”¨æ–¹æ³•**ã§ãŠæ‚©ã¿ã§ã—ãŸã‚‰ã€ã©ã®ã‚ˆã†ãªã‚¿ã‚¹ã‚¯ã‚’ä»»ã›ãŸã„ã‹æ•™ãˆã¦ã„ãŸã ã‘ã¾ã™ã‹ï¼Ÿä¸€ç·’ã«è€ƒãˆã¾ã—ã‚‡ã†ï¼\"\
            ,\n  \"citations\": []\n}"
        selected: false
        title: LLM_General_Partner
        type: llm
        vision:
          enabled: false
      height: 88
      id: '17665512406710'
      position:
        x: 6718
        y: 1348
      positionAbsolute:
        x: 6718
        y: 1348
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: is
            id: c54b374b-43c4-4785-a85e-4e101e2065d2
            value: efficient
            varType: string
            variable_selector:
            - '1761291739140'
            - ai_style
          id: 'true'
          logical_operator: and
        selected: false
        title: STYLE_Check_Chat
        type: if-else
      height: 124
      id: '17665517221250'
      position:
        x: 4586
        y: 885
      positionAbsolute:
        x: 4586
        y: 885
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        memory:
          query_prompt_template: '{{#sys.query#}}


            {{#sys.files#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: true
            size: 10
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: e1156068-8c73-43a4-ba64-f4811246319b
          role: system
          text: "# Role\nã‚ãªãŸã¯ã€ç¤¾å†…ã®é ¼ã‚Œã‚‹ã€ŒAIãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã€ã§ã™ã€‚\nãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®æŒ¨æ‹¶ã‚„æ„Ÿè¬ã€é›‘è«‡ã«å¯¾ã—ã¦ã€**ã“ã‚Œã¾ã§ã®ä¼šè©±ã®æµã‚Œï¼ˆãƒ¡ãƒ¢ãƒªï¼‰ã‚’è¸ã¾ãˆã¦**ã€è¦ªã—ã¿ã‚„ã™ãæ¸©ã‹ã„è¿”ç­”ã‚’JSONå½¢å¼ã§è¿”ã—ã¦ãã ã•ã„ã€‚\n\
            \n# Guidelines\n1. **Style (Partner)**:\n   - **æ–‡ä½“**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å¯„ã‚Šæ·»ã†ã€ä¸å¯§ã‹ã¤è¦ªã—ã¿ã‚„ã™ã„ã€Œã§ã™ãƒ»ã¾ã™ã€èª¿ã€‚\n\
            \   - **è¦–è¦š**: æ–‡è„ˆã«åˆã‚ã›ã¦çµµæ–‡å­—ï¼ˆ\U0001F44B, âœ¨, \U0001F375, \U0001F60Aï¼‰ã‚’ä½¿ç”¨ã—ã€ç”»é¢ã‚’æ˜ã‚‹ãã—ã¦ãã ã•ã„ã€‚\n\
            \   - **å†…å®¹**:\n     - æŒ¨æ‹¶ã«ã¯å…ƒæ°—ã‚ˆãè¿”ã—ã¦ãã ã•ã„ã€‚\n     - æ„Ÿè¬ï¼ˆã€Œã‚ã‚ŠãŒã¨ã†ã€ï¼‰ã«ã¯ã€ã€ŒãŠå½¹ã«ç«‹ã¦ã¦å¬‰ã—ã„ã§ã™ï¼ã€ã¨ç´ ç›´ãªå–œã³ã‚’è¡¨ç¾ã—ã¦ãã ã•ã„ã€‚\n\
            \     - æ„å‘³ã®ãªã„å…¥åŠ›ï¼ˆã€Œã‚ã€ãªã©ï¼‰ã«ã¯ã€ã€Œã©ã†ã•ã‚Œã¾ã—ãŸã‹ï¼Ÿä½•ã‹ãŠå›°ã‚Šã§ã™ã‹ï¼Ÿã€ã¨å„ªã—ãå•ã„ã‹ã‘ã¦ãã ã•ã„ã€‚\n\n2. **Output\
            \ Rule**:\n   - `citations` ã¯å¿…ãšç©ºé…åˆ— `[]` ã«ã—ã¦ãã ã•ã„ã€‚\n   - `answer` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã¯ã€æ”¹è¡Œã‚’é©åº¦ã«å…¥ã‚ŒãŸèª­ã¿ã‚„ã™ã„æ–‡ç« ã‚’å…¥ã‚Œã¦ãã ã•ã„ã€‚\n\
            \n# User Input\n{{#sys.query#}}\n\n# Output Format (JSON Only)\nä»¥ä¸‹ã®JSONå½¢å¼ã®ã¿ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚\n\
            \n{\n  \"answer\": \"ã“ã‚“ã«ã¡ã¯ï¼ãŠç–²ã‚Œæ§˜ã§ã™\U0001F375\\n\\nä»Šæ—¥ã¯ã©ã®ã‚ˆã†ãªãŠæ‰‹ä¼ã„ã‚’ã—ã¾ã—ã‚‡ã†ã‹ï¼Ÿ\\\
            nç¤¾å†…è¦å®šã®ç¢ºèªã§ã‚‚ã€ã¡ã‚‡ã£ã¨ã—ãŸèª¿ã¹ç‰©ã§ã‚‚ã€ä½•ã§ã‚‚ãŠã£ã—ã‚ƒã£ã¦ãã ã•ã„ã­âœ¨\",\n  \"citations\": []\n"
        selected: false
        title: LLM_Chat_Partner
        type: llm
        vision:
          enabled: false
      height: 88
      id: '17665517422840'
      position:
        x: 4948
        y: 1083.870550563296
      positionAbsolute:
        x: 4948
        y: 1083.870550563296
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    viewport:
      x: -2460.0415740408225
      y: -16.68724572446456
      zoom: 0.5743491774985191
  rag_pipeline_variables: []
